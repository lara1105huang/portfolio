/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{0:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return Z})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return z})),n.d(t,"k",(function(){return E})),n.d(t,"l",(function(){return ee})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return G})),n.d(t,"o",(function(){return w})),n.d(t,"p",(function(){return ie})),n.d(t,"q",(function(){return X})),n.d(t,"r",(function(){return ue})),n.d(t,"s",(function(){return I})),n.d(t,"t",(function(){return H})),n.d(t,"u",(function(){return k})),n.d(t,"v",(function(){return O})),n.d(t,"w",(function(){return A})),n.d(t,"x",(function(){return K})),n.d(t,"y",(function(){return x})),n.d(t,"z",(function(){return j})),n.d(t,"A",(function(){return C})),n.d(t,"B",(function(){return S})),n.d(t,"C",(function(){return R})),n.d(t,"D",(function(){return N})),n.d(t,"E",(function(){return P})),n.d(t,"F",(function(){return D})),n.d(t,"G",(function(){return W})),n.d(t,"H",(function(){return U})),n.d(t,"I",(function(){return map})),n.d(t,"J",(function(){return Y})),n.d(t,"K",(function(){return J})),n.d(t,"L",(function(){return $})),n.d(t,"M",(function(){return ce})),n.d(t,"N",(function(){return ae})),n.d(t,"O",(function(){return V})),n.d(t,"P",(function(){return re})),n.d(t,"Q",(function(){return se})),n.d(t,"R",(function(){return oe}));const r=!1,o=!1,c="${JSCORE_VERSION}",l=function(e,t){if(!e)throw h(t)},h=function(e){return new Error("Firebase Database ("+c+") INTERNAL ASSERT FAILED: "+e)},d=function(e){const t=[];let p=0;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);n<128?t[p++]=n:n<2048?(t[p++]=n>>6|192,t[p++]=63&n|128):55296==(64512&n)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++i)),t[p++]=n>>18|240,t[p++]=n>>12&63|128,t[p++]=n>>6&63|128,t[p++]=63&n|128):(t[p++]=n>>12|224,t[p++]=n>>6&63|128,t[p++]=63&n|128)}return t},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(input,e){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[];for(let i=0;i<input.length;i+=3){const e=input[i],n=i+1<input.length,r=n?input[i+1]:0,o=i+2<input.length,c=o?input[i+2]:0,l=e>>2,h=(3&e)<<4|r>>4;let d=(15&r)<<2|c>>6,f=63&c;o||(f=64,n||(d=64)),output.push(t[l],t[h],t[d],t[f])}return output.join("")},encodeString(input,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(input):this.encodeByteArray(d(input),e)},decodeString(input,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(input):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){const u=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{const c=e[n++],l=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&l)}}return t.join("")}(this.decodeStringToByteArray(input,e))},decodeStringToByteArray(input,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,output=[];for(let i=0;i<input.length;){const e=t[input.charAt(i++)],n=i<input.length?t[input.charAt(i)]:0;++i;const r=i<input.length?t[input.charAt(i)]:64;++i;const o=i<input.length?t[input.charAt(i)]:64;if(++i,null==e||null==n||null==r||null==o)throw Error();const c=e<<2|n>>4;if(output.push(c),64!==r){const e=n<<4&240|r>>2;if(output.push(e),64!==o){const e=r<<6&192|o;output.push(e)}}}return output},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},m=function(e){const t=d(e);return f.encodeByteArray(t,!0)},y=function(e){return m(e).replace(/\./g,"")},v=function(e){try{return f.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _(e){return w(void 0,e)}function w(e,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return source}for(const t in source)source.hasOwnProperty(t)&&"__proto__"!==t&&(e[t]=w(e[t],source[t]));return e}class T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function E(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,sub=e.sub||e.user_id;if(!sub)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:sub,user_id:sub,firebase:{sign_in_provider:"custom",identities:{}}},e);return[y(JSON.stringify({alg:"none",type:"JWT"})),y(JSON.stringify(o)),""].join(".")}function I(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function C(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())}function S(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}function k(){return"object"==typeof self&&self.self===self}function O(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function N(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function A(){return I().indexOf("Electron/")>=0}function x(){const e=I();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function D(){return I().indexOf("MSAppHost/")>=0}function R(){return!0===r||!0===o}function P(){return!S()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}class L extends Error{constructor(code,e,t){super(e),this.code=code,this.customData=t,this.name="FirebaseError",Object.setPrototypeOf(this,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M.prototype.create)}}class M{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(code,...data){const e=data[0]||{},t=`${this.service}/${code}`,template=this.errors[code],n=template?function(template,data){return template.replace(F,((e,t)=>{const n=data[t];return null!=n?String(n):`<${t}?>`}))}(template,e):"Error",r=`${this.serviceName}: ${n} (${t}).`;return new L(t,r,e)}}const F=/\{\$([^}]+)}/g;function U(e){return JSON.parse(e)}function V(data){return JSON.stringify(data)}const B=function(e){let header={},t={},data={},n="";try{const r=e.split(".");header=U(v(r[0])||""),t=U(v(r[1])||""),n=r[2],data=t.d||{},delete t.d}catch(e){}return{header:header,claims:t,data:data,signature:n}},W=function(e){const t=B(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},H=function(e){const t=B(e).claims;return"object"==typeof t&&!0===t.admin};function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function K(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function map(e,t,n){const r={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r}function G(a,b){if(a===b)return!0;const e=Object.keys(a),t=Object.keys(b);for(const n of e){if(!t.includes(n))return!1;const e=a[n],r=b[n];if(Q(e)&&Q(r)){if(!G(e,r))return!1}else if(e!==r)return!1}for(const n of t)if(!e.includes(n))return!1;return!0}function Q(e){return null!==e&&"object"==typeof e}function Y(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function J(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function X(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Z{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let i=16;i<80;i++){const e=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(e<<1|e>>>31)}let r,o,a=this.chain_[0],b=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(let i=0;i<80;i++){i<40?i<20?(r=l^b&(c^l),o=1518500249):(r=b^c^l,o=1859775393):i<60?(r=b&c|l&(b|c),o=2400959708):(r=b^c^l,o=3395469782);const e=(a<<5|a>>>27)+r+h+o+n[i]&4294967295;h=l,l=c,c=4294967295&(b<<30|b>>>2),b=a,a=e}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const o=this.buf_;let c=this.inbuf_;for(;r<t;){if(0===c)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(o[c]=e.charCodeAt(r),++c,++r,c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<t;)if(o[c]=e[r],++c,++r,c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}function ee(e,t){const n=new te(e,t);return n.subscribe.bind(n)}class te{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ne),void 0===r.error&&(r.error=ne),void 0===r.complete&&(r.complete=ne);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}unsubscribeOne(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(i,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[i])try{e(this.observers[i])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ne(){}const re=function(e,t,n,r){let o;if(r<t?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")}};function ie(e,t){return`${e} failed: ${t} argument `}function se(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ie(e,t)+"must be a valid function.")}function oe(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ie(e,t)+"must be a valid context object.")}const ae=function(e){const t=[];let p=0;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);if(n>=55296&&n<=56319){const t=n-55296;i++,l(i<e.length,"Surrogate pair missing trail surrogate.");n=65536+(t<<10)+(e.charCodeAt(i)-56320)}n<128?t[p++]=n:n<2048?(t[p++]=n>>6|192,t[p++]=63&n|128):n<65536?(t[p++]=n>>12|224,t[p++]=n>>6&63|128,t[p++]=63&n|128):(t[p++]=n>>18|240,t[p++]=n>>12&63|128,t[p++]=n>>6&63|128,t[p++]=63&n|128)}return t},ce=function(e){let p=0;for(let i=0;i<e.length;i++){const t=e.charCodeAt(i);t<128?p++:t<2048?p+=2:t>=55296&&t<=56319?(p+=4,i++):p+=3}return p};function ue(e){return e&&e._delegate?e._delegate:e}}).call(this,n(30))},1:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return Se})),n.d(t,"c",(function(){return Le})),n.d(t,"d",(function(){return Ue})),n.d(t,"e",(function(){return Be})),n.d(t,"f",(function(){return Ve})),n.d(t,"g",(function(){return De})),n.d(t,"h",(function(){return qe})),n.d(t,"i",(function(){return Nn})),n.d(t,"j",(function(){return Cr})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return Tn})),n.d(t,"m",(function(){return We})),n.d(t,"n",(function(){return He})),n.d(t,"o",(function(){return ze})),n.d(t,"p",(function(){return O})),n.d(t,"q",(function(){return be})),n.d(t,"r",(function(){return E})),n.d(t,"s",(function(){return Yt})),n.d(t,"t",(function(){return D})),n.d(t,"u",(function(){return Yn})),n.d(t,"v",(function(){return ae})),n.d(t,"x",(function(){return gt})),n.d(t,"y",(function(){return $t})),n.d(t,"z",(function(){return Er})),n.d(t,"A",(function(){return Gt})),n.d(t,"B",(function(){return mt})),n.d(t,"C",(function(){return pt})),n.d(t,"D",(function(){return Ee})),n.d(t,"F",(function(){return vt})),n.d(t,"G",(function(){return y})),n.d(t,"H",(function(){return Et})),n.d(t,"I",(function(){return Lt})),n.d(t,"J",(function(){return qt})),n.d(t,"K",(function(){return Qn})),n.d(t,"L",(function(){return oe})),n.d(t,"M",(function(){return ln})),n.d(t,"N",(function(){return bt})),n.d(t,"O",(function(){return ot})),n.d(t,"P",(function(){return Cn})),n.d(t,"Q",(function(){return qn})),n.d(t,"R",(function(){return Gn})),n.d(t,"S",(function(){return Bt})),n.d(t,"T",(function(){return at})),n.d(t,"U",(function(){return Sn})),n.d(t,"V",(function(){return Fn})),n.d(t,"W",(function(){return Kn})),n.d(t,"X",(function(){return It})),n.d(t,"Y",(function(){return ft})),n.d(t,"Z",(function(){return wt})),n.d(t,"ab",(function(){return Qe})),n.d(t,"bb",(function(){return st})),n.d(t,"cb",(function(){return ct})),n.d(t,"db",(function(){return _t})),n.d(t,"eb",(function(){return Tt})),n.d(t,"fb",(function(){return In})),n.d(t,"gb",(function(){return Mn})),n.d(t,"hb",(function(){return $n})),n.d(t,"ib",(function(){return Ze})),n.d(t,"jb",(function(){return kt})),n.d(t,"kb",(function(){return Ot})),n.d(t,"lb",(function(){return On})),n.d(t,"mb",(function(){return St})),n.d(t,"nb",(function(){return Ct})),n.d(t,"ob",(function(){return yt})),n.d(t,"w",(function(){return Br})),n.d(t,"E",(function(){return Ur}));var r=n(0),o=n(7);function c(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}Object.create;Object.create;var l=n(14),h=n(13);const d={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},f={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function m(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},v=m,_=new r.b("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),w=new l.b("@firebase/auth");function T(e,...t){w.logLevel<=l.a.ERROR&&w.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function E(e,...t){throw k(e,...t)}function I(e,...t){return k(e,...t)}function C(e,code,t){const n=Object.assign(Object.assign({},v()),{[code]:t});return new r.b("auth","Firebase",n).create(code,{appName:e.name})}function S(e,object,t){if(!(object instanceof t))throw t.name!==object.constructor.name&&E(e,"argument-error"),C(e,"argument-error",`Type of ${object.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function k(e,...t){if("string"!=typeof e){const code=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(code,...n)}return _.create(e,...t)}function O(e,t,...n){if(!e)throw k(t,...n)}function N(e){const t="INTERNAL ASSERTION FAILED: "+e;throw T(t),new Error(t)}function A(e,t){e||N(t)}const x=new Map;function D(e){A(e instanceof Function,"Expected a class definition");let t=x.get(e);return t?(A(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,x.set(e,t),t)}function R(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function P(){return"http:"===j()||"https:"===j()}function j(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class L{constructor(e,t){this.shortDelay=e,this.longDelay=t,A(t>e,"Short delay should be less than long delay!"),this.isMobile=Object(r.A)()||Object(r.D)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(P()||Object(r.v)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function M(e,path){A(e.emulator,"Emulator should always be set here");const{url:t}=e.emulator;return path?`${t}${path.startsWith("/")?path.slice(1):path}`:t}class F{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void N("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void N("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void N("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const U={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},V=new L(3e4,6e4);function B(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function W(e,t,path,n,o={}){return H(e,o,(async()=>{let body={},o={};n&&("GET"===t?o=n:body={body:JSON.stringify(n)});const c=Object(r.J)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),F.fetch()($(e,e.config.apiHost,path,c),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},body))}))}async function H(e,t,n){e._canInitEmulator=!1;const o=Object.assign(Object.assign({},U),t);try{const t=new K(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const c=await r.json();if("needConfirmation"in c)throw G(e,"account-exists-with-different-credential",c);if(r.ok&&!("errorMessage"in c))return c;{const t=r.ok?c.errorMessage:c.error.message,[n,l]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw G(e,"credential-already-in-use",c);if("EMAIL_EXISTS"===n)throw G(e,"email-already-in-use",c);const h=o[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw C(e,h,l);E(e,h)}}catch(t){if(t instanceof r.c)throw t;E(e,"network-request-failed")}}async function z(e,t,path,n,r={}){const o=await W(e,t,path,n,r);return"mfaPendingCredential"in o&&E(e,"multi-factor-auth-required",{_serverResponse:o}),o}function $(e,t,path,n){const base=`${t}${path}?${n}`;return e.config.emulator?M(e.config,base):`${e.config.apiScheme}://${base}`}class K{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(I(this.auth,"network-request-failed"))),V.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function G(e,code,t){const n={appName:e.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=I(e,code,n);return r.customData._tokenResponse=t,r}function Q(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Y(e){return 1e3*Number(e)}function J(e){const[t,n,o]=e.split(".");if(void 0===t||void 0===n||void 0===o)return T("JWT malformed, contained fewer than 3 sections"),null;try{const e=Object(r.h)(n);return e?JSON.parse(e):(T("Failed to decode base64 JWT payload"),null)}catch(e){return T("Caught error parsing JWT payload as JSON",e),null}}async function X(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.c&&function({code:code}){return"auth/user-disabled"===code||"auth/user-token-expired"===code}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Z{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class ee{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Q(this.lastLoginAt),this.creationTime=Q(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function te(e){var t;const n=e.auth,r=await e.getIdToken(),o=await X(e,async function(e,t){return W(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));O(null==o?void 0:o.users.length,n,"internal-error");const l=o.users[0];e._notifyReloadListener(l);const h=(null===(t=l.providerUserInfo)||void 0===t?void 0:t.length)?l.providerUserInfo.map((e=>{var{providerId:t}=e,n=c(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const d=(f=e.providerData,m=h,[...f.filter((e=>!m.some((t=>t.providerId===e.providerId)))),...m]);var f,m;const y=e.isAnonymous,v=!(e.email&&l.passwordHash||(null==d?void 0:d.length)),_=!!y&&v,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new ee(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(e,w)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,"internal-error"),O(void 0!==e.idToken,"internal-error"),O(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=J(e);return O(t,"internal-error"),O(void 0!==t.exp,"internal-error"),O(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return O(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:o,expiresIn:c}=await async function(e,t){const n=await H(e,{},(async()=>{const body=Object(r.J)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:o}=e.config,c=$(e,n,"/v1/token",`key=${o}`),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(c,{method:"POST",headers:l,body:body})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,o,Number(c))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,object){const{refreshToken:t,accessToken:n,expirationTime:r}=object,o=new ne;return t&&(O("string"==typeof t,"internal-error",{appName:e}),o.refreshToken=t),n&&(O("string"==typeof n,"internal-error",{appName:e}),o.accessToken=n),r&&(O("number"==typeof r,"internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return N("not implemented")}}function re(e,t){O("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ie{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,o=c(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ee(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await X(this,this.stsTokenManager.getToken(this.auth,e));return O(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Object(r.r)(e),o=await n.getIdToken(t),c=J(o);O(c&&c.exp&&c.auth_time&&c.iat,n.auth,"internal-error");const l="object"==typeof c.firebase?c.firebase:void 0,h=null==l?void 0:l.sign_in_provider;return{claims:c,token:o,authTime:Q(Y(c.auth_time)),issuedAtTime:Q(Y(c.iat)),expirationTime:Q(Y(c.exp)),signInProvider:h||null,signInSecondFactor:(null==l?void 0:l.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Object(r.r)(e);await te(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ie(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await te(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await X(this,async function(e,t){return W(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,object){var t,n,r,o,c,l,h,d;const f=null!==(t=object.displayName)&&void 0!==t?t:void 0,m=null!==(n=object.email)&&void 0!==n?n:void 0,y=null!==(r=object.phoneNumber)&&void 0!==r?r:void 0,v=null!==(o=object.photoURL)&&void 0!==o?o:void 0,_=null!==(c=object.tenantId)&&void 0!==c?c:void 0,w=null!==(l=object._redirectEventId)&&void 0!==l?l:void 0,T=null!==(h=object.createdAt)&&void 0!==h?h:void 0,E=null!==(d=object.lastLoginAt)&&void 0!==d?d:void 0,{uid:I,emailVerified:C,isAnonymous:S,providerData:k,stsTokenManager:N}=object;O(I&&N,e,"internal-error");const A=ne.fromJSON(this.name,N);O("string"==typeof I,e,"internal-error"),re(f,e.name),re(m,e.name),O("boolean"==typeof C,e,"internal-error"),O("boolean"==typeof S,e,"internal-error"),re(y,e.name),re(v,e.name),re(_,e.name),re(w,e.name),re(T,e.name),re(E,e.name);const x=new ie({uid:I,auth:e,email:m,emailVerified:C,displayName:f,isAnonymous:S,photoURL:v,phoneNumber:y,tenantId:_,stsTokenManager:A,createdAt:T,lastLoginAt:E});return k&&Array.isArray(k)&&(x.providerData=k.map((e=>Object.assign({},e)))),w&&(x._redirectEventId=w),x}static async _fromIdTokenResponse(e,t,n=!1){const r=new ne;r.updateFromServerResponse(t);const o=new ie({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await te(o),o}}class se{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}se.type="NONE";const oe=se;function ae(e,t,n){return`firebase:${e}:${t}:${n}`}class ce{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=ae(this.userKey,r.apiKey,o),this.fullPersistenceKey=ae("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ie._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ce(D(oe),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let o=r[0]||D(oe);const c=ae(n,e.config.apiKey,e.name);let l=null;for(const n of t)try{const t=await n._get(c);if(t){const r=ie._fromJSON(e,t);n!==o&&(l=r),o=n;break}}catch(e){}const h=r.filter((p=>p._shouldAllowMigration));return o._shouldAllowMigration&&h.length?(o=h[0],l&&await o._set(c,l.toJSON()),await Promise.all(t.map((async e=>{if(e!==o)try{await e._remove(c)}catch(e){}}))),new ce(o,e,n)):new ce(o,e,n)}}function ue(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(le(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ge(t))return"Blackberry";if(me(t))return"Webos";if(he(t))return"Safari";if((t.includes("chrome/")||de(t))&&!t.includes("edge/"))return"Chrome";if(pe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function le(e=Object(r.s)()){return/firefox\//i.test(e)}function he(e=Object(r.s)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function de(e=Object(r.s)()){return/crios\//i.test(e)}function fe(e=Object(r.s)()){return/iemobile/i.test(e)}function pe(e=Object(r.s)()){return/android/i.test(e)}function ge(e=Object(r.s)()){return/blackberry/i.test(e)}function me(e=Object(r.s)()){return/webos/i.test(e)}function ye(e=Object(r.s)()){return/iphone|ipad|ipod/i.test(e)}function ve(e=Object(r.s)()){return ye(e)||pe(e)||me(e)||ge(e)||/windows phone/i.test(e)||fe(e)}function _e(e,t=[]){let n;switch(e){case"Browser":n=ue(Object(r.s)());break;case"Worker":n=`${ue(Object(r.s)())}-${e}`;break;default:n=e}const c=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${c}`}class we{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Te(this),this.idTokenSubscription=new Te(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=D(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ce.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==n?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);r&&r!==o||!(null==c?void 0:c.user)||(n=c.user)}return n?n._redirectEventId?(O(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await te(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Object(r.r)(e):null;return t&&O(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&O(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(D(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.b("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&D(e)||this._popupRedirectResolver;O(t,this,"argument-error"),this.redirectPersistenceManager=await ce.create(this,[D(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t),c=this._isInitialized?Promise.resolve():this._initializationPromise;return O(c,this,"internal-error"),c.then((()=>o(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function be(e){return Object(r.r)(e)}class Te{constructor(e){this.auth=e,this.observer=null,this.addObserver=Object(r.l)((e=>this.observer=e))}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ee(e,t,n){const r=be(e);O(r._canInitEmulator,r,"emulator-config-failed"),O(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!!(null==n?void 0:n.disableWarnings),c=Ie(t),{host:l,port:h}=function(e){const t=Ie(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const e=o[1];return{host:e,port:Ce(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ce(t)}}}(t),d=null===h?"":`:${h}`;r.config.emulator={url:`${c}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:h,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ie(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ce(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Se{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return N("not implemented")}_getIdTokenResponse(e){return N("not implemented")}_linkToIdToken(e,t){return N("not implemented")}_getReauthenticationResolver(e){return N("not implemented")}}async function ke(e,t){return W(e,"POST","/v1/accounts:resetPassword",B(e,t))}async function Oe(e,t){return W(e,"POST","/v1/accounts:update",t)}async function Ne(e,t){return W(e,"POST","/v1/accounts:sendOobCode",B(e,t))}class Ae extends Se{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ae(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ae(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return z(e,"POST","/v1/accounts:signInWithPassword",B(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return z(e,"POST","/v1/accounts:signInWithEmailLink",B(e,t))}(e,{email:this._email,oobCode:this._password});default:E(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Oe(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return z(e,"POST","/v1/accounts:signInWithEmailLink",B(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:E(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xe(e,t){return z(e,"POST","/v1/accounts:signInWithIdp",B(e,t))}class De extends Se{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new De(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):E("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=c(t,["providerId","signInMethod"]);if(!n||!r)return null;const l=new De(n,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){return xe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(r.J)(t)}return e}}const Re={USER_NOT_FOUND:"user-not-found"};class Pe extends Se{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Pe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Pe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return z(e,"POST","/v1/accounts:signInWithPhoneNumber",B(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await z(e,"POST","/v1/accounts:signInWithPhoneNumber",B(e,t));if(n.temporaryProof)throw G(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return z(e,"POST","/v1/accounts:signInWithPhoneNumber",B(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Re)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}=e;return n||t||r||o?new Pe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}):null}}class je{constructor(e){var t,n,o,c,l,h;const d=Object(r.K)(Object(r.q)(e)),f=null!==(t=d.apiKey)&&void 0!==t?t:null,code=null!==(n=d.oobCode)&&void 0!==n?n:null,m=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(o=d.mode)&&void 0!==o?o:null);O(f&&code&&m,"argument-error"),this.apiKey=f,this.operation=m,this.code=code,this.continueUrl=null!==(c=d.continueUrl)&&void 0!==c?c:null,this.languageCode=null!==(l=d.languageCode)&&void 0!==l?l:null,this.tenantId=null!==(h=d.tenantId)&&void 0!==h?h:null}static parseLink(link){const e=function(e){const link=Object(r.K)(Object(r.q)(e)).link,t=link?Object(r.K)(Object(r.q)(link)).deep_link_id:null,n=Object(r.K)(Object(r.q)(e)).deep_link_id;return(n?Object(r.K)(Object(r.q)(n)).link:null)||n||t||link||e}(link);try{return new je(e)}catch(e){return null}}}class Le{constructor(){this.providerId=Le.PROVIDER_ID}static credential(e,t){return Ae._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=je.parseLink(t);return O(n,"argument-error"),Ae._fromEmailAndCode(e,n.code,n.tenantId)}}Le.PROVIDER_ID="password",Le.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Le.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Me{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Fe extends Me{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qe extends Fe{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return O("providerId"in t&&"signInMethod"in t,"argument-error"),De._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return O(e.idToken||e.accessToken,"argument-error"),De._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return qe.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return qe.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:o,nonce:c,providerId:l}=e;if(!(n||r||t||o))return null;if(!l)return null;try{return new qe(l)._credential({idToken:t,accessToken:n,nonce:c,pendingToken:o})}catch(e){return null}}}class Ue extends Fe{constructor(){super("facebook.com")}static credential(e){return De._fromParams({providerId:Ue.PROVIDER_ID,signInMethod:Ue.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ue.credentialFromTaggedObject(e)}static credentialFromError(e){return Ue.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ue.credential(e.oauthAccessToken)}catch(e){return null}}}Ue.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ue.PROVIDER_ID="facebook.com";class Ve extends Fe{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return De._fromParams({providerId:Ve.PROVIDER_ID,signInMethod:Ve.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ve.credentialFromTaggedObject(e)}static credentialFromError(e){return Ve.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ve.credential(t,n)}catch(e){return null}}}Ve.GOOGLE_SIGN_IN_METHOD="google.com",Ve.PROVIDER_ID="google.com";class Be extends Fe{constructor(){super("github.com")}static credential(e){return De._fromParams({providerId:Be.PROVIDER_ID,signInMethod:Be.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Be.credentialFromTaggedObject(e)}static credentialFromError(e){return Be.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Be.credential(e.oauthAccessToken)}catch(e){return null}}}Be.GITHUB_SIGN_IN_METHOD="github.com",Be.PROVIDER_ID="github.com";class We extends Se{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return xe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xe(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:o}=t;return n&&r&&o&&n===r?new We(n,o):null}static _create(e,t){return new We(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class He extends Me{constructor(e){O(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return He.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return He.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=We.fromJSON(e);return O(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return We._create(n,t)}catch(e){return null}}}class ze extends Fe{constructor(){super("twitter.com")}static credential(e,t){return De._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ze.credential(t,n)}catch(e){return null}}}async function $e(e,t){return z(e,"POST","/v1/accounts:signUp",B(e,t))}ze.TWITTER_SIGN_IN_METHOD="twitter.com",ze.PROVIDER_ID="twitter.com";class Ke{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const o=await ie._fromIdTokenResponse(e,n,r),c=Ge(n);return new Ke({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ge(n);return new Ke({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ge(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function Qe(e){var t;const n=be(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ke({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await $e(n,{returnSecureToken:!0}),o=await Ke._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(o.user),o}class Ye extends r.c{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ye.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ye(e,t,n,r)}}function Je(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ye._fromErrorAndOperation(e,n,t,r);throw n}))}function Xe(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function Ze(e,t){const n=Object(r.r)(e);await tt(!0,n,t);const{providerUserInfo:o}=await async function(e,t){return W(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),c=Xe(o||[]);return n.providerData=n.providerData.filter((e=>c.has(e.providerId))),c.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function et(e,t,n=!1){const r=await X(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ke._forOperation(e,"link",r)}async function tt(e,t,n){await te(t);const code=!1===e?"provider-already-linked":"no-such-provider";O(Xe(t.providerData).has(n)===e,t.auth,code)}async function nt(e,t,n=!1){const{auth:r}=e,o="reauthenticate";try{const c=await X(e,Je(r,o,t,e),n);O(c.idToken,r,"internal-error");const l=J(c.idToken);O(l,r,"internal-error");const{sub:h}=l;return O(e.uid===h,r,"user-mismatch"),Ke._forOperation(e,o,c)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&E(r,"user-mismatch"),e}}async function it(e,t,n=!1){const r="signIn",o=await Je(e,r,t),c=await Ke._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(c.user),c}async function st(e,t){return it(be(e),t)}async function ot(e,t){const n=Object(r.r)(e);return await tt(!1,n,t.providerId),et(n,t)}async function at(e,t){return nt(Object(r.r)(e),t)}async function ct(e,t){const n=be(e),r=await async function(e,t){return z(e,"POST","/v1/accounts:signInWithCustomToken",B(e,t))}(n,{token:t,returnSecureToken:!0}),o=await Ke._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(o.user),o}class ut{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?lt._fromServerResponse(e,t):E(e,"internal-error")}}class lt extends ut{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new lt(t)}}function ht(e,t,n){var r;O((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),O(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(O(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(O(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ft(e,t,n){const o=Object(r.r)(e),c={requestType:"PASSWORD_RESET",email:t};n&&ht(o,c,n),await async function(e,t){return Ne(e,t)}(o,c)}async function pt(e,t,n){await ke(Object(r.r)(e),{oobCode:t,newPassword:n})}async function gt(e,t){await async function(e,t){return W(e,"POST","/v1/accounts:update",B(e,t))}(Object(r.r)(e),{oobCode:t})}async function mt(e,t){const n=Object(r.r)(e),o=await ke(n,{oobCode:t}),c=o.requestType;switch(O(c,n,"internal-error"),c){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":O(o.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":O(o.mfaInfo,n,"internal-error");default:O(o.email,n,"internal-error")}let l=null;return o.mfaInfo&&(l=ut._fromServerResponse(be(n),o.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===o.requestType?o.newEmail:o.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===o.requestType?o.email:o.newEmail)||null,multiFactorInfo:l},operation:c}}async function yt(e,code){const{data:data}=await mt(Object(r.r)(e),code);return data.email}async function vt(e,t,n){const r=be(e),o=await $e(r,{returnSecureToken:!0,email:t,password:n}),c=await Ke._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function _t(e,t,n){return st(Object(r.r)(e),Le.credential(t,n))}async function wt(e,t,n){const o=Object(r.r)(e),c={requestType:"EMAIL_SIGNIN",email:t};O(n.handleCodeInApp,o,"argument-error"),n&&ht(o,c,n),await async function(e,t){return Ne(e,t)}(o,c)}function bt(e,t){const n=je.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function Tt(e,t,n){const o=Object(r.r)(e),c=Le.credentialWithLink(t,n||R());return O(c._tenantId===(o.tenantId||null),o,"tenant-id-mismatch"),st(o,c)}async function Et(e,t){const n={identifier:t,continueUri:P()?R():"http://localhost"},{signinMethods:o}=await async function(e,t){return W(e,"POST","/v1/accounts:createAuthUri",B(e,t))}(Object(r.r)(e),n);return o||[]}async function It(e,t){const n=Object(r.r)(e),o={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ht(n.auth,o,t);const{email:c}=await async function(e,t){return Ne(e,t)}(n.auth,o);c!==e.email&&await e.reload()}async function Ct(e,t,n){const o=Object(r.r)(e),c={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&ht(o.auth,c,n);const{email:l}=await async function(e,t){return Ne(e,t)}(o.auth,c);l!==e.email&&await e.reload()}async function St(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const o=Object(r.r)(e),c={idToken:await o.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},l=await X(o,async function(e,t){return W(e,"POST","/v1/accounts:update",t)}(o.auth,c));o.displayName=l.displayName||null,o.photoURL=l.photoUrl||null;const h=o.providerData.find((({providerId:e})=>"password"===e));h&&(h.displayName=o.displayName,h.photoURL=o.photoURL),await o._updateTokensIfNecessary(l)}function kt(e,t){return Nt(Object(r.r)(e),t,null)}function Ot(e,t){return Nt(Object(r.r)(e),null,t)}async function Nt(e,t,n){const{auth:r}=e,o={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(o.email=t),n&&(o.password=n);const c=await X(e,Oe(r,o));await e._updateTokensIfNecessary(c,!0)}class At{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class xt extends At{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Dt extends At{constructor(e,t){super(e,"facebook.com",t)}}class Rt extends xt{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Pt extends At{constructor(e,t){super(e,"google.com",t)}}class jt extends xt{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Lt(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,o=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},c=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=J(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new At(c,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Dt(c,o);case"github.com":return new Rt(c,o);case"google.com":return new Pt(c,o);case"twitter.com":return new jt(c,o,e.screenName||null);case"custom":case"anonymous":return new At(c,null);default:return new At(c,r,o)}}(n)}class Mt{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new Mt("enroll",e)}static _fromMfaPendingCredential(e){return new Mt("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Mt._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Mt._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ft{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=be(e),r=t.customData._serverResponse,o=(r.mfaInfo||[]).map((e=>ut._fromServerResponse(n,e)));O(r.mfaPendingCredential,n,"internal-error");const c=Mt._fromMfaPendingCredential(r.mfaPendingCredential);return new Ft(c,o,(async e=>{const o=await e._process(n,c);delete r.mfaInfo,delete r.mfaPendingCredential;const l=Object.assign(Object.assign({},r),{idToken:o.idToken,refreshToken:o.refreshToken});switch(t.operationType){case"signIn":const e=await Ke._fromIdTokenResponse(n,t.operationType,l);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return O(t.user,n,"internal-error"),Ke._forOperation(t.user,t.operationType,l);default:E(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function qt(e,t){var n;const o=Object(r.r)(e),c=t;return O(t.customData.operationType,o,"argument-error"),O(null===(n=c.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,o,"argument-error"),Ft._fromError(o,c)}class Ut{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ut._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Ut(e)}async getSession(){return Mt._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,r=await this.getSession(),o=await X(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),r=await X(this.user,(o=this.user.auth,c={idToken:n,mfaEnrollmentId:t},W(o,"POST","/v2/accounts/mfaEnrollment:withdraw",B(o,c))));var o,c;this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(e){if("auth/user-token-expired"!==e.code)throw e}}}const Vt=new WeakMap;function Bt(e){const t=Object(r.r)(e);return Vt.has(t)||Vt.set(t,Ut._fromUser(t)),Vt.get(t)}const Wt="__sak";class Ht{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wt,"1"),this.storage.removeItem(Wt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class zt extends Ht{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Object(r.s)();return he(e)||ye(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ve(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const o=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},c=this.storage.getItem(n);Object(r.y)()&&10===document.documentMode&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zt.type="LOCAL";const $t=zt;class Kt extends Ht{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Kt.type="SESSION";const Gt=Kt;class Qt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Qt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:data}=t.data,o=this.handlersMap[r];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const c=Array.from(o).map((async e=>e(t.origin,data))),l=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:l})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Yt(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Qt.receivers=[];class Jt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,data,t=50){const n="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let r,o;return new Promise(((c,l)=>{const h=Yt("",20);n.port1.start();const d=setTimeout((()=>{l(new Error("unsupported_event"))}),t);o={messageChannel:n,onMessage(e){const t=e;if(t.data.eventId===h)switch(t.data.status){case"ack":clearTimeout(d),r=setTimeout((()=>{l(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),c(t.data.response);break;default:clearTimeout(d),clearTimeout(r),l(new Error("invalid_response"))}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:data},[n.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Xt(){return window}function Zt(){return void 0!==Xt().WorkerGlobalScope&&"function"==typeof Xt().importScripts}const en="firebaseLocalStorageDb",tn="firebaseLocalStorage",nn="fbase_key";class rn{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function sn(e,t){return e.transaction([tn],t?"readwrite":"readonly").objectStore(tn)}function on(){const e=indexedDB.open(en,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(tn,{keyPath:nn})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(tn)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(en);return new rn(e).toPromise()}(),t(await on()))}))}))}async function an(e,t,n){const r=sn(e,!0).put({[nn]:t,value:n});return new rn(r).toPromise()}function cn(e,t){const n=sn(e,!0).delete(t);return new rn(n).toPromise()}class un{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await on()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qt._getInstance(Zt()?self:null),this.receiver._subscribe("keyChanged",(async(e,data)=>({keyProcessed:(await this._poll()).includes(data.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Jt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await on();return await an(e,Wt,"1"),await cn(e,Wt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>an(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=sn(e,!1).get(t),data=await new rn(n).toPromise();return void 0===data?null:data.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>cn(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=sn(e,!1).getAll();return new rn(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}un.type="LOCAL";const ln=un;function hn(e){return new Promise(((t,n)=>{const r=document.createElement("script");var o,c;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=I("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(c=null===(o=document.getElementsByTagName("head"))||void 0===o?void 0:o[0])&&void 0!==c?c:document).appendChild(r)}))}function dn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const fn=1e12;class pn{constructor(e){this.auth=e,this.counter=fn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new gn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||fn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||fn;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||fn;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class gn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;O(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mn=dn("rcb"),yn=new L(3e4,6e4);class vn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Xt().grecaptcha}load(e,t=""){return O(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Xt().grecaptcha):new Promise(((n,o)=>{const c=Xt().setTimeout((()=>{o(I(e,"network-request-failed"))}),yn.get());Xt()[mn]=()=>{Xt().clearTimeout(c),delete Xt()[mn];const r=Xt().grecaptcha;if(!r)return void o(I(e,"internal-error"));const l=r.render;r.render=(e,t)=>{const n=l(e,t);return this.counter++,n},this.hostLanguage=t,n(r)};hn(`https://www.google.com/recaptcha/api.js??${Object(r.J)({onload:mn,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(c),o(I(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Xt().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class _n{async load(e){return new pn(e)}clearedOneInstance(){}}const wn="recaptcha",bn={theme:"light",type:"image"};class Tn{constructor(e,t=Object.assign({},bn),n){this.parameters=t,this.type=wn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=be(n),this.isInvisible="invisible"===this.parameters.size,O("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;O(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _n:new vn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){O(!this.parameters.sitekey,this.auth,"argument-error"),O(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),O("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=Xt()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){O(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){O(P()&&!Zt(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await W(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);O(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return O(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class En{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Pe._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function In(e,t,n){const o=be(e),c=await kn(o,t,Object(r.r)(n));return new En(c,(e=>st(o,e)))}async function Cn(e,t,n){const o=Object(r.r)(e);await tt(!1,o,"phone");const c=await kn(o.auth,t,Object(r.r)(n));return new En(c,(e=>ot(o,e)))}async function Sn(e,t,n){const o=Object(r.r)(e),c=await kn(o.auth,t,Object(r.r)(n));return new En(c,(e=>at(o,e)))}async function kn(e,t,n){var r;const o=await n.verify();try{let c;if(O("string"==typeof o,e,"argument-error"),O(n.type===wn,e,"argument-error"),c="string"==typeof t?{phoneNumber:t}:t,"session"in c){const t=c.session;if("phoneNumber"in c){O("enroll"===t.type,e,"internal-error");const n=await function(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:start",B(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:c.phoneNumber,recaptchaToken:o}});return n.phoneSessionInfo.sessionInfo}{O("signin"===t.type,e,"internal-error");const n=(null===(r=c.multiFactorHint)||void 0===r?void 0:r.uid)||c.multiFactorUid;O(n,e,"missing-multi-factor-info");const l=await function(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:start",B(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:o}});return l.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return W(e,"POST","/v1/accounts:sendVerificationCode",B(e,t))}(e,{phoneNumber:c.phoneNumber,recaptchaToken:o});return t}}finally{n._reset()}}async function On(e,t){await et(Object(r.r)(e),t)}class Nn{constructor(e){this.providerId=Nn.PROVIDER_ID,this.auth=be(e)}verifyPhoneNumber(e,t){return kn(this.auth,e,Object(r.r)(t))}static credential(e,t){return Pe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Nn.credentialFromTaggedObject(t)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Pe._fromTokenResponse(t,n):null}}function An(e,t){return t?D(t):(O(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Nn.PROVIDER_ID="phone",Nn.PHONE_SIGN_IN_METHOD="phone";class xn extends Se{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Dn(e){return it(e.auth,new xn(e),e.bypassAuthState)}function Rn(e){const{auth:t,user:n}=e;return O(n,t,"internal-error"),nt(n,new xn(e),e.bypassAuthState)}async function Pn(e){const{auth:t,user:n}=e;return O(n,t,"internal-error"),et(n,new xn(e),e.bypassAuthState)}class jn{constructor(e,filter,t,n,r=!1){this.auth=e,this.resolver=t,this.user=n,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(filter)?filter:[filter]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:c,type:l}=e;if(c)return void this.reject(c);const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(h))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dn;case"linkViaPopup":case"linkViaRedirect":return Pn;case"reauthViaPopup":case"reauthViaRedirect":return Rn;default:E(this.auth,"internal-error")}}resolve(e){A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ln=new L(2e3,1e4);async function Mn(e,t,n){const r=be(e);S(e,t,Me);const o=An(r,n);return new Un(r,"signInViaPopup",t,o).executeNotNull()}async function Fn(e,t,n){const o=Object(r.r)(e);S(o.auth,t,Me);const c=An(o.auth,n);return new Un(o.auth,"reauthViaPopup",t,c,o).executeNotNull()}async function qn(e,t,n){const o=Object(r.r)(e);S(o.auth,t,Me);const c=An(o.auth,n);return new Un(o.auth,"linkViaPopup",t,c,o).executeNotNull()}class Un extends jn{constructor(e,filter,t,n,r){super(e,filter,n,r),this.provider=t,this.authWindow=null,this.pollId=null,Un.currentPopupAction&&Un.currentPopupAction.cancel(),Un.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return O(e,this.auth,"internal-error"),e}async onExecution(){A(1===this.filter.length,"Popup operations only handle one event");const e=Yt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(I(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(I(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Un.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(I(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,Ln.get())};e()}}Un.currentPopupAction=null;const Vn=new Map;class Bn extends jn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Vn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=zn(t),r=Hn(e);if(!await r._isAvailable())return!1;const o="true"===await r._get(n);return await r._remove(n),o}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Vn.set(this.auth._key(),e)}return this.bypassAuthState||Vn.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Wn(e,t){return Hn(e)._set(zn(t),"true")}function Hn(e){return D(e._redirectPersistence)}function zn(e){return ae("pendingRedirect",e.config.apiKey,e.name)}function $n(e,t,n){return async function(e,t,n){const r=be(e);S(e,t,Me);const o=An(r,n);return await Wn(o,r),o._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Kn(e,t,n){return async function(e,t,n){const o=Object(r.r)(e);S(o.auth,t,Me);const c=An(o.auth,n);await Wn(c,o.auth);const l=await Jn(o);return c._openRedirect(o.auth,t,"reauthViaRedirect",l)}(e,t,n)}function Gn(e,t,n){return async function(e,t,n){const o=Object(r.r)(e);S(o.auth,t,Me);const c=An(o.auth,n);await tt(!1,o,t.providerId),await Wn(c,o.auth);const l=await Jn(o);return c._openRedirect(o.auth,t,"linkViaRedirect",l)}(e,t,n)}async function Qn(e,t){return await be(e)._initializationPromise,Yn(e,t,!1)}async function Yn(e,t,n=!1){const r=be(e),o=An(r,t),c=new Bn(r,o,n),l=await c.execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,t)),l}async function Jn(e){const t=Yt(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Xn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return er(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!er(e)){const code=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(I(this.auth,code))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zn(e))}saveEventToCache(e){this.cachedEventUids.add(Zn(e)),this.lastProcessedEventTime=Date.now()}}function Zn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function er({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function nr(e,t={}){return W(e,"GET","/v1/projects",t)}const rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^https?/;function sr(e){const t=R(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!ir.test(n))return!1;if(rr.test(e))return r===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const or=new L(3e4,6e4);function ar(){const e=Xt().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let i=0;i<e.CP.length;i++)e.CP[i]=null}let cr=null;function ur(e){return cr=cr||function(e){return new Promise(((t,n)=>{var r,o,c;function l(){ar(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ar(),n(I(e,"network-request-failed"))},timeout:or.get()})}if(null===(o=null===(r=Xt().gapi)||void 0===r?void 0:r.iframes)||void 0===o?void 0:o.Iframe)t(gapi.iframes.getContext());else{if(!(null===(c=Xt().gapi)||void 0===c?void 0:c.load)){const t=dn("iframefcb");return Xt()[t]=()=>{gapi.load?l():n(I(e,"network-request-failed"))},hn(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}l()}})).catch((e=>{throw cr=null,e}))}(e),cr}const lr=new L(5e3,15e3),dr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pr(e){const t=e.config;O(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?M(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,c={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},l=fr.get(e.config.apiHost);l&&(c.eid=l);const h=e._getFrameworks();return h.length&&(c.fw=h.join(",")),`${n}?${Object(r.J)(c).slice(1)}`}const gr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function yr(e,t,n,o=500,c=600){const l=Math.max((window.screen.availHeight-c)/2,0).toString(),h=Math.max((window.screen.availWidth-o)/2,0).toString();let d="";const f=Object.assign(Object.assign({},gr),{width:o.toString(),height:c.toString(),top:l,left:h}),m=Object(r.s)().toLowerCase();n&&(d=de(m)?"_blank":n),le(m)&&(t=t||"http://localhost",f.scrollbars="yes");const y=Object.entries(f).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Object(r.s)()){var t;return ye(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(m)&&"_self"!==d)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",d),new mr(null);const v=window.open(t||"",d,y);O(v,e,"popup-blocked");try{v.focus()}catch(e){}return new mr(v)}const vr="__/auth/handler",_r="emulator/auth/handler";function wr(e,t,n,c,l,h){O(e.config.authDomain,e,"auth-domain-config-required"),O(e.config.apiKey,e,"invalid-api-key");const d={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:c,v:o.SDK_VERSION,eventId:l};if(t instanceof Me){t.setDefaultLanguage(e.languageCode),d.providerId=t.providerId||"",Object(r.x)(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(h||{}))d[e]=t}if(t instanceof Fe){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(d.scopes=e.join(","))}e.tenantId&&(d.tid=e.tenantId);const f=d;for(const e of Object.keys(f))void 0===f[e]&&delete f[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${vr}`;return M(e,_r)}(e)}?${Object(r.J)(f).slice(1)}`}const Tr="webStorageSupport";const Er=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gt,this._completeRedirectFn=Yn}async _openPopup(e,t,n,r){var o;A(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");return yr(e,wr(e,t,n,R(),r),Yt())}async _openRedirect(e,t,n,r){var o;return await this._originValidation(e),o=wr(e,t,n,R(),r),Xt().location.href=o,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(A(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const iframe=await async function(e){const t=await ur(e),n=Xt().gapi;return O(n,e,"internal-error"),t.open({where:document.body,url:pr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dr,dontclear:!0},(iframe=>new Promise((async(t,n)=>{await iframe.restyle({setHideOnLeave:!1});const r=I(e,"network-request-failed"),o=Xt().setTimeout((()=>{n(r)}),lr.get());function c(){Xt().clearTimeout(o),t(iframe)}iframe.ping(c).then(c,(()=>{n(r)}))}))))}(e),t=new Xn(e);return iframe.register("authEvent",(n=>{O(null==n?void 0:n.authEvent,e,"invalid-auth-event");return{status:t.onEvent(n.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:t},this.iframes[e._key()]=iframe,t}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tr,{type:Tr},(n=>{var r;const o=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==o&&t(!!o),E(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await nr(e);for(const e of t)try{if(sr(e))return}catch(e){}E(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ve()||he()||ye()}};class Ir extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return N("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Ir(e)}_finalizeEnroll(e,t,n){return function(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:finalize",B(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:finalize",B(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Cr{constructor(){}static assertion(e){return Ir._fromCredential(e)}}Cr.FACTOR_ID="phone";var Sr,kr="@firebase/auth",Or="0.19.8";class Nr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ar(){return window}Sr="Browser",Object(o._registerComponent)(new h.a("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:o}=n.options;return(e=>{O(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),O(!(null==o?void 0:o.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:o,clientPlatform:Sr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_e(Sr)},c=new we(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(D);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Object(o._registerComponent)(new h.a("auth-internal",(e=>(e=>new Nr(e))(be(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Object(o.registerVersion)(kr,Or,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Sr)),Object(o.registerVersion)(kr,Or,"esm2017");async function xr(e,t,n){var r;const{BuildInfo:o}=Ar();A(t.sessionId,"AuthEvent did not contain a session ID");const c=await async function(e){const t=function(e){if(A(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),view=new Uint8Array(t);for(let i=0;i<e.length;i++)view[i]=e.charCodeAt(i);return view}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),l={};return ye()?l.ibi=o.packageName:pe()?l.apn=o.packageName:E(e,"operation-not-supported-in-this-environment"),o.displayName&&(l.appDisplayName=o.displayName),l.sessionId=c,wr(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,l)}function Dr(e){const{cordova:t}=Ar();return new Promise((n=>{t.plugins.browsertab.isAvailable((o=>{let c=null;o?t.plugins.browsertab.openUrl(e):c=t.InAppBrowser.open(e,function(e=Object(r.s)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(c)}))}))}class Rr extends Xn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Pr(e){const t=await Mr()._get(Fr(e));return t&&await Mr()._remove(Fr(e)),t}function jr(e,t){var n,r;const o=function(e){const t=qr(e),link=t.link?decodeURIComponent(t.link):void 0,n=qr(link).link,r=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return qr(r).link||r||n||link||e}(t);if(o.includes("/__/auth/callback")){const t=qr(o),c=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,code=null===(r=null===(n=null==c?void 0:c.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],l=code?I(code):null;return l?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:o,postBody:null}}return null}function Lr(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<20;i++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Mr(){return D($t)}function Fr(e){return ae("authEvent",e.config.apiKey,e.name)}function qr(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Object(r.K)(n.join("?"))}const Ur=class{constructor(){this._redirectPersistence=Gt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yn}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Rr(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){E(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,o,c,l,h,d,f,m;const y=Ar();O("function"==typeof(null===(t=null==y?void 0:y.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),O(void 0!==(null===(n=null==y?void 0:y.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),O("function"==typeof(null===(c=null===(o=null===(r=null==y?void 0:y.cordova)||void 0===r?void 0:r.plugins)||void 0===o?void 0:o.browsertab)||void 0===c?void 0:c.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O("function"==typeof(null===(d=null===(h=null===(l=null==y?void 0:y.cordova)||void 0===l?void 0:l.plugins)||void 0===h?void 0:h.browsertab)||void 0===d?void 0:d.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O("function"==typeof(null===(m=null===(f=null==y?void 0:y.cordova)||void 0===f?void 0:f.InAppBrowser)||void 0===m?void 0:m.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),Vn.clear(),await this._originValidation(e);const c=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Lr(),postBody:null,tenantId:e.tenantId,error:I(e,"no-auth-event")}}(e,n,r);await function(e,t){return Mr()._set(Fr(e),t)}(e,c);const l=await xr(e,c,t);return async function(e,t,n){const{cordova:r}=Ar();let o=()=>{};try{await new Promise(((c,l)=>{let h=null;function d(){var e;c();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function f(){h||(h=window.setTimeout((()=>{l(I(e,"redirect-cancelled-by-user"))}),2e3))}function m(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&f()}t.addPassiveListener(d),document.addEventListener("resume",f,!1),pe()&&document.addEventListener("visibilitychange",m,!1),o=()=>{t.removePassiveListener(d),document.removeEventListener("resume",f,!1),document.removeEventListener("visibilitychange",m,!1),h&&window.clearTimeout(h)}}))}finally{o()}}(e,o,await Dr(l))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Ar(),n={};ye()?n.iosBundleId=t.packageName:pe()?n.androidPackageName=t.packageName:E(e,"operation-not-supported-in-this-environment"),await nr(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:o}=Ar(),c=setTimeout((async()=>{await Pr(e),t.onEvent(Vr())}),500),l=async n=>{clearTimeout(c);const r=await Pr(e);let o=null;r&&(null==n?void 0:n.url)&&(o=jr(r,n.url)),t.onEvent(o||Vr())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,l);const h=r,d=`${o.packageName.toLowerCase()}://`;Ar().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(d)&&l({url:e}),"function"==typeof h)try{h(e)}catch(e){console.error(e)}}}};function Vr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:I("no-auth-event")}}function Br(e,t){be(e)._logFramework(t)}},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return l}));var r=n(0);class o{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const c="[DEFAULT]";class l{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.a;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(component){if(component.name!==this.name)throw Error(`Mismatching Component ${component.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=component,this.shouldAutoInitialize()){if(function(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService({instanceIdentifier:c})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===c?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:c:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class h{constructor(e){this.name=e,this.providers=new Map}addComponent(component){const e=this.getProvider(component.name);if(e.isComponentSet())throw new Error(`Component ${component.name} has already been registered with ${this.name}`);e.setComponent(component)}addOrOverwriteComponent(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new l(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},138:function(e,t,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,r=t.slots,o=t.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?e(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return e(!1)})):e(!1))}};e.exports=r},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return y}));const r=[];var o;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));const c={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},l=o.INFO,h={[o.DEBUG]:"log",[o.VERBOSE]:"log",[o.INFO]:"info",[o.WARN]:"warn",[o.ERROR]:"error"},d=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),o=h[t];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[o](`[${r}]  ${e.name}:`,...n)};class f{constructor(e){this.name=e,this._logLevel=l,this._logHandler=d,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in o))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?c[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,o.DEBUG,...e),this._logHandler(this,o.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,o.VERBOSE,...e),this._logHandler(this,o.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,o.INFO,...e),this._logHandler(this,o.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,o.WARN,...e),this._logHandler(this,o.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,o.ERROR,...e),this._logHandler(this,o.ERROR,...e)}}function m(e){r.forEach((t=>{t.setLogLevel(e)}))}function y(e,t){for(const n of r){let r=null;t&&t.level&&(r=c[t.level]),n.userLogHandler=null===e?null:(t,n,...c)=>{const l=c.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:l,args:c,type:t.name})}}}},142:function(e,t,n){"use strict";n(251)},186:function(e,t,n){"use strict";t.a=function(e,t){return t=t||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var c in s.open(t.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),u.push([t,n]),i[t]=i[t]?i[t]+","+n:n})),n(a())},s.onerror=r,s.withCredentials="include"==t.credentials,t.headers)s.setRequestHeader(c,t.headers[c]);s.send(t.body||null)}))}},188:function(e,t,n){"use strict";var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(e,t){return!1!==t.clone&&t.isMergeableObject(e)?m((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function l(e,source,t){return e.concat(source).map((function(element){return c(element,t)}))}function h(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(symbol){return e.propertyIsEnumerable(symbol)})):[]}(e))}function d(object,e){try{return e in object}catch(e){return!1}}function f(e,source,t){var n={};return t.isMergeableObject(e)&&h(e).forEach((function(r){n[r]=c(e[r],t)})),h(source).forEach((function(r){(function(e,t){return d(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,r)||(d(e,r)&&t.isMergeableObject(source[r])?n[r]=function(e,t){if(!t.customMerge)return m;var n=t.customMerge(e);return"function"==typeof n?n:m}(r,t)(e[r],source[r],t):n[r]=c(source[r],t))})),n}function m(e,source,t){(t=t||{}).arrayMerge=t.arrayMerge||l,t.isMergeableObject=t.isMergeableObject||r,t.cloneUnlessOtherwiseSpecified=c;var n=Array.isArray(source);return n===Array.isArray(e)?n?t.arrayMerge(e,source,t):f(e,source,t):c(source,t)}m.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return m(e,n,t)}),{})};var y=m;e.exports=y},189:function(e,t,n){"use strict";var r=n(37);n(83),n(23),n(108);function o(e){return null!==e&&"object"===Object(r.a)(e)}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3?arguments[3]:void 0;if(!o(t))return c(e,{},n,r);var l=Object.assign({},t);for(var h in e)if("__proto__"!==h&&"constructor"!==h){var d=e[h];null!==d&&(r&&r(l,h,d,n)||(Array.isArray(d)&&Array.isArray(l[h])?l[h]=l[h].concat(d):o(d)&&o(l[h])?l[h]=c(d,l[h],(n?"".concat(n,"."):"")+h.toString(),r):l[h]=d))}return l}function l(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(p,t){return c(p,t,"",e)}),{})}}var h=l();h.fn=l((function(e,t,n,r){if(void 0!==e[t]&&"function"==typeof n)return e[t]=n(e[t]),!0})),h.arrayFn=l((function(e,t,n,r){if(Array.isArray(e[t])&&"function"==typeof n)return e[t]=n(e[t]),!0})),h.extend=l,t.a=h},19:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return gr})),n.d(t,"b",(function(){return yr})),n.d(t,"c",(function(){return mr})),n.d(t,"d",(function(){return _r})),n.d(t,"e",(function(){return vr})),n.d(t,"f",(function(){return wr})),n.d(t,"g",(function(){return Tr})),n.d(t,"h",(function(){return fr})),n.d(t,"i",(function(){return pr}));var r,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},c={},l=l||{},h=o||self;function d(){}function f(a){var b=typeof a;return"array"==(b="object"!=b?b:a?Array.isArray(a)?"array":b:"null")||"object"==b&&"number"==typeof a.length}function p(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(a,b,e){return a.call.apply(a.bind,arguments)}function _(a,b,e){if(!a)throw Error();if(2<arguments.length){var t=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,t),a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function q(a,b,e){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:_).apply(null,arguments)}function w(a,b){var e=Array.prototype.slice.call(arguments,1);return function(){var t=e.slice();return t.push.apply(t,arguments),a.apply(this,t)}}function T(a,b){function e(){}e.prototype=b.prototype,a.Z=b.prototype,a.prototype=new e,a.prototype.constructor=a,a.Vb=function(e,t,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[t].apply(e,r)}}function E(){this.s=this.s,this.o=this.o}var I={};E.prototype.s=!1,E.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var a=function(a){return Object.prototype.hasOwnProperty.call(a,m)&&a[m]||(a[m]=++y)}(this);delete I[a]}},E.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const C=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(let e=0;e<a.length;e++)if(e in a&&a[e]===b)return e;return-1},S=Array.prototype.forEach?function(a,b,e){Array.prototype.forEach.call(a,b,e)}:function(a,b,e){const t=a.length,n="string"==typeof a?a.split(""):a;for(let r=0;r<t;r++)r in n&&b.call(e,n[r],r,a)};function k(a){return Array.prototype.concat.apply([],arguments)}function O(a){const b=a.length;if(0<b){const e=Array(b);for(let t=0;t<b;t++)e[t]=a[t];return e}return[]}function N(a){return/^[\s\xa0]*$/.test(a)}var A,x=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function D(a,b){return-1!=a.indexOf(b)}function R(a,b){return a<b?-1:a>b?1:0}e:{var P=h.navigator;if(P){var j=P.userAgent;if(j){A=j;break e}}A=""}function L(a,b,e){for(const t in a)b.call(e,a[t],t,a)}function M(a){const b={};for(const e in a)b[e]=a[e];return b}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(a,b){let e,t;for(let n=1;n<arguments.length;n++){for(e in t=arguments[n],t)a[e]=t[e];for(let n=0;n<F.length;n++)e=F[n],Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])}}function V(a){return V[" "](a),a}V[" "]=d;var B,a,W=D(A,"Opera"),H=D(A,"Trident")||D(A,"MSIE"),z=D(A,"Edge"),$=z||H,K=D(A,"Gecko")&&!(D(A.toLowerCase(),"webkit")&&!D(A,"Edge"))&&!(D(A,"Trident")||D(A,"MSIE"))&&!D(A,"Edge"),G=D(A.toLowerCase(),"webkit")&&!D(A,"Edge");function Q(){var a=h.document;return a?a.documentMode:void 0}e:{var Y="",J=(a=A,K?/rv:([^\);]+)(\)|;)/.exec(a):z?/Edge\/([\d\.]+)/.exec(a):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):G?/WebKit\/(\S+)/.exec(a):W?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(J&&(Y=J?J[1]:""),H){var X=Q();if(null!=X&&X>parseFloat(Y)){B=String(X);break e}}B=Y}var Z,ee={};function te(){return function(a){var b=ee;return Object.prototype.hasOwnProperty.call(b,9)?b[9]:b[9]=a(9)}((function(){let a=0;const b=x(String(B)).split("."),e=x("9").split("."),t=Math.max(b.length,e.length);for(let o=0;0==a&&o<t;o++){var n=b[o]||"",r=e[o]||"";do{if(n=/(\d*)(\D*)(.*)/.exec(n)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==n[0].length&&0==r[0].length)break;a=R(0==n[1].length?0:parseInt(n[1],10),0==r[1].length?0:parseInt(r[1],10))||R(0==n[2].length,0==r[2].length)||R(n[2],r[2]),n=n[3],r=r[3]}while(0==a)}return 0<=a}))}if(h.document&&H){var ne=Q();Z=ne||(parseInt(B,10)||void 0)}else Z=void 0;var re=Z,ie=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{h.addEventListener("test",d,b),h.removeEventListener("test",d,b)}catch(e){}return a}();function se(a,b){this.type=a,this.g=this.target=b,this.defaultPrevented=!1}function oe(a,b){if(se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var e=this.type=a.type,t=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=b,b=a.relatedTarget){if(K){e:{try{V(b.nodeName);var n=!0;break e}catch(e){}n=!1}n||(b=null)}}else"mouseover"==e?b=a.fromElement:"mouseout"==e&&(b=a.toElement);this.relatedTarget=b,t?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:ae[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&oe.Z.h.call(this)}}se.prototype.h=function(){this.defaultPrevented=!0},T(oe,se);var ae={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.Z.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),ue=0;function le(a,b,e,t,n){this.listener=a,this.proxy=null,this.src=b,this.type=e,this.capture=!!t,this.ia=n,this.key=++ue,this.ca=this.fa=!1}function he(a){a.ca=!0,a.listener=null,a.proxy=null,a.src=null,a.ia=null}function de(a){this.src=a,this.g={},this.h=0}function fe(a,b){var e=b.type;if(e in a.g){var t,n=a.g[e],r=C(n,b);(t=0<=r)&&Array.prototype.splice.call(n,r,1),t&&(he(b),0==a.g[e].length&&(delete a.g[e],a.h--))}}function pe(a,b,e,t){for(var n=0;n<a.length;++n){var r=a[n];if(!r.ca&&r.listener==b&&r.capture==!!e&&r.ia==t)return n}return-1}de.prototype.add=function(a,b,e,t,n){var r=a.toString();(a=this.g[r])||(a=this.g[r]=[],this.h++);var o=pe(a,b,t,n);return-1<o?(b=a[o],e||(b.fa=!1)):((b=new le(b,this.src,r,!!t,n)).fa=e,a.push(b)),b};var ge="closure_lm_"+(1e6*Math.random()|0),me={};function ye(a,b,e,t,n){if(t&&t.once)return _e(a,b,e,t,n);if(Array.isArray(b)){for(var r=0;r<b.length;r++)ye(a,b[r],e,t,n);return null}return e=Se(e),a&&a[ce]?a.N(b,e,p(t)?!!t.capture:!!t,n):ve(a,b,e,!1,t,n)}function ve(a,b,e,t,n,r){if(!b)throw Error("Invalid event type");var o=p(n)?!!n.capture:!!n,c=Ie(a);if(c||(a[ge]=c=new de(a)),(e=c.add(b,e,t,o,r)).proxy)return e;if(t=function(){function a(e){return b.call(a.src,a.listener,e)}var b=Ee;return a}(),e.proxy=t,t.src=a,t.listener=e,a.addEventListener)ie||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),t,n);else if(a.attachEvent)a.attachEvent(Te(b.toString()),t);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(t)}return e}function _e(a,b,e,t,n){if(Array.isArray(b)){for(var r=0;r<b.length;r++)_e(a,b[r],e,t,n);return null}return e=Se(e),a&&a[ce]?a.O(b,e,p(t)?!!t.capture:!!t,n):ve(a,b,e,!0,t,n)}function we(a,b,e,t,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)we(a,b[r],e,t,n);else t=p(t)?!!t.capture:!!t,e=Se(e),a&&a[ce]?(a=a.i,(b=String(b).toString())in a.g&&(-1<(e=pe(r=a.g[b],e,t,n))&&(he(r[e]),Array.prototype.splice.call(r,e,1),0==r.length&&(delete a.g[b],a.h--)))):a&&(a=Ie(a))&&(b=a.g[b.toString()],a=-1,b&&(a=pe(b,e,t,n)),(e=-1<a?b[a]:null)&&be(e))}function be(a){if("number"!=typeof a&&a&&!a.ca){var b=a.src;if(b&&b[ce])fe(b.i,a);else{var e=a.type,t=a.proxy;b.removeEventListener?b.removeEventListener(e,t,a.capture):b.detachEvent?b.detachEvent(Te(e),t):b.addListener&&b.removeListener&&b.removeListener(t),(e=Ie(b))?(fe(e,a),0==e.h&&(e.src=null,b[ge]=null)):he(a)}}}function Te(a){return a in me?me[a]:me[a]="on"+a}function Ee(a,b){if(a.ca)a=!0;else{b=new oe(b,this);var e=a.listener,t=a.ia||a.src;a.fa&&be(a),a=e.call(t,b)}return a}function Ie(a){return(a=a[ge])instanceof de?a:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(a){return"function"==typeof a?a:(a[Ce]||(a[Ce]=function(b){return a.handleEvent(b)}),a[Ce])}function ke(){E.call(this),this.i=new de(this),this.P=this,this.I=null}function Oe(a,b){var e,t=a.I;if(t)for(e=[];t;t=t.I)e.push(t);if(a=a.P,t=b.type||b,"string"==typeof b)b=new se(b,a);else if(b instanceof se)b.target=b.target||a;else{var n=b;U(b=new se(t,a),n)}if(n=!0,e)for(var r=e.length-1;0<=r;r--){var o=b.g=e[r];n=Ne(o,t,!0,b)&&n}if(n=Ne(o=b.g=a,t,!0,b)&&n,n=Ne(o,t,!1,b)&&n,e)for(r=0;r<e.length;r++)n=Ne(o=b.g=e[r],t,!1,b)&&n}function Ne(a,b,e,t){if(!(b=a.i.g[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.ca&&o.capture==e){var c=o.listener,u=o.ia||o.src;o.fa&&fe(a.i,o),n=!1!==c.call(u,t)&&n}}return n&&!t.defaultPrevented}T(ke,E),ke.prototype[ce]=!0,ke.prototype.removeEventListener=function(a,b,e,t){we(this,a,b,e,t)},ke.prototype.M=function(){if(ke.Z.M.call(this),this.i){var e,a=this.i;for(e in a.g){for(var t=a.g[e],n=0;n<t.length;n++)he(t[n]);delete a.g[e],a.h--}}this.I=null},ke.prototype.N=function(a,b,e,t){return this.i.add(String(a),b,!1,e,t)},ke.prototype.O=function(a,b,e,t){return this.i.add(String(a),b,!0,e,t)};var Ae=h.JSON.stringify;function xe(){var a=Fe;let b=null;return a.g&&(b=a.g,a.g=a.g.next,a.g||(a.h=null),b.next=null),b}var De,Re=new class{constructor(a,b){this.i=a,this.j=b,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}((()=>new Pe),(a=>a.reset()));class Pe{constructor(){this.next=this.g=this.h=null}set(a,b){this.h=a,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}function je(a){h.setTimeout((()=>{throw a}),0)}function Le(a,b){De||function(){var a=h.Promise.resolve(void 0);De=function(){a.then(qe)}}(),Me||(De(),Me=!0),Fe.add(a,b)}var Me=!1,Fe=new class{constructor(){this.h=this.g=null}add(a,b){const e=Re.get();e.set(a,b),this.h?this.h.next=e:this.g=e,this.h=e}};function qe(){for(var a;a=xe();){try{a.h.call(a.g)}catch(e){je(e)}var b=Re;b.j(a),100>b.h&&(b.h++,a.next=b.g,b.g=a)}Me=!1}function Ue(a,b){ke.call(this),this.h=a||1,this.g=b||h,this.j=q(this.kb,this),this.l=Date.now()}function Ve(a){a.da=!1,a.S&&(a.g.clearTimeout(a.S),a.S=null)}function Be(a,b,e){if("function"==typeof a)e&&(a=q(a,e));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=q(a.handleEvent,a)}return 2147483647<Number(b)?-1:h.setTimeout(a,b||0)}function We(a){a.g=Be((()=>{a.g=null,a.i&&(a.i=!1,We(a))}),a.j);const b=a.h;a.h=null,a.m.apply(null,b)}T(Ue,ke),(r=Ue.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-a):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Oe(this,"tick"),this.da&&(Ve(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Ue.Z.M.call(this),Ve(this),delete this.g};class He extends E{constructor(a,b){super(),this.m=a,this.j=b,this.h=null,this.i=!1,this.g=null}l(a){this.h=arguments,this.g?this.i=!0:We(this)}M(){super.M(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(a){E.call(this),this.h=a,this.g={}}T(ze,E);var $e=[];function Ke(a,b,e,t){Array.isArray(e)||(e&&($e[0]=e.toString()),e=$e);for(var n=0;n<e.length;n++){var r=ye(b,e[n],t||a.handleEvent,!1,a.h||a);if(!r)break;a.g[r.key]=r}}function Ge(a){L(a.g,(function(b,e){this.g.hasOwnProperty(e)&&be(b)}),a),a.g={}}function Qe(){this.g=!0}function Ye(a,b,e,t){a.info((function(){return"XMLHTTP TEXT ("+b+"): "+function(a,b){if(!a.g)return b;if(!b)return null;try{var e=JSON.parse(b);if(e)for(a=0;a<e.length;a++)if(Array.isArray(e[a])){var t=e[a];if(!(2>t.length)){var n=t[1];if(Array.isArray(n)&&!(1>n.length)){var r=n[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<n.length;o++)n[o]=""}}}return Ae(e)}catch(e){return b}}(a,e)+(t?" "+t:"")}))}ze.prototype.M=function(){ze.Z.M.call(this),Ge(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qe.prototype.Aa=function(){this.g=!1},Qe.prototype.info=function(){};var Je={},Xe=null;function Ze(){return Xe=Xe||new ke}function et(a){se.call(this,Je.Ma,a)}function tt(a){const b=Ze();Oe(b,new et(b,a))}function nt(a,b){se.call(this,Je.STAT_EVENT,a),this.stat=b}function it(a){const b=Ze();Oe(b,new nt(b,a))}function st(a,b){se.call(this,Je.Na,a),this.size=b}function ot(a,b){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){a()}),b)}Je.Ma="serverreachability",T(et,se),Je.STAT_EVENT="statevent",T(nt,se),Je.Na="timingevent",T(st,se);var at={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ct={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ut(){}function lt(a){return a.h||(a.h=a.i())}function ht(){}ut.prototype.h=null;var ft,pt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function gt(){se.call(this,"d")}function mt(){se.call(this,"c")}function yt(){}function vt(a,b,e,t){this.l=a,this.j=b,this.m=e,this.X=t||1,this.V=new ze(this),this.P=wt,a=$?125:void 0,this.W=new Ue(a),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}T(gt,se),T(mt,se),T(yt,ut),yt.prototype.g=function(){return new XMLHttpRequest},yt.prototype.i=function(){return{}},ft=new yt;var wt=45e3,bt={},Tt={};function Et(a,b,e){a.K=1,a.v=$t(Ut(b)),a.s=e,a.U=!0,It(a,null)}function It(a,b){a.F=Date.now(),Ot(a),a.A=Ut(a.v);var e=a.A,t=a.X;Array.isArray(t)||(t=[String(t)]),sn(e.h,"t",t),a.C=0,e=a.l.H,a.h=new _t,a.g=sr(a.l,e?b:null,!a.s),0<a.O&&(a.L=new He(q(a.Ia,a,a.g),a.O)),Ke(a.V,a.g,"readystatechange",a.gb),b=a.H?M(a.H):{},a.s?(a.u||(a.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.s,b)):(a.u="GET",a.g.ea(a.A,a.u,null,b)),tt(1),function(a,b,e,t,n,r){a.info((function(){if(a.g)if(r)for(var o="",c=r.split("&"),u=0;u<c.length;u++){var l=c[u].split("=");if(1<l.length){var h=l[0];l=l[1];var d=h.split("_");o=2<=d.length&&"type"==d[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+t+") [attempt "+n+"]: "+b+"\n"+e+"\n"+o}))}(a.j,a.u,a.A,a.m,a.X,a.s)}function Ct(a){return!!a.g&&("GET"==a.u&&2!=a.K&&a.l.Ba)}function St(a,b,e){let t,n=!0;for(;!a.I&&a.C<e.length;){if(t=kt(a,e),t==Tt){4==b&&(a.o=4,it(14),n=!1),Ye(a.j,a.m,null,"[Incomplete Response]");break}if(t==bt){a.o=4,it(15),Ye(a.j,a.m,e,"[Invalid Chunk]"),n=!1;break}Ye(a.j,a.m,t,null),Rt(a,t)}Ct(a)&&t!=Tt&&t!=bt&&(a.h.g="",a.C=0),4!=b||0!=e.length||a.h.h||(a.o=1,it(16),n=!1),a.i=a.i&&n,n?0<e.length&&!a.aa&&(a.aa=!0,(b=a.l).g==a&&b.$&&!b.L&&(b.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),Yn(b),b.L=!0,it(11))):(Ye(a.j,a.m,e,"[Invalid Chunked Response]"),Dt(a),xt(a))}function kt(a,b){var e=a.C,t=b.indexOf("\n",e);return-1==t?Tt:(e=Number(b.substring(e,t)),isNaN(e)?bt:(t+=1)+e>b.length?Tt:(b=b.substr(t,e),a.C=t+e,b))}function Ot(a){a.Y=Date.now()+a.P,Nt(a,a.P)}function Nt(a,b){if(null!=a.B)throw Error("WatchDog timer not null");a.B=ot(q(a.eb,a),b)}function At(a){a.B&&(h.clearTimeout(a.B),a.B=null)}function xt(a){0==a.l.G||a.I||Zn(a.l,a)}function Dt(a){At(a);var b=a.L;b&&"function"==typeof b.na&&b.na(),a.L=null,Ve(a.W),Ge(a.V),a.g&&(b=a.g,a.g=null,b.abort(),b.na())}function Rt(a,b){try{var e=a.l;if(0!=e.G&&(e.g==a||hn(e.i,a)))if(e.I=a.N,!a.J&&hn(e.i,a)&&3==e.G){try{var t=e.Ca.g.parse(b)}catch(e){t=null}if(Array.isArray(t)&&3==t.length){var n=t;if(0==n[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<a.F))break e;Xn(e),Vn(e)}Qn(e),it(18)}}else e.ta=n[1],0<e.ta-e.U&&37500>n[2]&&e.N&&0==e.A&&!e.v&&(e.v=ot(q(e.ab,e),6e3));if(1>=ln(e.i)&&e.ka){try{e.ka()}catch(e){}e.ka=void 0}}else nr(e,11)}else if((a.J||e.g==a)&&Xn(e),!N(b))for(n=e.Ca.g.parse(b),b=0;b<n.length;b++){let l=n[b];if(e.U=l[0],l=l[1],2==e.G)if("c"==l[0]){e.J=l[1],e.la=l[2];const n=l[3];null!=n&&(e.ma=n,e.h.info("VER="+e.ma));const h=l[4];null!=h&&(e.za=h,e.h.info("SVER="+e.za));const d=l[5];null!=d&&"number"==typeof d&&0<d&&(t=1.5*d,e.K=t,e.h.info("backChannelRequestTimeoutMs_="+t)),t=e;const f=a.g;if(f){const e=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var r=t.i;!r.g&&(D(e,"spdy")||D(e,"quic")||D(e,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(dn(r,r.h),r.h=null))}if(t.D){const e=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(t.sa=e,zt(t.F,t.D,e))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-a.F,e.h.info("Handshake RTT: "+e.O+"ms"));var o=a;if((t=e).oa=ir(t,t.H?t.la:null,t.W),o.J){fn(t.i,o);var c=o,u=t.K;u&&c.setTimeout(u),c.B&&(At(c),Ot(c)),t.g=o}else Gn(t);0<e.l.length&&Hn(e)}else"stop"!=l[0]&&"close"!=l[0]||nr(e,7);else 3==e.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nr(e,7):Un(e):"noop"!=l[0]&&e.j&&e.j.wa(l),e.A=0)}tt(4)}catch(e){}}function Pt(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(f(a)||"string"==typeof a)S(a,b,void 0);else{if(a.T&&"function"==typeof a.T)var e=a.T();else if(a.R&&"function"==typeof a.R)e=void 0;else if(f(a)||"string"==typeof a){e=[];for(var t=a.length,n=0;n<t;n++)e.push(n)}else for(n in e=[],t=0,a)e[t++]=n;t=function(a){if(a.R&&"function"==typeof a.R)return a.R();if("string"==typeof a)return a.split("");if(f(a)){for(var b=[],e=a.length,t=0;t<e;t++)b.push(a[t]);return b}for(t in b=[],e=0,a)b[e++]=a[t];return b}(a),n=t.length;for(var r=0;r<n;r++)b.call(void 0,t[r],e&&e[r],a)}}function jt(a,b){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var t=0;t<e;t+=2)this.set(arguments[t],arguments[t+1])}else if(a)if(a instanceof jt)for(e=a.T(),t=0;t<e.length;t++)this.set(e[t],a.get(e[t]));else for(t in a)this.set(t,a[t])}function Lt(a){if(a.i!=a.g.length){for(var b=0,e=0;b<a.g.length;){var t=a.g[b];Mt(a.h,t)&&(a.g[e++]=t),b++}a.g.length=e}if(a.i!=a.g.length){var n={};for(e=b=0;b<a.g.length;)Mt(n,t=a.g[b])||(a.g[e++]=t,n[t]=1),b++;a.g.length=e}}function Mt(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(r=vt.prototype).setTimeout=function(a){this.P=a},r.gb=function(a){a=a.target;const b=this.L;b&&3==jn(a)?b.l():this.Ia(a)},r.Ia=function(a){try{if(a==this.g)e:{const d=jn(this.g);var b=this.g.Da();const f=this.g.ba();if(!(3>d)&&(3!=d||$||this.g&&(this.h.h||this.g.ga()||Ln(this.g)))){this.I||4!=d||7==b||tt(8==b||0>=f?3:2),At(this);var e=this.g.ba();this.N=e;t:if(Ct(this)){var t=Ln(this.g);a="";var n=t.length,r=4==jn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Dt(this),xt(this);var o="";break t}this.h.i=new h.TextDecoder}for(b=0;b<n;b++)this.h.h=!0,a+=this.h.i.decode(t[b],{stream:r&&b==n-1});t.splice(0,n),this.h.g+=a,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==e,function(a,b,e,t,n,r,o){a.info((function(){return"XMLHTTP RESP ("+t+") [ attempt "+n+"]: "+b+"\n"+e+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.X,d,e),this.i){if(this.$&&!this.J){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(c)){var l=c;break t}}l=null}if(!(e=l)){this.i=!1,this.o=3,it(12),Dt(this),xt(this);break e}Ye(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rt(this,e)}this.U?(St(this,d,o),$&&this.i&&3==d&&(Ke(this.V,this.W,"tick",this.fb),this.W.start())):(Ye(this.j,this.m,o,null),Rt(this,o)),4==d&&Dt(this),this.i&&!this.I&&(4==d?Zn(this.l,this):(this.i=!1,Ot(this)))}else 400==e&&0<o.indexOf("Unknown SID")?(this.o=3,it(12)):(this.o=0,it(13)),Dt(this),xt(this)}}}catch(e){}},r.fb=function(){if(this.g){var a=jn(this.g),b=this.g.ga();this.C<b.length&&(At(this),St(this,a,b),this.i&&4!=a&&Ot(this))}},r.cancel=function(){this.I=!0,Dt(this)},r.eb=function(){this.B=null;const a=Date.now();0<=a-this.Y?(function(a,b){a.info((function(){return"TIMEOUT: "+b}))}(this.j,this.A),2!=this.K&&(tt(3),it(17)),Dt(this),this.o=2,xt(this)):Nt(this,this.Y-a)},(r=jt.prototype).R=function(){Lt(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.h[this.g[b]]);return a},r.T=function(){return Lt(this),this.g.concat()},r.get=function(a,b){return Mt(this.h,a)?this.h[a]:b},r.set=function(a,b){Mt(this.h,a)||(this.i++,this.g.push(a)),this.h[a]=b},r.forEach=function(a,b){for(var e=this.T(),t=0;t<e.length;t++){var n=e[t],r=this.get(n);a.call(b,r,n,this)}};var Ft=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qt(a,b){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,a instanceof qt){this.g=void 0!==b?b:a.g,Vt(this,a.j),this.s=a.s,Bt(this,a.i),Wt(this,a.m),this.l=a.l,b=a.h;var e=new tn;e.i=b.i,b.g&&(e.g=new jt(b.g),e.h=b.h),Ht(this,e),this.o=a.o}else a&&(e=String(a).match(Ft))?(this.g=!!b,Vt(this,e[1]||"",!0),this.s=Kt(e[2]||""),Bt(this,e[3]||"",!0),Wt(this,e[4]),this.l=Kt(e[5]||"",!0),Ht(this,e[6]||"",!0),this.o=Kt(e[7]||"")):(this.g=!!b,this.h=new tn(null,this.g))}function Ut(a){return new qt(a)}function Vt(a,b,e){a.j=e?Kt(b,!0):b,a.j&&(a.j=a.j.replace(/:$/,""))}function Bt(a,b,e){a.i=e?Kt(b,!0):b}function Wt(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.m=b}else a.m=null}function Ht(a,b,e){b instanceof tn?(a.h=b,function(a,b){b&&!a.j&&(nn(a),a.i=null,a.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(dd(this,t),sn(this,n,e))}),a)),a.j=b}(a.h,a.g)):(e||(b=Gt(b,Zt)),a.h=new tn(b,a.g))}function zt(a,b,e){a.h.set(b,e)}function $t(a){return zt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Kt(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gt(a,b,e){return"string"==typeof a?(a=encodeURI(a).replace(b,Qt),e&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Qt(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}qt.prototype.toString=function(){var a=[],b=this.j;b&&a.push(Gt(b,Yt,!0),":");var e=this.i;return(e||"file"==b)&&(a.push("//"),(b=this.s)&&a.push(Gt(b,Yt,!0),"@"),a.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&a.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&a.push("/"),a.push(Gt(e,"/"==e.charAt(0)?Xt:Jt,!0))),(e=this.h.toString())&&a.push("?",e),(e=this.o)&&a.push("#",Gt(e,en)),a.join("")};var Yt=/[#\/\?@]/g,Jt=/[#\?:]/g,Xt=/[#\?]/g,Zt=/[#\?@]/g,en=/#/g;function tn(a,b){this.h=this.g=null,this.i=a||null,this.j=!!b}function nn(a){a.g||(a.g=new jt,a.h=0,a.i&&function(a,b){if(a){a=a.split("&");for(var e=0;e<a.length;e++){var t=a[e].indexOf("="),n=null;if(0<=t){var r=a[e].substring(0,t);n=a[e].substring(t+1)}else r=a[e];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.i,(function(b,e){a.add(decodeURIComponent(b.replace(/\+/g," ")),e)})))}function dd(a,b){nn(a),b=on(a,b),Mt(a.g.h,b)&&(a.i=null,a.h-=a.g.get(b).length,Mt((a=a.g).h,b)&&(delete a.h[b],a.i--,a.g.length>2*a.i&&Lt(a)))}function rn(a,b){return nn(a),b=on(a,b),Mt(a.g.h,b)}function sn(a,b,e){dd(a,b),0<e.length&&(a.i=null,a.g.set(on(a,b),O(e)),a.h+=e.length)}function on(a,b){return b=String(b),a.j&&(b=b.toLowerCase()),b}(r=tn.prototype).add=function(a,b){nn(this),this.i=null,a=on(this,a);var e=this.g.get(a);return e||this.g.set(a,e=[]),e.push(b),this.h+=1,this},r.forEach=function(a,b){nn(this),this.g.forEach((function(e,t){S(e,(function(e){a.call(b,e,t,this)}),this)}),this)},r.T=function(){nn(this);for(var a=this.g.R(),b=this.g.T(),e=[],t=0;t<b.length;t++)for(var n=a[t],r=0;r<n.length;r++)e.push(b[t]);return e},r.R=function(a){nn(this);var b=[];if("string"==typeof a)rn(this,a)&&(b=k(b,this.g.get(on(this,a))));else{a=this.g.R();for(var e=0;e<a.length;e++)b=k(b,a[e])}return b},r.set=function(a,b){return nn(this),this.i=null,rn(this,a=on(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[b]),this.h+=1,this},r.get=function(a,b){return a&&0<(a=this.R(a)).length?String(a[0]):b},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var a=[],b=this.g.T(),e=0;e<b.length;e++){var t=b[e],n=encodeURIComponent(String(t));t=this.R(t);for(var r=0;r<t.length;r++){var o=n;""!==t[r]&&(o+="="+encodeURIComponent(String(t[r]))),a.push(o)}}return this.i=a.join("&")};function an(a){this.l=a||cn,h.PerformanceNavigationTiming?a=0<(a=h.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(h.g&&h.g.Ea&&h.g.Ea()&&h.g.Ea().Zb),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var cn=10;function un(a){return!!a.h||!!a.g&&a.g.size>=a.j}function ln(a){return a.h?1:a.g?a.g.size:0}function hn(a,b){return a.h?a.h==b:!!a.g&&a.g.has(b)}function dn(a,b){a.g?a.g.add(b):a.h=b}function fn(a,b){a.h&&a.h==b?a.h=null:a.g&&a.g.has(b)&&a.g.delete(b)}function pn(a){if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){let b=a.i;for(const e of a.g.values())b=b.concat(e.D);return b}return O(a.i)}function gn(){}function mn(){this.g=new gn}function yn(a,b,e){const t=e||"";try{Pt(a,(function(e,n){let r=e;p(e)&&(r=Ae(e)),b.push(t+n+"="+encodeURIComponent(r))}))}catch(e){throw b.push(t+"type="+encodeURIComponent("_badmap")),e}}function vn(a,b,e,t,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(t)}catch(e){}}function _n(a){this.l=a.$b||null,this.j=a.ib||!1}function wn(a,b){ke.call(this),this.D=a,this.u=b,this.m=void 0,this.readyState=bn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}an.prototype.cancel=function(){if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const a of this.g.values())a.cancel();this.g.clear()}},gn.prototype.stringify=function(a){return h.JSON.stringify(a,void 0)},gn.prototype.parse=function(a){return h.JSON.parse(a,void 0)},T(_n,ut),_n.prototype.g=function(){return new wn(this.l,this.j)},_n.prototype.i=function(a){return function(){return a}}({}),T(wn,ke);var bn=0;function Tn(a){a.j.read().then(a.Sa.bind(a)).catch(a.ha.bind(a))}function td(a){a.readyState=4,a.l=null,a.j=null,a.A=null,En(a)}function En(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(r=wn.prototype).open=function(a,b){if(this.readyState!=bn)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=b,this.readyState=1,En(this)},r.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(b.body=a),(this.D||h).fetch(new Request(this.B,b)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,td(this)),this.readyState=bn},r.Va=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,En(this)),this.g&&(this.readyState=3,En(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==h.ReadableStream&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tn(this)}else a.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var b=a.value?a.value:new Uint8Array(0);(b=this.A.decode(b,{stream:!a.done}))&&(this.response=this.responseText+=b)}a.done?td(this):En(this),3==this.readyState&&Tn(this)}},r.Ua=function(a){this.g&&(this.response=this.responseText=a,td(this))},r.Ta=function(a){this.g&&(this.response=a,td(this))},r.ha=function(){this.g&&td(this)},r.setRequestHeader=function(a,b){this.v.append(a,b)},r.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],b=this.h.entries();for(var e=b.next();!e.done;)e=e.value,a.push(e[0]+": "+e[1]),e=b.next();return a.join("\r\n")},Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var In=h.JSON.parse;function Cn(a){ke.call(this),this.headers=new jt,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sn,this.K=this.L=!1}T(Cn,ke);var Sn="",kn=/^https?$/i,On=["POST","PUT"];function Nn(a){return"content-type"==a.toLowerCase()}function An(a,b){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=b,a.m=5,xn(a),Rn(a)}function xn(a){a.D||(a.D=!0,Oe(a,"complete"),Oe(a,"error"))}function Dn(a){if(a.h&&void 0!==l&&(!a.C[1]||4!=jn(a)||2!=a.ba()))if(a.v&&4==jn(a))Be(a.Fa,0,a);else if(Oe(a,"readystatechange"),4==jn(a)){a.h=!1;try{const c=a.ba();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var e;if(!(e=b)){var t;if(t=0===c){var n=String(a.H).match(Ft)[1]||null;if(!n&&h.self&&h.self.location){var r=h.self.location.protocol;n=r.substr(0,r.length-1)}t=!kn.test(n?n.toLowerCase():"")}e=t}if(e)Oe(a,"complete"),Oe(a,"success");else{a.m=6;try{var o=2<jn(a)?a.g.statusText:""}catch(e){o=""}a.j=o+" ["+a.ba()+"]",xn(a)}}finally{Rn(a)}}}function Rn(a,b){if(a.g){Pn(a);const e=a.g,t=a.C[0]?d:null;a.g=null,a.C=null,b||Oe(a,"ready");try{e.onreadystatechange=t}catch(e){}}}function Pn(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(h.clearTimeout(a.A),a.A=null)}function jn(a){return a.g?a.g.readyState:0}function Ln(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case Sn:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Mn(a,b,e){e:{for(t in e){var t=!1;break e}t=!0}t||(e=function(a){let b="";return L(a,(function(e,t){b+=t,b+=":",b+=e,b+="\r\n"})),b}(e),"string"==typeof a?null!=e&&encodeURIComponent(String(e)):zt(a,b,e))}function Fn(a,b,e){return e&&e.internalChannelParams&&e.internalChannelParams[a]||b}function qn(a){this.za=0,this.l=[],this.h=new Qe,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fn("failFast",!1,a),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fn("baseRetryDelayMs",5e3,a),this.$a=Fn("retryDelaySeedMs",1e4,a),this.Ya=Fn("forwardChannelMaxRetries",2,a),this.ra=Fn("forwardChannelRequestTimeoutMs",2e4,a),this.qa=a&&a.xmlHttpFactory||void 0,this.Ba=a&&a.Yb||!1,this.K=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.J="",this.i=new an(a&&a.concurrentRequestLimit),this.Ca=new mn,this.ja=a&&a.fastHandshake||!1,this.Ra=a&&a.Wb||!1,a&&a.Aa&&this.h.Aa(),a&&a.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&a&&a.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!a||!1!==a.Xb}function Un(a){if(Bn(a),3==a.G){var b=a.V++,e=Ut(a.F);zt(e,"SID",a.J),zt(e,"RID",b),zt(e,"TYPE","terminate"),$n(a,e),(b=new vt(a,a.h,b,void 0)).K=2,b.v=$t(Ut(e)),e=!1,h.navigator&&h.navigator.sendBeacon&&(e=h.navigator.sendBeacon(b.v.toString(),"")),!e&&h.Image&&((new Image).src=b.v,e=!0),e||(b.g=sr(b.l,null),b.g.ea(b.v)),b.F=Date.now(),Ot(b)}rr(a)}function Vn(a){a.g&&(Yn(a),a.g.cancel(),a.g=null)}function Bn(a){Vn(a),a.u&&(h.clearTimeout(a.u),a.u=null),Xn(a),a.i.cancel(),a.m&&("number"==typeof a.m&&h.clearTimeout(a.m),a.m=null)}function Wn(a,b){a.l.push(new class{constructor(a,b){this.h=a,this.g=b}}(a.Za++,b)),3==a.G&&Hn(a)}function Hn(a){un(a.i)||a.m||(a.m=!0,Le(a.Ha,a),a.C=0)}function zn(a,b){var e;e=b?b.m:a.V++;const t=Ut(a.F);zt(t,"SID",a.J),zt(t,"RID",e),zt(t,"AID",a.U),$n(a,t),a.o&&a.s&&Mn(t,a.o,a.s),e=new vt(a,a.h,e,a.C+1),null===a.o&&(e.H=a.s),b&&(a.l=b.D.concat(a.l)),b=Kn(a,e,1e3),e.setTimeout(Math.round(.5*a.ra)+Math.round(.5*a.ra*Math.random())),dn(a.i,e),Et(e,t,b)}function $n(a,b){a.j&&Pt({},(function(e,t){zt(b,t,e)}))}function Kn(a,b,e){e=Math.min(a.l.length,e);var t=a.j?q(a.j.Oa,a.j,a):null;e:{var n=a.l;let r=-1;for(;;){const o=["count="+e];-1==r?0<e?(r=n[0].h,o.push("ofs="+r)):r=0:o.push("ofs="+r);let c=!0;for(let u=0;u<e;u++){let e=n[u].h;const l=n[u].g;if(e-=r,0>e)r=Math.max(0,n[u].h-100),c=!1;else try{yn(l,o,"req"+e+"_")}catch(e){t&&t(l)}}if(c){t=o.join("&");break e}}}return a=a.l.splice(0,e),b.D=a,t}function Gn(a){a.g||a.u||(a.Y=1,Le(a.Ga,a),a.A=0)}function Qn(a){return!(a.g||a.u||3<=a.A)&&(a.Y++,a.u=ot(q(a.Ga,a),er(a,a.A)),a.A++,!0)}function Yn(a){null!=a.B&&(h.clearTimeout(a.B),a.B=null)}function Jn(a){a.g=new vt(a,a.h,"rpc",a.Y),null===a.o&&(a.g.H=a.s),a.g.O=0;var b=Ut(a.oa);zt(b,"RID","rpc"),zt(b,"SID",a.J),zt(b,"CI",a.N?"0":"1"),zt(b,"AID",a.U),$n(a,b),zt(b,"TYPE","xmlhttp"),a.o&&a.s&&Mn(b,a.o,a.s),a.K&&a.g.setTimeout(a.K);var e=a.g;a=a.la,e.K=1,e.v=$t(Ut(b)),e.s=null,e.U=!0,It(e,a)}function Xn(a){null!=a.v&&(h.clearTimeout(a.v),a.v=null)}function Zn(a,b){var e=null;if(a.g==b){Xn(a),Yn(a),a.g=null;var t=2}else{if(!hn(a.i,b))return;e=b.D,fn(a.i,b),t=1}if(a.I=b.N,0!=a.G)if(b.i)if(1==t){e=b.s?b.s.length:0,b=Date.now()-b.F;var n=a.C;Oe(t=Ze(),new st(t,e,b,n)),Hn(a)}else Gn(a);else if(3==(n=b.o)||0==n&&0<a.I||!(1==t&&function(a,b){return!(ln(a.i)>=a.i.j-(a.m?1:0)||(a.m?(a.l=b.D.concat(a.l),0):1==a.G||2==a.G||a.C>=(a.Xa?0:a.Ya)||(a.m=ot(q(a.Ha,a,b),er(a,a.C)),a.C++,0)))}(a,b)||2==t&&Qn(a)))switch(e&&0<e.length&&(b=a.i,b.i=b.i.concat(e)),n){case 1:nr(a,5);break;case 4:nr(a,10);break;case 3:nr(a,6);break;default:nr(a,2)}}function er(a,b){let e=a.Pa+Math.floor(Math.random()*a.$a);return a.j||(e*=2),e*b}function nr(a,b){if(a.h.info("Error code "+b),2==b){var e=null;a.j&&(e=null);var t=q(a.jb,a);e||(e=new qt("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Vt(e,"https"),$t(e)),function(a,b){const e=new Qe;if(h.Image){const t=new Image;t.onload=w(vn,e,t,"TestLoadImage: loaded",!0,b),t.onerror=w(vn,e,t,"TestLoadImage: error",!1,b),t.onabort=w(vn,e,t,"TestLoadImage: abort",!1,b),t.ontimeout=w(vn,e,t,"TestLoadImage: timeout",!1,b),h.setTimeout((function(){t.ontimeout&&t.ontimeout()}),1e4),t.src=a}else b(!1)}(e.toString(),t)}else it(2);a.G=0,a.j&&a.j.va(b),rr(a),Bn(a)}function rr(a){a.G=0,a.I=-1,a.j&&(0==pn(a.i).length&&0==a.l.length||(a.i.i.length=0,O(a.l),a.l.length=0),a.j.ua())}function ir(a,b,e){let t=function(a){return a instanceof qt?Ut(a):new qt(a,void 0)}(e);if(""!=t.i)b&&Bt(t,b+"."+t.i),Wt(t,t.m);else{const n=h.location;t=function(a,b,e,t){var n=new qt(null,void 0);return a&&Vt(n,a),b&&Bt(n,b),e&&Wt(n,e),t&&(n.l=t),n}(n.protocol,b?b+"."+n.hostname:n.hostname,+n.port,e)}return a.aa&&L(a.aa,(function(e,n){zt(t,n,e)})),b=a.D,e=a.sa,b&&e&&zt(t,b,e),zt(t,"VER",a.ma),$n(a,t),t}function sr(a,b,e){if(b&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(b=e&&a.Ba&&!a.qa?new Cn(new _n({ib:!0})):new Cn(a.qa)).L=a.H,b}function or(){}function ar(){if(H&&!(10<=Number(re)))throw Error("Environmental error: no available transport.")}function cr(a,b){ke.call(this),this.g=new qn(b),this.l=a,this.h=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.ya&&(a?a["X-WebChannel-Client-Profile"]=b.ya:a={"X-WebChannel-Client-Profile":b.ya}),this.g.P=a,(a=b&&b.httpHeadersOverwriteParam)&&!N(a)&&(this.g.o=a),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!N(b)&&(this.g.D=b,null!==(a=this.h)&&b in a&&(b in(a=this.h)&&delete a[b])),this.j=new dr(this)}function ur(a){gt.call(this);var b=a.__sm__;if(b){e:{for(const e in b){a=e;break e}a=void 0}(this.i=a)&&(a=this.i,b=null!==b&&a in b?b[a]:void 0),this.data=b}else this.data=a}function lr(){mt.call(this),this.status=1}function dr(a){this.g=a}(r=Cn.prototype).ea=function(a,b,e,t){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);b=b?b.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ft.g(),this.C=this.u?lt(this.u):lt(ft),this.g.onreadystatechange=q(this.Fa,this);try{this.F=!0,this.g.open(b,String(a),!0),this.F=!1}catch(e){return void An(this,e)}a=e||"";const n=new jt(this.headers);t&&Pt(t,(function(e,t){n.set(t,e)})),t=function(a){e:{var b=Nn;const e=a.length,t="string"==typeof a?a.split(""):a;for(let n=0;n<e;n++)if(n in t&&b.call(void 0,t[n],n,a)){b=n;break e}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]}(n.T()),e=h.FormData&&a instanceof h.FormData,!(0<=C(On,b))||t||e||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Pn(this),0<this.B&&((this.K=function(a){return H&&te()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q(this.pa,this)):this.A=Be(this.pa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(e){An(this,e)}},r.pa=function(){void 0!==l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oe(this,"timeout"),this.abort(8))},r.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,Oe(this,"complete"),Oe(this,"abort"),Rn(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rn(this,!0)),Cn.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?Dn(this):this.cb())},r.cb=function(){Dn(this)},r.ba=function(){try{return 2<jn(this)?this.g.status:-1}catch(e){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Qa=function(a){if(this.g){var b=this.g.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),In(b)}},r.Da=function(){return this.m},r.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=qn.prototype).ma=8,r.G=1,r.hb=function(a){try{this.h.info("Origin Trials invoked: "+a)}catch(e){}},r.Ha=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.V=Math.floor(1e5*Math.random()),a=this.V++;const n=new vt(this,this.h,a,void 0);let r=this.s;if(this.P&&(r?(r=M(r),U(r,this.P)):r=this.P),null===this.o&&(n.H=r),this.ja)e:{for(var b=0,e=0;e<this.l.length;e++){var t=this.l[e];if(void 0===(t="__data__"in t.g&&"string"==typeof(t=t.g.__data__)?t.length:void 0))break;if(4096<(b+=t)){b=e;break e}if(4096===b||e===this.l.length-1){b=e+1;break e}}b=1e3}else b=1e3;b=Kn(this,n,b),zt(e=Ut(this.F),"RID",a),zt(e,"CVER",22),this.D&&zt(e,"X-HTTP-Session-Id",this.D),$n(this,e),this.o&&r&&Mn(e,this.o,r),dn(this.i,n),this.Ra&&zt(e,"TYPE","init"),this.ja?(zt(e,"$req",b),zt(e,"SID","null"),n.$=!0,Et(n,e,null)):Et(n,e,b),this.G=2}}else 3==this.G&&(a?zn(this,a):0==this.l.length||un(this.i)||zn(this))},r.Ga=function(){if(this.u=null,Jn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var a=2*this.O;this.h.info("BP detection timer enabled: "+a),this.B=ot(q(this.bb,this),a)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,it(10),Vn(this),Jn(this))},r.ab=function(){null!=this.v&&(this.v=null,Vn(this),Qn(this),it(19))},r.jb=function(a){a?(this.h.info("Successfully pinged google.com"),it(2)):(this.h.info("Failed to ping google.com"),it(1))},(r=or.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},ar.prototype.g=function(a,b){return new cr(a,b)},T(cr,ke),cr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var a=this.g,b=this.l,e=this.h||void 0;a.Wa&&(a.h.info("Origin Trials enabled."),Le(q(a.hb,a,b))),it(0),a.W=b,a.aa=e||{},a.N=a.X,a.F=ir(a,null,a.W),Hn(a)},cr.prototype.close=function(){Un(this.g)},cr.prototype.u=function(a){if("string"==typeof a){var b={};b.__data__=a,Wn(this.g,b)}else this.v?((b={}).__data__=Ae(a),Wn(this.g,b)):Wn(this.g,a)},cr.prototype.M=function(){this.g.j=null,delete this.j,Un(this.g),delete this.g,cr.Z.M.call(this)},T(ur,gt),T(lr,mt),T(dr,or),dr.prototype.xa=function(){Oe(this.g,"a")},dr.prototype.wa=function(a){Oe(this.g,new ur(a))},dr.prototype.va=function(a){Oe(this.g,new lr(a))},dr.prototype.ua=function(){Oe(this.g,"b")},ar.prototype.createWebChannel=ar.prototype.g,cr.prototype.send=cr.prototype.u,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,ct.COMPLETE="complete",ht.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",ke.prototype.listen=ke.prototype.N,Cn.prototype.listenOnce=Cn.prototype.O,Cn.prototype.getLastError=Cn.prototype.La,Cn.prototype.getLastErrorCode=Cn.prototype.Da,Cn.prototype.getStatus=Cn.prototype.ba,Cn.prototype.getResponseJson=Cn.prototype.Qa,Cn.prototype.getResponseText=Cn.prototype.ga,Cn.prototype.send=Cn.prototype.ea;var fr=c.createWebChannelTransport=function(){return new ar},pr=c.getStatEventTarget=function(){return Ze()},gr=c.ErrorCode=at,mr=c.EventType=ct,yr=c.Event=Je,vr=c.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_r=c.FetchXmlHttpFactory=_n,wr=c.WebChannel=ht,Tr=c.XhrIo=Cn}).call(this,n(30))},192:function(e,t,n){(function(e){e.installComponents=function(component,e){var n="function"==typeof component.exports?component.exports.extendOptions:component.options;for(var i in"function"==typeof component.exports&&(n.components=component.exports.options.components),n.components=n.components||{},e)n.components[i]=n.components[i]||e[i];n.functional&&function(component,e){if(component.exports[t])return;component.exports[t]=!0;var n=component.exports.render;component.exports.render=function(t,r){return n(t,Object.assign({},r,{_c:function(t,a,b){return r._c(e[t]||t,a,b)}}))}}(component,n.components)};var t="_functionalComponents"}).call(this,n(30))},2:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _u})),n.d(t,"b",(function(){return mc})),n.d(t,"c",(function(){return tc})),n.d(t,"d",(function(){return Ha})),n.d(t,"e",(function(){return Qc})),n.d(t,"f",(function(){return gc})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return vc})),n.d(t,"i",(function(){return Yc})),n.d(t,"j",(function(){return Jc})),n.d(t,"k",(function(){return z})),n.d(t,"l",(function(){return Tu})),n.d(t,"m",(function(){return Da})),n.d(t,"n",(function(){return de})),n.d(t,"o",(function(){return X})),n.d(t,"p",(function(){return qa})),n.d(t,"q",(function(){return q})),n.d(t,"r",(function(){return ee})),n.d(t,"s",(function(){return E})),n.d(t,"t",(function(){return ja})),n.d(t,"u",(function(){return Pu})),n.d(t,"v",(function(){return Hu})),n.d(t,"w",(function(){return Wu})),n.d(t,"x",(function(){return cc})),n.d(t,"y",(function(){return Ka})),n.d(t,"z",(function(){return Ga})),n.d(t,"A",(function(){return Wa})),n.d(t,"B",(function(){return Ru})),n.d(t,"C",(function(){return Vu})),n.d(t,"D",(function(){return hc})),n.d(t,"E",(function(){return Qa})),n.d(t,"F",(function(){return sc})),n.d(t,"G",(function(){return oc})),n.d(t,"H",(function(){return lc})),n.d(t,"I",(function(){return pu})),n.d(t,"J",(function(){return fu})),n.d(t,"K",(function(){return rc})),n.d(t,"L",(function(){return Mu})),n.d(t,"M",(function(){return Iu})),n.d(t,"N",(function(){return Su})),n.d(t,"O",(function(){return ku})),n.d(t,"P",(function(){return Ou})),n.d(t,"Q",(function(){return Nu})),n.d(t,"R",(function(){return Au})),n.d(t,"S",(function(){return zu})),n.d(t,"T",(function(){return cu})),n.d(t,"U",(function(){return uu})),n.d(t,"V",(function(){return dc})),n.d(t,"W",(function(){return fc})),n.d(t,"X",(function(){return ju})),n.d(t,"Y",(function(){return Lu})),n.d(t,"Z",(function(){return ou})),n.d(t,"ab",(function(){return nu})),n.d(t,"bb",(function(){return Ja})),n.d(t,"cb",(function(){return Ya})),n.d(t,"db",(function(){return Uu})),n.d(t,"eb",(function(){return Bu})),n.d(t,"fb",(function(){return xu})),n.d(t,"gb",(function(){return _})),n.d(t,"hb",(function(){return Zc})),n.d(t,"ib",(function(){return du})),n.d(t,"jb",(function(){return hu})),n.d(t,"kb",(function(){return Du})),n.d(t,"lb",(function(){return uc})),n.d(t,"mb",(function(){return iu}));var r=n(7),o=n(13),c=n(14),l=n(0),h=n(19);const d="@firebase/firestore";class f{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}f.UNAUTHENTICATED=new f(null),f.GOOGLE_CREDENTIALS=new f("google-credentials-uid"),f.FIRST_PARTY=new f("first-party-uid"),f.MOCK_USER=new f("mock-user");let m="9.6.5";const y=new c.b("@firebase/firestore");function v(){return y.logLevel}function _(e){y.setLogLevel(e)}function w(e,...t){if(y.logLevel<=c.a.DEBUG){const n=t.map(I);y.debug(`Firestore (${m}): ${e}`,...n)}}function T(e,...t){if(y.logLevel<=c.a.ERROR){const n=t.map(I);y.error(`Firestore (${m}): ${e}`,...n)}}function E(e,...t){if(y.logLevel<=c.a.WARN){const n=t.map(I);y.warn(`Firestore (${m}): ${e}`,...n)}}function I(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function C(e="Unexpected state"){const t=`FIRESTORE (${m}) INTERNAL ASSERTION FAILED: `+e;throw T(t),new Error(t)}function S(e,t){e||C()}function q(e,t){e||C()}function k(e,t){return e}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class N extends l.c{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class A{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class x{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(f.UNAUTHENTICATED)))}shutdown(){}}class R{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class P{constructor(e){this.t=e,this.currentUser=f.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const s=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new A;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new A,e.enqueueRetryable((()=>s(this.currentUser)))};const r=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await s(this.currentUser)}))},o=e=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new A)}}),0),r()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(S("string"==typeof t.accessToken),new x(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return S(null===e||"string"==typeof e),new f(e)}}class j{constructor(e,t,n){this.type="FirstParty",this.user=f.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class L{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new j(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(f.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class M{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=n=>{e.enqueueRetryable((()=>(e=>(null!=e.error&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`),t(e.token)))(n)))};const n=e=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>n(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?n(e):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(S("string"==typeof e.token),new M(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class U{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.p(e),this.T=e=>t.writeSequenceNumber(e))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function V(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}U.I=-1;class B{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=V(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<t&&(n+=e.charAt(s[i]%e.length))}return n}}function rt(e,t){return e<t?-1:e>t?1:0}function W(e,t,n){return e.length===t.length&&e.every(((e,s)=>n(e,t[s])))}function H(e){return e+"\0"}class z{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new N(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new N(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new N(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new N(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return z.fromMillis(Date.now())}static fromDate(e){return z.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new z(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ${constructor(e){this.timestamp=e}static fromTimestamp(e){return new $(e)}static min(){return new $(new z(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function K(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function G(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Q(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class dt{constructor(e,t,n){void 0===t?t=0:t>e.length&&C(),void 0===n?n=e.length-t:n>e.length-t&&C(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===dt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dt?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=e.get(s),i=t.get(s);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Y extends dt{construct(e,t,n){return new Y(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new N(O.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Y(t)}static emptyPath(){return new Y([])}}const J=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class X extends dt{construct(e,t,n){return new X(e,t,n)}static isValidIdentifier(e){return J.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),X.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new X(["__name__"])}static fromServerFormat(e){const t=[];let n="",s=0;const i=()=>{if(0===n.length)throw new N(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let r=!1;for(;s<e.length;){const t=e[s];if("\\"===t){if(s+1===e.length)throw new N(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[s+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new N(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,s+=2}else"`"===t?(r=!r,s++):"."!==t||r?(n+=t,s++):(i(),s++)}if(i(),r)throw new N(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new X(t)}static emptyPath(){return new X([])}}class Z{constructor(e){this.fields=e,e.sort(X.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return W(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}function ee(){return"undefined"!=typeof atob}class te{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new te(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new te(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}te.EMPTY_BYTE_STRING=new te("");const ne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function re(e){if(S(!!e),"string"==typeof e){let t=0;const n=ne.exec(e);if(S(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ie(e.seconds),nanos:ie(e.nanos)}}function ie(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function se(e){return"string"==typeof e?te.fromBase64String(e):te.fromUint8Array(e)}function oe(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ae(e){const t=e.mapValue.fields.__previous_value__;return oe(t)?ae(t):t}function ce(e){const t=re(e.mapValue.fields.__local_write_time__.timestampValue);return new z(t.seconds,t.nanos)}function ue(e){return null==e}function le(e){return 0===e&&1/e==-1/0}function he(e){return"number"==typeof e&&Number.isInteger(e)&&!le(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class de{constructor(e){this.path=e}static fromPath(e){return new de(Y.fromString(e))}static fromName(e){return new de(Y.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Y.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Y.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Y(e.slice()))}}function fe(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oe(e)?4:10:C()}function pe(e,t){if(e===t)return!0;const n=fe(e);if(n!==fe(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ce(e).isEqual(ce(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=re(e.timestampValue),s=re(t.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return se(e.bytesValue).isEqual(se(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ie(e.geoPointValue.latitude)===ie(t.geoPointValue.latitude)&&ie(e.geoPointValue.longitude)===ie(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ie(e.integerValue)===ie(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ie(e.doubleValue),s=ie(t.doubleValue);return n===s?le(n)===le(s):isNaN(n)&&isNaN(s)}return!1}(e,t);case 9:return W(e.arrayValue.values||[],t.arrayValue.values||[],pe);case 10:return function(e,t){const n=e.mapValue.fields||{},s=t.mapValue.fields||{};if(K(n)!==K(s))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===s[e]||!pe(n[e],s[e])))return!1;return!0}(e,t);default:return C()}}function ge(e,t){return void 0!==(e.values||[]).find((e=>pe(e,t)))}function me(e,t){if(e===t)return 0;const n=fe(e),s=fe(t);if(n!==s)return rt(n,s);switch(n){case 0:return 0;case 1:return rt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ie(e.integerValue||e.doubleValue),s=ie(t.integerValue||t.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(e,t);case 3:return ye(e.timestampValue,t.timestampValue);case 4:return ye(ce(e),ce(t));case 5:return rt(e.stringValue,t.stringValue);case 6:return function(e,t){const n=se(e),s=se(t);return n.compareTo(s)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),s=t.split("/");for(let e=0;e<n.length&&e<s.length;e++){const t=rt(n[e],s[e]);if(0!==t)return t}return rt(n.length,s.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=rt(ie(e.latitude),ie(t.latitude));return 0!==n?n:rt(ie(e.longitude),ie(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],s=t.values||[];for(let e=0;e<n.length&&e<s.length;++e){const t=me(n[e],s[e]);if(t)return t}return rt(n.length,s.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},s=Object.keys(n),i=t.fields||{},r=Object.keys(i);s.sort(),r.sort();for(let e=0;e<s.length&&e<r.length;++e){const t=rt(s[e],r[e]);if(0!==t)return t;const o=me(n[s[e]],i[r[e]]);if(0!==o)return o}return rt(s.length,r.length)}(e.mapValue,t.mapValue);default:throw C()}}function ye(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rt(e,t);const n=re(e),s=re(t),i=rt(n.seconds,s.seconds);return 0!==i?i:rt(n.nanos,s.nanos)}function ve(e){return _e(e)}function _e(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=re(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?se(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,de.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const s of e.values||[])n?n=!1:t+=",",t+=_e(s);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const i of t)s?s=!1:n+=",",n+=`${i}:${_e(e.fields[i])}`;return n+"}"}(e.mapValue):C();var t,n}function we(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function be(e){return!!e&&"integerValue"in e}function Te(e){return!!e&&"arrayValue"in e}function Ee(e){return!!e&&"nullValue"in e}function Ie(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ce(e){return!!e&&"mapValue"in e}function Se(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return G(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Se(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Se(e.arrayValue.values[n]);return t}return Object.assign({},e)}class ke{constructor(e){this.value=e}static empty(){return new ke({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ce(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Se(t)}setAll(e){let t=X.emptyPath(),n={},s=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,s),n={},s=[],t=i.popLast()}e?n[i.lastSegment()]=Se(e):s.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,s)}delete(e){const t=this.field(e.popLast());Ce(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pe(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Ce(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){G(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new ke(Se(this.value))}}function Oe(e){const t=[];return G(e.fields,((e,n)=>{const s=new X([e]);if(Ce(n)){const e=Oe(n.mapValue).fields;if(0===e.length)t.push(s);else for(const n of e)t.push(s.child(n))}else t.push(s)})),new Z(t)}class Ne{constructor(e,t,n,s,i){this.key=e,this.documentType=t,this.version=n,this.data=s,this.documentState=i}static newInvalidDocument(e){return new Ne(e,0,$.min(),ke.empty(),0)}static newFoundDocument(e,t,n){return new Ne(e,1,t,n,0)}static newNoDocument(e,t){return new Ne(e,2,t,ke.empty(),0)}static newUnknownDocument(e,t){return new Ne(e,3,t,ke.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ke.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ke.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ne&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ne(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ae{constructor(e,t=null,n=[],s=[],i=null,r=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=r,this.endAt=o,this.R=null}}function xe(e,t=null,n=[],s=[],i=null,r=null,o=null){return new Ae(e,t,n,s,i,r,o)}function De(e){const t=k(e);if(null===t.R){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>function(e){return e.field.canonicalString()+e.op.toString()+ve(e.value)}(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ue(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=ze(t.startAt)),t.endAt&&(e+="|ub:",e+=ze(t.endAt)),t.R=e}return t.R}function Re(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ke(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],s=t.filters[i],n.op!==s.op||!n.field.isEqual(s.field)||!pe(n.value,s.value))return!1;var n,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Qe(e.startAt,t.startAt)&&Qe(e.endAt,t.endAt)}function Pe(e){return de.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class je extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,n):new Le(e,t,n):"array-contains"===t?new Ue(e,n):"in"===t?new Ve(e,n):"not-in"===t?new Be(e,n):"array-contains-any"===t?new We(e,n):new je(e,t,n)}static P(e,t,n){return"in"===t?new Me(e,n):new Fe(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(me(t,this.value)):null!==t&&fe(this.value)===fe(t)&&this.v(me(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return C()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Le extends je{constructor(e,t,n){super(e,t,n),this.key=de.fromName(n.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.v(t)}}class Me extends je{constructor(e,t){super(e,"in",t),this.keys=qe("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Fe extends je{constructor(e,t){super(e,"not-in",t),this.keys=qe("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function qe(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>de.fromName(e.referenceValue)))}class Ue extends je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Te(t)&&ge(t.arrayValue,this.value)}}class Ve extends je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ge(this.value.arrayValue,t)}}class Be extends je{constructor(e,t){super(e,"not-in",t)}matches(e){if(ge(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ge(this.value.arrayValue,t)}}class We extends je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Te(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>ge(this.value.arrayValue,e)))}}class He{constructor(e,t){this.position=e,this.before=t}}function ze(e){return`${e.before?"b":"a"}:${e.position.map((e=>ve(e))).join(",")}`}class $e{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ke(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ge(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(s=r.field.isKeyField()?de.comparator(de.fromName(o.referenceValue),n.key):me(o,n.data.field(r.field)),"desc"===r.dir&&(s*=-1),0!==s)break}return e.before?s<=0:s<0}function Qe(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!pe(e.position[n],t.position[n]))return!1;return!0}class Ye{constructor(e,t=null,n=[],s=[],i=null,r="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=r,this.startAt=o,this.endAt=c,this.S=null,this.D=null,this.startAt,this.endAt}}function Je(e,t,n,s,i,r,o,c){return new Ye(e,t,n,s,i,r,o,c)}function Xe(e){return new Ye(e)}function Ze(e){return!ue(e.limit)&&"F"===e.limitType}function et(e){return!ue(e.limit)&&"L"===e.limitType}function tt(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function nt(e){for(const t of e.filters)if(t.V())return t.field;return null}function it(e){return null!==e.collectionGroup}function st(e){const t=k(e);if(null===t.S){t.S=[];const e=nt(t),n=tt(t);if(null!==e&&null===n)e.isKeyField()||t.S.push(new $e(e)),t.S.push(new $e(X.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.S.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new $e(X.keyField(),e))}}}return t.S}function ot(e){const t=k(e);if(!t.D)if("F"===t.limitType)t.D=xe(t.path,t.collectionGroup,st(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of st(t)){const t="desc"===n.dir?"asc":"desc";e.push(new $e(n.field,t))}const n=t.endAt?new He(t.endAt.position,!t.endAt.before):null,s=t.startAt?new He(t.startAt.position,!t.startAt.before):null;t.D=xe(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}return t.D}function at(e,t,n){return new Ye(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ct(e,t){return Re(ot(e),ot(t))&&e.limitType===t.limitType}function ut(e){return`${De(ot(e))}|lt:${e.limitType}`}function lt(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${ve(t.value)}`;var t})).join(", ")}]`),ue(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: "+ze(e.startAt)),e.endAt&&(t+=", endAt: "+ze(e.endAt)),`Target(${t})`}(ot(e))}; limitType=${e.limitType})`}function ht(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):de.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Ge(e.startAt,st(e),t))&&(!e.endAt||!Ge(e.endAt,st(e),t))}(e,t)}function ft(e){return(t,n)=>{let s=!1;for(const i of st(e)){const e=pt(i,t,n);if(0!==e)return e;s=s||i.field.isKeyField()}return 0}}function pt(e,t,n){const s=e.field.isKeyField()?de.comparator(t.key,n.key):function(e,t,n){const s=t.data.field(e),i=n.data.field(e);return null!==s&&null!==i?me(s,i):C()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return C()}}function gt(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:le(t)?"-0":t}}function mt(e){return{integerValue:""+e}}function yt(e,t){return he(t)?mt(t):gt(e,t)}class vt{constructor(){this._=void 0}}function _t(e,t,n){return e instanceof Tt?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Et?It(e,t):e instanceof Ct?St(e,t):function(e,t){const n=bt(e,t),s=Ot(n)+Ot(e.N);return be(n)&&be(e.N)?mt(s):gt(e.k,s)}(e,t)}function wt(e,t,n){return e instanceof Et?It(e,t):e instanceof Ct?St(e,t):n}function bt(e,t){return e instanceof kt?be(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Tt extends vt{}class Et extends vt{constructor(e){super(),this.elements=e}}function It(e,t){const n=Nt(t);for(const t of e.elements)n.some((e=>pe(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Ct extends vt{constructor(e){super(),this.elements=e}}function St(e,t){let n=Nt(t);for(const t of e.elements)n=n.filter((e=>!pe(e,t)));return{arrayValue:{values:n}}}class kt extends vt{constructor(e,t){super(),this.k=e,this.N=t}}function Ot(e){return ie(e.integerValue||e.doubleValue)}function Nt(e){return Te(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class At{constructor(e,t){this.field=e,this.transform=t}}class xt{constructor(e,t){this.version=e,this.transformResults=t}}class Dt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dt}static exists(e){return new Dt(void 0,e)}static updateTime(e){return new Dt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rt(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Pt{}function jt(e,t,n){e instanceof Ut?function(e,t,n){const s=e.value.clone(),i=Wt(e.fieldTransforms,t,n.transformResults);s.setAll(i),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):e instanceof Vt?function(e,t,n){if(!Rt(e.precondition,t))return void t.convertToUnknownDocument(n.version);const s=Wt(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bt(e)),i.setAll(s),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Lt(e,t,n){e instanceof Ut?function(e,t,n){if(!Rt(e.precondition,t))return;const s=e.value.clone(),i=Ht(e.fieldTransforms,n,t);s.setAll(i),t.convertToFoundDocument(qt(t),s).setHasLocalMutations()}(e,t,n):e instanceof Vt?function(e,t,n){if(!Rt(e.precondition,t))return;const s=Ht(e.fieldTransforms,n,t),i=t.data;i.setAll(Bt(e)),i.setAll(s),t.convertToFoundDocument(qt(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Rt(e.precondition,t)&&t.convertToNoDocument($.min())}(e,t)}function Mt(e,t){let n=null;for(const s of e.fieldTransforms){const e=t.data.field(s.field),i=bt(s.transform,e||null);null!=i&&(null==n&&(n=ke.empty()),n.set(s.field,i))}return n||null}function Ft(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&W(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Et&&t instanceof Et||e instanceof Ct&&t instanceof Ct?W(e.elements,t.elements,pe):e instanceof kt&&t instanceof kt?pe(e.N,t.N):e instanceof Tt&&t instanceof Tt}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function qt(e){return e.isFoundDocument()?e.version:$.min()}class Ut extends Pt{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}}class Vt extends Pt{constructor(e,t,n,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}}function Bt(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function Wt(e,t,n){const s=new Map;S(e.length===n.length);for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,c=t.data.field(r.field);s.set(r.field,wt(o,c,n[i]))}return s}function Ht(e,t,n){const s=new Map;for(const i of e){const e=i.transform,r=n.data.field(i.field);s.set(i.field,_t(e,r,t))}return s}class zt extends Pt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class $t extends Pt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Kt{constructor(e){this.count=e}}var Gt,Qt;function Yt(e){switch(e){default:return C();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function Jt(e){if(void 0===e)return T("GRPC error has no .code"),O.UNKNOWN;switch(e){case Gt.OK:return O.OK;case Gt.CANCELLED:return O.CANCELLED;case Gt.UNKNOWN:return O.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return O.INTERNAL;case Gt.UNAVAILABLE:return O.UNAVAILABLE;case Gt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Gt.NOT_FOUND:return O.NOT_FOUND;case Gt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Gt.ABORTED:return O.ABORTED;case Gt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Gt.DATA_LOSS:return O.DATA_LOSS;default:return C()}}(Qt=Gt||(Gt={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class Xt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new Xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zt(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zt(this.root,e,this.comparator,!0)}}class Zt{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=null!=n?n:en.RED,this.left=null!=s?s:en.EMPTY,this.right=null!=i?i:en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,i){return new en(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===i?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return en.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw C();if(this.right.isRed())throw C();const e=this.left.check();if(e!==this.right.check())throw C();return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1,en.EMPTY=new class{constructor(){this.size=0}get key(){throw C()}get value(){throw C()}get color(){throw C()}get left(){throw C()}get right(){throw C()}copy(e,t,n,s,i){return this}insert(e,t,n){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tn{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nn(this.data.getIterator())}getIteratorFrom(e){return new nn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof tn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(e,s))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class nn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const rn=new Xt(de.comparator);function sn(){return rn}const on=new Xt(de.comparator);function an(){return on}const cn=new Xt(de.comparator);function un(){return cn}const ln=new tn(de.comparator);function hn(...e){let t=ln;for(const n of e)t=t.add(n);return t}const dn=new tn(rt);function fn(){return dn}class pn{constructor(e,t,n,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,gn.createSynthesizedTargetChangeForCurrentChange(e,t)),new pn($.min(),n,fn(),sn(),hn())}}class gn{constructor(e,t,n,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new gn(te.EMPTY_BYTE_STRING,t,hn(),hn(),hn())}}class mn{constructor(e,t,n,s){this.$=e,this.removedTargetIds=t,this.key=n,this.O=s}}class yn{constructor(e,t){this.targetId=e,this.M=t}}class vn{constructor(e,t,n=te.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class _n{constructor(){this.F=0,this.L=Tn(),this.B=te.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=hn(),t=hn(),n=hn();return this.L.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:C()}})),new gn(this.B,this.U,e,t,n)}H(){this.q=!1,this.L=Tn()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class wn{constructor(e){this.et=e,this.nt=new Map,this.st=sn(),this.it=bn(),this.rt=new tn(rt)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.ct(t,e.O):this.at(t,e.key,e.O);for(const t of e.removedTargetIds)this.at(t,e.key,e.O)}ut(e){this.forEachTarget(e,(t=>{const n=this.ht(t);switch(e.state){case 0:this.lt(t)&&n.W(e.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(e.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(t);break;case 3:this.lt(t)&&(n.tt(),n.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),n.W(e.resumeToken));break;default:C()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach(((e,n)=>{this.lt(n)&&t(n)}))}dt(e){const t=e.targetId,n=e.M.count,s=this.wt(t);if(s){const e=s.target;if(Pe(e))if(0===n){const n=new de(e.path);this.at(t,n,Ne.newNoDocument(n,$.min()))}else S(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach(((n,s)=>{const i=this.wt(s);if(i){if(n.current&&Pe(i.target)){const t=new de(i.target.path);null!==this.st.get(t)||this.yt(s,t)||this.at(s,t,Ne.newNoDocument(t,e))}n.j&&(t.set(s,n.G()),n.H())}}));let n=hn();this.it.forEach(((e,t)=>{let s=!0;t.forEachWhile((e=>{const t=this.wt(e);return!t||2===t.purpose||(s=!1,!1)})),s&&(n=n.add(e))}));const s=new pn(e,t,this.rt,this.st,n);return this.st=sn(),this.it=bn(),this.rt=new tn(rt),s}ct(e,t){if(!this.lt(e))return;const n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}at(e,t,n){if(!this.lt(e))return;const s=this.ht(e);this.yt(e,t)?s.J(t,1):s.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new _n,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new tn(rt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||w("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new _n),this.et.getRemoteKeysForTarget(e).forEach((t=>{this.at(e,t,null)}))}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function bn(){return new Xt(de.comparator)}function Tn(){return new Xt(de.comparator)}const En={asc:"ASCENDING",desc:"DESCENDING"},In={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Cn{constructor(e,t){this.databaseId=e,this.C=t}}function Sn(e,t){return e.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kn(e,t){return e.C?t.toBase64():t.toUint8Array()}function On(e,t){return Sn(e,t.toTimestamp())}function Nn(e){return S(!!e),$.fromTimestamp(function(e){const t=re(e);return new z(t.seconds,t.nanos)}(e))}function An(e,t){return function(e){return new Y(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function xn(e){const t=Y.fromString(e);return S(nr(t)),t}function Dn(e,t){return An(e.databaseId,t.path)}function Rn(e,t){const n=xn(t);if(n.get(1)!==e.databaseId.projectId)throw new N(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new N(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new de(Mn(n))}function Pn(e,t){return An(e.databaseId,t)}function jn(e){const t=xn(e);return 4===t.length?Y.emptyPath():Mn(t)}function Ln(e){return new Y(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Mn(e){return S(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Fn(e,t,n){return{name:Dn(e,t),fields:n.value.mapValue.fields}}function qn(e,t,n){const s=Rn(e,t.name),i=Nn(t.updateTime),r=new ke({mapValue:{fields:t.fields}}),o=Ne.newFoundDocument(s,i,r);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Un(e,t){let n;if(t instanceof Ut)n={update:Fn(e,t.key,t.value)};else if(t instanceof zt)n={delete:Dn(e,t.key)};else if(t instanceof Vt)n={update:Fn(e,t.key,t.data),updateMask:er(t.fieldMask)};else{if(!(t instanceof $t))return C();n={verify:Dn(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Tt)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Et)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ct)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof kt)return{fieldPath:t.field.canonicalString(),increment:n.N};throw C()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:On(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:C()}(e,t.precondition)),n}function Vn(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Dt.updateTime(Nn(e.updateTime)):void 0!==e.exists?Dt.exists(e.exists):Dt.none()}(t.currentDocument):Dt.none(),s=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)S("REQUEST_TIME"===t.setToServerValue),n=new Tt;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Et(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Ct(e)}else"increment"in t?n=new kt(e,t.increment):C();const s=X.fromServerFormat(t.fieldPath);return new At(s,n)}(e,t))):[];if(t.update){t.update.name;const i=Rn(e,t.update.name),r=new ke({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Z(t.map((e=>X.fromServerFormat(e))))}(t.updateMask);return new Vt(i,r,e,n,s)}return new Ut(i,r,n,s)}if(t.delete){const s=Rn(e,t.delete);return new zt(s,n)}if(t.verify){const s=Rn(e,t.verify);return new $t(s,n)}return C()}function Bn(e,t){return{documents:[Pn(e,t.path)]}}function Wn(e,t){const n={structuredQuery:{}},s=t.path;null!==t.collectionGroup?(n.parent=Pn(e,s),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Pn(e,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Ie(e.value))return{unaryFilter:{field:Yn(e.field),op:"IS_NAN"}};if(Ee(e.value))return{unaryFilter:{field:Yn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ie(e.value))return{unaryFilter:{field:Yn(e.field),op:"IS_NOT_NAN"}};if(Ee(e.value))return{unaryFilter:{field:Yn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yn(e.field),op:Qn(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const r=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Yn(e.field),direction:Gn(e.dir)}}(e)))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(e,t){return e.C||ue(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=$n(t.startAt)),t.endAt&&(n.structuredQuery.endAt=$n(t.endAt)),n}function Hn(e){let t=jn(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){S(1===s);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let r=[];n.where&&(r=zn(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new $e(Jn(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let c=null;n.limit&&(c=function(e){let t;return t="object"==typeof e?e.value:e,ue(t)?null:t}(n.limit));let a=null;n.startAt&&(a=Kn(n.startAt));let u=null;return n.endAt&&(u=Kn(n.endAt)),Je(t,i,o,r,c,"F",a,u)}function zn(e){return e?void 0!==e.unaryFilter?[Zn(e)]:void 0!==e.fieldFilter?[Xn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>zn(e))).reduce(((e,t)=>e.concat(t))):C():[]}function $n(e){return{before:e.before,values:e.position}}function Kn(e){const t=!!e.before,n=e.values||[];return new He(n,t)}function Gn(e){return En[e]}function Qn(e){return In[e]}function Yn(e){return{fieldPath:e.canonicalString()}}function Jn(e){return X.fromServerFormat(e.fieldPath)}function Xn(e){return je.create(Jn(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return C()}}(e.fieldFilter.op),e.fieldFilter.value)}function Zn(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Jn(e.unaryFilter.field);return je.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Jn(e.unaryFilter.field);return je.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jn(e.unaryFilter.field);return je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Jn(e.unaryFilter.field);return je.create(i,"!=",{nullValue:"NULL_VALUE"});default:return C()}}function er(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function nr(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function rr(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=sr(t)),t=ir(e.get(n),t);return sr(t)}function ir(e,t){let n=t;const s=e.length;for(let t=0;t<s;t++){const s=e.charAt(t);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function sr(e){return e+""}function or(e){const t=e.length;if(S(t>=2),2===t)return S(""===e.charAt(0)&&""===e.charAt(1)),Y.emptyPath();const n=t-2,s=[];let i="";for(let r=0;r<t;){const t=e.indexOf("",r);switch((t<0||t>n)&&C(),e.charAt(t+1)){case"":const n=e.substring(r,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),s.push(o);break;case"":i+=e.substring(r,t),i+="\0";break;case"":i+=e.substring(r,t+1);break;default:C()}r=t+2}return new Y(s)}class ar{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class cr{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}cr.store="owner",cr.key="owner";class ur{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}ur.store="mutationQueues",ur.keyPath="userId";class lr{constructor(e,t,n,s,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=s,this.mutations=i}}lr.store="mutations",lr.keyPath="batchId",lr.userMutationsIndex="userMutationsIndex",lr.userMutationsKeyPath=["userId","batchId"];class dr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,rr(t)]}static key(e,t,n){return[e,rr(t),n]}}dr.store="documentMutations",dr.PLACEHOLDER=new dr;class fr{constructor(e,t){this.path=e,this.readTime=t}}class pr{constructor(e,t){this.path=e,this.version=t}}class gr{constructor(e,t,n,s,i,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=s,this.readTime=i,this.parentPath=r}}gr.store="remoteDocuments",gr.readTimeIndex="readTimeIndex",gr.readTimeIndexPath="readTime",gr.collectionReadTimeIndex="collectionReadTimeIndex",gr.collectionReadTimeIndexPath=["parentPath","readTime"];class mr{constructor(e){this.byteSize=e}}mr.store="remoteDocumentGlobal",mr.key="remoteDocumentGlobalKey";class yr{constructor(e,t,n,s,i,r,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=s,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=r,this.query=o}}yr.store="targets",yr.keyPath="targetId",yr.queryTargetsIndexName="queryTargetsIndex",yr.queryTargetsKeyPath=["canonicalId","targetId"];class vr{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}vr.store="targetDocuments",vr.keyPath=["targetId","path"],vr.documentTargetsIndex="documentTargetsIndex",vr.documentTargetsKeyPath=["path","targetId"];class _r{constructor(e,t,n,s){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=s}}_r.key="targetGlobalKey",_r.store="targetGlobal";class wr{constructor(e,t){this.collectionId=e,this.parent=t}}wr.store="collectionParents",wr.keyPath=["collectionId","parent"];class Tr{constructor(e,t,n,s){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=s}}Tr.store="clientMetadata",Tr.keyPath="clientId";class Er{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Er.store="bundles",Er.keyPath="bundleId";class Ir{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Ir.store="namedQueries",Ir.keyPath="name";const Cr=[ur.store,lr.store,dr.store,gr.store,yr.store,cr.store,_r.store,vr.store,Tr.store,mr.store,wr.store,Er.store,Ir.store],Sr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class Or{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&C(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Or(((n,s)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,s)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Or?t:Or.resolve(t)}catch(e){return Or.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Or.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Or.reject(t)}static resolve(e){return new Or(((t,n)=>{t(e)}))}static reject(e){return new Or(((t,n)=>{n(e)}))}static waitFor(e){return new Or(((t,n)=>{let s=0,i=0,r=!1;e.forEach((e=>{++s,e.next((()=>{++i,r&&i===s&&t()}),(e=>n(e)))})),r=!0,i===s&&t()}))}static or(e){let t=Or.resolve(!1);for(const n of e)t=t.next((e=>e?Or.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,s)=>{n.push(t.call(this,e,s))})),this.waitFor(n)}}class Nr{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new A,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new Dr(e,t.error)):this.It.resolve()},this.transaction.onerror=t=>{const n=Mr(t.target.error);this.It.reject(new Dr(e,n))}}static open(e,t,n,s){try{return new Nr(t,e.transaction(s,n))}catch(e){throw new Dr(t,e)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(w("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Pr(t)}}class Ar{constructor(e,t,n){this.name=e,this.version=t,this.Rt=n,12.2===Ar.bt(Object(l.s)())&&T("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return w("SimpleDb","Removing database:",e),jr(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!Object(l.z)())return!1;if(Ar.vt())return!0;const e=Object(l.s)(),t=Ar.bt(e),n=0<t&&t<10,s=Ar.Vt(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static vt(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Ct(e){return this.db||(w("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=e=>{const n=e.target.result;t(n)},s.onblocked=()=>{n(new Dr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=t=>{const s=t.target.error;"VersionError"===s.name?n(new N(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===s.name?n(new N(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Dr(e,s))},s.onupgradeneeded=e=>{w("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.Rt.Nt(t,s.transaction,e.oldVersion,this.version).next((()=>{w("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.kt&&(this.db.onversionchange=e=>this.kt(e)),this.db}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const i="readonly"===t;let r=0;for(;;){++r;try{this.db=await this.Ct(e);const t=Nr.open(this.db,e,i?"readonly":"readwrite",n),r=s(t).catch((e=>(t.abort(e),Or.reject(e)))).toPromise();return r.catch((()=>{})),await t.At,r}catch(e){const t="FirebaseError"!==e.name&&r<3;if(w("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class xr{constructor(e){this.$t=e,this.Ot=!1,this.Mt=null}get isDone(){return this.Ot}get Ft(){return this.Mt}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Mt=e}delete(){return jr(this.$t.delete())}}class Dr extends N{constructor(e,t){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Rr(e){return"IndexedDbTransactionError"===e.name}class Pr{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(w("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(w("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),jr(n)}add(e){return w("SimpleDb","ADD",this.store.name,e,e),jr(this.store.add(e))}get(e){return jr(this.store.get(e)).next((t=>(void 0===t&&(t=null),w("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return w("SimpleDb","DELETE",this.store.name,e),jr(this.store.delete(e))}count(){return w("SimpleDb","COUNT",this.store.name),jr(this.store.count())}Bt(e,t){const n=this.cursor(this.options(e,t)),s=[];return this.Ut(n,((e,t)=>{s.push(t)})).next((()=>s))}qt(e,t){w("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Kt=!1;const s=this.cursor(n);return this.Ut(s,((e,t,n)=>n.delete()))}jt(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.Ut(s,t)}Qt(e){const t=this.cursor({});return new Or(((n,s)=>{t.onerror=e=>{const t=Mr(e.target.error);s(t)},t.onsuccess=t=>{const s=t.target.result;s?e(s.primaryKey,s.value).next((e=>{e?s.continue():n()})):n()}}))}Ut(e,t){const n=[];return new Or(((s,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void s();const r=new xr(i),o=t(i.primaryKey,i.value,r);if(o instanceof Or){const e=o.catch((e=>(r.done(),Or.reject(e))));n.push(e)}r.isDone?s():null===r.Ft?i.continue():i.continue(r.Ft)}})).next((()=>Or.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jr(e){return new Or(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Mr(e.target.error);n(t)}}))}let Lr=!1;function Mr(e){const t=Ar.bt(Object(l.s)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new N("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lr||(Lr=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Fr extends kr{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function qr(e,t){const n=k(e);return Ar.Dt(n.Wt,t)}class Ur{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const s=this.mutations[t];s.key.isEqual(e.key)&&jt(s,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Lt(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Lt(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),s=n;this.applyToLocalView(s),n.isValidDocument()||s.convertToNoDocument($.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),hn())}isEqual(e){return this.batchId===e.batchId&&W(this.mutations,e.mutations,((e,t)=>Ft(e,t)))&&W(this.baseMutations,e.baseMutations,((e,t)=>Ft(e,t)))}}class Vr{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){S(e.mutations.length===n.length);let s=un();const i=e.mutations;for(let e=0;e<i.length;e++)s=s.insert(i[e].key,n[e].version);return new Vr(e,t,n,s)}}class Br{constructor(e,t,n,s,i=$.min(),r=$.min(),o=te.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Wr{constructor(e){this.Gt=e}}function Hr(e,t){if(t.document)return qn(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=de.fromSegments(t.noDocument.path),n=Gr(t.noDocument.readTime),s=Ne.newNoDocument(e,n);return t.hasCommittedMutations?s.setHasCommittedMutations():s}if(t.unknownDocument){const e=de.fromSegments(t.unknownDocument.path),n=Gr(t.unknownDocument.version);return Ne.newUnknownDocument(e,n)}return C()}function li(e,t,n){const s=zr(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:Dn(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Sn(e,t.version.toTimestamp())}}(e.Gt,t),r=t.hasCommittedMutations;return new gr(null,null,n,r,s,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=Kr(t.version),r=t.hasCommittedMutations;return new gr(null,new fr(e,n),null,r,s,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Kr(t.version);return new gr(new pr(e,n),null,null,!0,s,i)}return C()}function zr(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function $r(e){const t=new z(e[0],e[1]);return $.fromTimestamp(t)}function Kr(e){const t=e.toTimestamp();return new ar(t.seconds,t.nanoseconds)}function Gr(e){const t=new z(e.seconds,e.nanoseconds);return $.fromTimestamp(t)}function Qr(e,t){const n=(t.baseMutations||[]).map((t=>Vn(e.Gt,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const s=t.mutations[e+1];n.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const s=t.mutations.map((t=>Vn(e.Gt,t))),i=z.fromMillis(t.localWriteTimeMs);return new Ur(t.batchId,i,n,s)}function Yr(e){const t=Gr(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Gr(e.lastLimboFreeSnapshotVersion):$.min();let s;var i;return void 0!==e.query.documents?(S(1===(i=e.query).documents.length),s=ot(Xe(jn(i.documents[0])))):s=function(e){return ot(Hn(e))}(e.query),new Br(s,e.targetId,0,e.lastListenSequenceNumber,t,n,te.fromBase64String(e.resumeToken))}function Jr(e,t){const n=Kr(t.snapshotVersion),s=Kr(t.lastLimboFreeSnapshotVersion);let i;i=Pe(t.target)?Bn(e.Gt,t.target):Wn(e.Gt,t.target);const r=t.resumeToken.toBase64();return new yr(t.targetId,De(t.target),n,r,t.sequenceNumber,s,i)}function Xr(e){const t=Hn({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?at(t,t.limit,"L"):t}class Zr{getBundleMetadata(e,t){return ei(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Gr(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return ei(e).put({bundleId:(n=t).id,createTime:Kr(Nn(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return ti(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Xr(t.bundledQuery),readTime:Gr(t.readTime)};var t}))}saveNamedQuery(e,t){return ti(e).put(function(e){return{name:e.name,readTime:Kr(Nn(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function ei(e){return qr(e,Er.store)}function ti(e){return qr(e,Ir.store)}class ni{constructor(){this.zt=new ri}addToCollectionParentIndex(e,t){return this.zt.add(t),Or.resolve()}getCollectionParents(e,t){return Or.resolve(this.zt.getEntries(t))}}class ri{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new tn(Y.comparator),i=!s.has(n);return this.index[t]=s.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new tn(Y.comparator)).toArray()}}class ii{constructor(){this.Ht=new ri}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.Ht.add(t)}));const i={collectionId:n,parent:rr(s)};return si(e).put(i)}return Or.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[H(t),""],!1,!0);return si(e).Bt(s).next((e=>{for(const s of e){if(s.collectionId!==t)break;n.push(or(s.parent))}return n}))}}function si(e){return qr(e,wr.store)}const oi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ai{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ai(e,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ci(e,t,n){const s=e.store(lr.store),i=e.store(dr.store),r=[],o=IDBKeyRange.only(n.batchId);let c=0;const a=s.jt({range:o},((e,t,n)=>(c++,n.delete())));r.push(a.next((()=>{S(1===c)})));const u=[];for(const e of n.mutations){const s=dr.key(t,e.key.path,n.batchId);r.push(i.delete(s)),u.push(e.key)}return Or.waitFor(r).next((()=>u))}function ui(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw C();t=e.noDocument}return JSON.stringify(t).length}ai.DEFAULT_COLLECTION_PERCENTILE=10,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ai.DEFAULT=new ai(41943040,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ai.DISABLED=new ai(-1,0,0);class hi{constructor(e,t,n,s){this.userId=e,this.k=t,this.Jt=n,this.referenceDelegate=s,this.Yt={}}static Xt(e,t,n,s){S(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new hi(i,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).jt({index:lr.userMutationsIndex,range:n},((e,n,s)=>{t=!1,s.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const i=pi(e),r=fi(e);return r.add({}).next((o=>{S("number"==typeof o);const c=new Ur(o,t,n,s),a=function(e,t,n){const s=n.baseMutations.map((t=>Un(e.Gt,t))),i=n.mutations.map((t=>Un(e.Gt,t)));return new lr(t,n.batchId,n.localWriteTime.toMillis(),s,i)}(this.k,this.userId,c),u=[];let l=new tn(((e,t)=>rt(e.canonicalString(),t.canonicalString())));for(const e of s){const t=dr.key(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(r.put(a)),u.push(i.put(t,dr.PLACEHOLDER))}return l.forEach((t=>{u.push(this.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Yt[o]=c.keys()})),Or.waitFor(u).next((()=>c))}))}lookupMutationBatch(e,t){return fi(e).get(t).next((e=>e?(S(e.userId===this.userId),Qr(this.k,e)):null))}Zt(e,t){return this.Yt[t]?Or.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Yt[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return fi(e).jt({index:lr.userMutationsIndex,range:s},((e,t,s)=>{t.userId===this.userId&&(S(t.batchId>=n),i=Qr(this.k,t)),s.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return fi(e).jt({index:lr.userMutationsIndex,range:t,reverse:!0},((e,t,s)=>{n=t.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).Bt(lr.userMutationsIndex,t).next((e=>e.map((e=>Qr(this.k,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=dr.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(n),i=[];return pi(e).jt({range:s},((n,s,r)=>{const[o,c,a]=n,u=or(c);if(o===this.userId&&t.path.isEqual(u))return fi(e).get(a).next((e=>{if(!e)throw C();S(e.userId===this.userId),i.push(Qr(this.k,e))}));r.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new tn(rt);const s=[];return t.forEach((t=>{const i=dr.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=pi(e).jt({range:r},((e,s,i)=>{const[r,o,c]=e,a=or(o);r===this.userId&&t.path.isEqual(a)?n=n.add(c):i.done()}));s.push(o)})),Or.waitFor(s).next((()=>this.te(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,i=dr.prefixForPath(this.userId,n),r=IDBKeyRange.lowerBound(i);let o=new tn(rt);return pi(e).jt({range:r},((e,t,i)=>{const[r,c,a]=e,u=or(c);r===this.userId&&n.isPrefixOf(u)?u.length===s&&(o=o.add(a)):i.done()})).next((()=>this.te(e,o)))}te(e,t){const n=[],s=[];return t.forEach((t=>{s.push(fi(e).get(t).next((e=>{if(null===e)throw C();S(e.userId===this.userId),n.push(Qr(this.k,e))})))})),Or.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return ci(e.Wt,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ee(t.batchId)})),Or.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Or.resolve();const n=IDBKeyRange.lowerBound(dr.prefixForUser(this.userId)),s=[];return pi(e).jt({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=or(e[1]);s.push(t)}else n.done()})).next((()=>{S(0===s.length)}))}))}containsKey(e,t){return di(e,this.userId,t)}ne(e){return gi(e).get(this.userId).next((e=>e||new ur(this.userId,-1,"")))}}function di(e,t,n){const s=dr.prefixForPath(t,n.path),i=s[1],r=IDBKeyRange.lowerBound(s);let o=!1;return pi(e).jt({range:r,Kt:!0},((e,n,s)=>{const[r,c,a]=e;r===t&&c===i&&(o=!0),s.done()})).next((()=>o))}function fi(e){return qr(e,lr.store)}function pi(e){return qr(e,dr.store)}function gi(e){return qr(e,ur.store)}class mi{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new mi(0)}static re(){return new mi(-1)}}class yi{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next((t=>{const n=new mi(t.highestTargetId);return t.highestTargetId=n.next(),this.ce(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.oe(e).next((e=>$.fromTimestamp(new z(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.oe(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.oe(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.ce(e,s))))}addTargetData(e,t){return this.ae(e,t).next((()=>this.oe(e).next((n=>(n.targetCount+=1,this.ue(t,n),this.ce(e,n))))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>vi(e).delete(t.targetId))).next((()=>this.oe(e))).next((t=>(S(t.targetCount>0),t.targetCount-=1,this.ce(e,t))))}removeTargets(e,t,n){let s=0;const i=[];return vi(e).jt(((r,o)=>{const c=Yr(o);c.sequenceNumber<=t&&null===n.get(c.targetId)&&(s++,i.push(this.removeTargetData(e,c)))})).next((()=>Or.waitFor(i))).next((()=>s))}forEachTarget(e,t){return vi(e).jt(((e,n)=>{const s=Yr(n);t(s)}))}oe(e){return _i(e).get(_r.key).next((e=>(S(null!==e),e)))}ce(e,t){return _i(e).put(_r.key,t)}ae(e,t){return vi(e).put(Jr(this.k,t))}ue(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.oe(e).next((e=>e.targetCount))}getTargetData(e,t){const n=De(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return vi(e).jt({range:s,index:yr.queryTargetsIndexName},((e,n,s)=>{const r=Yr(n);Re(t,r.target)&&(i=r,s.done())})).next((()=>i))}addMatchingKeys(e,t,n){const s=[],i=wi(e);return t.forEach((t=>{const r=rr(t.path);s.push(i.put(new vr(n,r))),s.push(this.referenceDelegate.addReference(e,n,t))})),Or.waitFor(s)}removeMatchingKeys(e,t,n){const s=wi(e);return Or.forEach(t,(t=>{const i=rr(t.path);return Or.waitFor([s.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=wi(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=wi(e);let i=hn();return s.jt({range:n,Kt:!0},((e,t,n)=>{const s=or(e[1]),r=new de(s);i=i.add(r)})).next((()=>i))}containsKey(e,t){const n=rr(t.path),s=IDBKeyRange.bound([n],[H(n)],!1,!0);let i=0;return wi(e).jt({index:vr.documentTargetsIndex,Kt:!0,range:s},(([e,t],n,s)=>{0!==e&&(i++,s.done())})).next((()=>i>0))}Et(e,t){return vi(e).get(t).next((e=>e?Yr(e):null))}}function vi(e){return qr(e,yr.store)}function _i(e){return qr(e,_r.store)}function wi(e){return qr(e,vr.store)}async function bi(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==Sr)throw e;w("LocalStore","Unexpectedly lost primary lease")}function Ti([e,t],[n,s]){const i=rt(e,n);return 0===i?rt(t,s):i}class Ei{constructor(e){this.he=e,this.buffer=new tn(Ti),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ti(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ii{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){const t=this.we?3e5:6e4;w("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this._e=null,this.we=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){Rr(e)?w("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await bi(e)}await this.me(e)}))}}class Ci{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Or.resolve(U.I);const n=new Ei(t);return this.ge.forEachTarget(e,(e=>n.de(e.sequenceNumber))).next((()=>this.ge.pe(e,(e=>n.de(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.ge.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(w("LruGarbageCollector","Garbage collection skipped; disabled"),Or.resolve(oi)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(w("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oi):this.Te(e,t)))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let n,s,i,r,o,a,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(w("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),s=this.params.maximumSequenceNumbersToCollect):s=t,r=Date.now(),this.nthSequenceNumber(e,s)))).next((s=>(n=s,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(u=Date.now(),v()<=c.a.DEBUG&&w("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${r-l}ms\n\tDetermined least recently used ${s} in `+(o-r)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-l}ms`),Or.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:e}))))}}class Si{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Ci(e,t)}(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Ee(e){let t=0;return this.pe(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,((e,n)=>t(n)))}addReference(e,t,n){return ki(e,n)}removeReference(e,t,n){return ki(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return ki(e,t)}Ae(e,t){return function(e,t){let n=!1;return gi(e).Qt((s=>di(e,s,t).next((e=>(e&&(n=!0),Or.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Ie(e,((r,o)=>{if(o<=t){const t=this.Ae(e,r).next((t=>{if(!t)return i++,n.getEntry(e,r).next((()=>(n.removeEntry(r),wi(e).delete([0,rr(r.path)]))))}));s.push(t)}})).next((()=>Or.waitFor(s))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return ki(e,t)}Ie(e,t){const n=wi(e);let s,i=U.I;return n.jt({index:vr.documentTargetsIndex},(([e,n],{path:r,sequenceNumber:o})=>{0===e?(i!==U.I&&t(new de(or(s)),i),i=o,s=r):i=U.I})).next((()=>{i!==U.I&&t(new de(or(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ki(e,t){return wi(e).put(function(e,t){return new vr(0,rr(e.path),t)}(t,e.currentSequenceNumber))}class Oi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,s]of n)if(this.equalsFn(t,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0!==s){for(let n=0;n<s.length;n++)if(this.equalsFn(s[n][0],e))return void(s[n]=[e,t]);s.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return 1===n.length?delete this.inner[t]:n.splice(s,1),!0;return!1}forEach(e){G(this.inner,((t,n)=>{for(const[t,s]of n)e(t,s)}))}isEmpty(){return Q(this.inner)}}class Ni{constructor(){this.changes=new Oi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:$.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Ne.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Or.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ai{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,n){return Ri(e).put(tr(t),n)}removeEntry(e,t){const n=Ri(e),s=tr(t);return n.delete(s)}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Re(e,n))))}getEntry(e,t){return Ri(e).get(tr(t)).next((e=>this.be(t,e)))}Pe(e,t){return Ri(e).get(tr(t)).next((e=>({document:this.be(t,e),size:ui(e)})))}getEntries(e,t){let n=sn();return this.ve(e,t,((e,t)=>{const s=this.be(e,t);n=n.insert(e,s)})).next((()=>n))}Ve(e,t){let n=sn(),s=new Xt(de.comparator);return this.ve(e,t,((e,t)=>{const i=this.be(e,t);n=n.insert(e,i),s=s.insert(e,ui(t))})).next((()=>({documents:n,Se:s})))}ve(e,t,n){if(t.isEmpty())return Or.resolve();const s=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let r=i.getNext();return Ri(e).jt({range:s},((e,t,s)=>{const o=de.fromSegments(e);for(;r&&de.comparator(r,o)<0;)n(r,null),r=i.getNext();r&&r.isEqual(o)&&(n(r,t),r=i.hasNext()?i.getNext():null),r?s.Lt(r.path.toArray()):s.done()})).next((()=>{for(;r;)n(r,null),r=i.hasNext()?i.getNext():null}))}getDocumentsMatchingQuery(e,t,n){let s=sn();const i=t.path.length+1,r={};if(n.isEqual($.min())){const e=t.path.toArray();r.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),s=zr(n);r.range=IDBKeyRange.lowerBound([e,s],!0),r.index=gr.collectionReadTimeIndex}return Ri(e).jt(r,((e,n,r)=>{if(e.length!==i)return;const o=Hr(this.k,n);t.path.isPrefixOf(o.key.path)?ht(t,o)&&(s=s.insert(o.key,o)):r.done()})).next((()=>s))}newChangeBuffer(e){return new xi(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Di(e).get(mr.key).next((e=>(S(!!e),e)))}Re(e,t){return Di(e).put(mr.key,t)}be(e,t){if(t){const e=Hr(this.k,t);if(!e.isNoDocument()||!e.version.isEqual($.min()))return e}return Ne.newInvalidDocument(e)}}class xi extends Ni{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Oi((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,s=new tn(((e,t)=>rt(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,r)=>{const o=this.Ce.get(i);if(r.document.isValidDocument()){const c=li(this.De.k,r.document,this.getReadTime(i));s=s.add(i.path.popLast());const a=ui(c);n+=a-o,t.push(this.De.addEntry(e,i,c))}else if(n-=o,this.trackRemovals){const n=li(this.De.k,Ne.newNoDocument(i,$.min()),this.getReadTime(i));t.push(this.De.addEntry(e,i,n))}else t.push(this.De.removeEntry(e,i))})),s.forEach((n=>{t.push(this.De.Jt.addToCollectionParentIndex(e,n))})),t.push(this.De.updateMetadata(e,n)),Or.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next((e=>(this.Ce.set(t,e.size),e.document)))}getAllFromCache(e,t){return this.De.Ve(e,t).next((({documents:e,Se:t})=>(t.forEach(((e,t)=>{this.Ce.set(e,t)})),e)))}}function Di(e){return qr(e,mr.store)}function Ri(e){return qr(e,gr.store)}function tr(e){return e.path.toArray()}class Pi{constructor(e){this.k=e}Nt(e,t,n,s){S(n<s&&n>=0&&s<=11);const i=new Nr("createOrUpgrade",t);n<1&&s>=1&&(function(e){e.createObjectStore(cr.store)}(e),function(e){e.createObjectStore(ur.store,{keyPath:ur.keyPath}),e.createObjectStore(lr.store,{keyPath:lr.keyPath,autoIncrement:!0}).createIndex(lr.userMutationsIndex,lr.userMutationsKeyPath,{unique:!0}),e.createObjectStore(dr.store)}(e),ji(e),function(e){e.createObjectStore(gr.store)}(e));let r=Or.resolve();return n<3&&s>=3&&(0!==n&&(function(e){e.deleteObjectStore(vr.store),e.deleteObjectStore(yr.store),e.deleteObjectStore(_r.store)}(e),ji(e)),r=r.next((()=>function(e){const t=e.store(_r.store),n=new _r(0,0,$.min().toTimestamp(),0);return t.put(_r.key,n)}(i)))),n<4&&s>=4&&(0!==n&&(r=r.next((()=>function(e,t){return t.store(lr.store).Bt().next((n=>{e.deleteObjectStore(lr.store),e.createObjectStore(lr.store,{keyPath:lr.keyPath,autoIncrement:!0}).createIndex(lr.userMutationsIndex,lr.userMutationsKeyPath,{unique:!0});const s=t.store(lr.store),i=n.map((e=>s.put(e)));return Or.waitFor(i)}))}(e,i)))),r=r.next((()=>{!function(e){e.createObjectStore(Tr.store,{keyPath:Tr.keyPath})}(e)}))),n<5&&s>=5&&(r=r.next((()=>this.Ne(i)))),n<6&&s>=6&&(r=r.next((()=>(function(e){e.createObjectStore(mr.store)}(e),this.ke(i))))),n<7&&s>=7&&(r=r.next((()=>this.xe(i)))),n<8&&s>=8&&(r=r.next((()=>this.$e(e,i)))),n<9&&s>=9&&(r=r.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(gr.store);t.createIndex(gr.readTimeIndex,gr.readTimeIndexPath,{unique:!1}),t.createIndex(gr.collectionReadTimeIndex,gr.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&s>=10&&(r=r.next((()=>this.Oe(i)))),n<11&&s>=11&&(r=r.next((()=>{!function(e){e.createObjectStore(Er.store,{keyPath:Er.keyPath})}(e),function(e){e.createObjectStore(Ir.store,{keyPath:Ir.keyPath})}(e)}))),r}ke(e){let t=0;return e.store(gr.store).jt(((e,n)=>{t+=ui(n)})).next((()=>{const n=new mr(t);return e.store(mr.store).put(mr.key,n)}))}Ne(e){const t=e.store(ur.store),n=e.store(lr.store);return t.Bt().next((t=>Or.forEach(t,(t=>{const s=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Bt(lr.userMutationsIndex,s).next((n=>Or.forEach(n,(n=>{S(n.userId===t.userId);const s=Qr(this.k,n);return ci(e,t.userId,s).next((()=>{}))}))))}))))}xe(e){const t=e.store(vr.store),n=e.store(gr.store);return e.store(_r.store).get(_r.key).next((e=>{const s=[];return n.jt(((n,i)=>{const r=new Y(n),o=function(e){return[0,rr(e)]}(r);s.push(t.get(o).next((n=>n?Or.resolve():(n=>t.put(new vr(0,rr(n),e.highestListenSequenceNumber)))(r))))})).next((()=>Or.waitFor(s)))}))}$e(e,t){e.createObjectStore(wr.store,{keyPath:wr.keyPath});const n=t.store(wr.store),s=new ri,i=e=>{if(s.add(e)){const t=e.lastSegment(),s=e.popLast();return n.put({collectionId:t,parent:rr(s)})}};return t.store(gr.store).jt({Kt:!0},((e,t)=>{const n=new Y(e);return i(n.popLast())})).next((()=>t.store(dr.store).jt({Kt:!0},(([e,t,n],s)=>{const r=or(t);return i(r.popLast())}))))}Oe(e){const t=e.store(yr.store);return t.jt(((e,n)=>{const s=Yr(n),i=Jr(this.k,s);return t.put(i)}))}}function ji(e){e.createObjectStore(vr.store,{keyPath:vr.keyPath}).createIndex(vr.documentTargetsIndex,vr.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(yr.store,{keyPath:yr.keyPath}).createIndex(yr.queryTargetsIndexName,yr.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(_r.store)}const Li="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Mi{constructor(e,t,n,s,i,r,o,c,a,u){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Me=i,this.window=r,this.document=o,this.Fe=a,this.Le=u,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=e=>Promise.resolve(),!Mi.Pt())throw new N(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Si(this,s),this.Ge=t+"main",this.k=new Wr(c),this.ze=new Ar(this.Ge,11,new Pi(this.k)),this.He=new yi(this.referenceDelegate,this.k),this.Jt=new ii,this.Je=function(e,t){return new Ai(e,t)}(this.k,this.Jt),this.Ye=new Zr,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===u&&T("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new N(O.FAILED_PRECONDITION,Li);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.He.getHighestSequenceNumber(e)))})).then((e=>{this.Be=new U(e,this.Fe)})).then((()=>{this.Ue=!0})).catch((e=>(this.ze&&this.ze.close(),Promise.reject(e))))}sn(e){return this.We=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget((async()=>{this.started&&await this.Ze()})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>qi(e).put(new Tr(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next((()=>{if(this.isPrimary)return this.rn(e).next((e=>{e||(this.isPrimary=!1,this.Me.enqueueRetryable((()=>this.We(!1))))}))})).next((()=>this.on(e))).next((t=>this.isPrimary&&!t?this.cn(e).next((()=>!1)):!!t&&this.an(e).next((()=>!0)))))).catch((e=>{if(Rr(e))return w("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return w("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Me.enqueueRetryable((()=>this.We(e))),this.isPrimary=e}))}rn(e){return Fi(e).get(cr.key).next((e=>Or.resolve(this.un(e))))}hn(e){return qi(e).delete(this.clientId)}async ln(){if(this.isPrimary&&!this.fn(this.Qe,18e5)){this.Qe=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=qr(e,Tr.store);return t.Bt().next((e=>{const n=this.dn(e,18e5),s=e.filter((e=>-1===n.indexOf(e)));return Or.forEach(s,(e=>t.delete(e.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Xe)for(const t of e)this.Xe.removeItem(this.wn(t.clientId))}}nn(){this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ze().then((()=>this.ln())).then((()=>this.nn()))))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Or.resolve(!0):Fi(e).get(cr.key).next((t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new N(O.FAILED_PRECONDITION,Li);return!1}}return!(!this.networkEnabled||!this.inForeground)||qi(e).Bt().next((e=>void 0===this.dn(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,s=this.networkEnabled===e.networkEnabled;if(t||n&&s)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&w("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),await this.ze.runTransaction("shutdown","readwrite",[cr.store,Tr.store],(e=>{const t=new Fr(e,U.I);return this.cn(t).next((()=>this.hn(t)))})),this.ze.close(),this.pn()}dn(e,t){return e.filter((e=>this.fn(e.updateTimeMs,t)&&!this._n(e.clientId)))}Tn(){return this.runTransaction("getActiveClients","readonly",(e=>qi(e).Bt().next((e=>this.dn(e,18e5).map((e=>e.clientId))))))}get started(){return this.Ue}getMutationQueue(e){return hi.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,n){w("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite";let i;return this.ze.runTransaction(e,s,Cr,(s=>(i=new Fr(s,this.Be?this.Be.next():U.I),"readwrite-primary"===t?this.rn(i).next((e=>!!e||this.on(i))).next((t=>{if(!t)throw T(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Me.enqueueRetryable((()=>this.We(!1))),new N(O.FAILED_PRECONDITION,Sr);return n(i)})).next((e=>this.an(i).next((()=>e)))):this.En(i).next((()=>n(i)))))).then((e=>(i.raiseOnCommittedEvent(),e)))}En(e){return Fi(e).get(cr.key).next((e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)&&!this.un(e)&&!(this.Le||this.allowTabSynchronization&&e.allowTabSynchronization))throw new N(O.FAILED_PRECONDITION,Li)}))}an(e){const t=new cr(this.clientId,this.allowTabSynchronization,Date.now());return Fi(e).put(cr.key,t)}static Pt(){return Ar.Pt()}cn(e){const t=Fi(e);return t.get(cr.key).next((e=>this.un(e)?(w("IndexedDbPersistence","Releasing primary lease."),t.delete(cr.key)):Or.resolve()))}fn(e,t){const n=Date.now();return!(e<n-t||e>n&&(T(`Detected an update time that is in the future: ${e} > ${n}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Me.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze())))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),Object(l.E)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Me.enterRestrictedMode(!0),this.Me.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return w("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return T("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){T("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fi(e){return qr(e,cr.store)}function qi(e){return qr(e,Tr.store)}function Ui(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Vi{constructor(e,t){this.progress=e,this.In=t}}class Bi{constructor(e,t,n){this.Je=e,this.An=t,this.Jt=n}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.bn(e,t,n)))}bn(e,t,n){return this.Je.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}Pn(e,t){e.forEach(((e,n)=>{for(const e of t)e.applyToLocalView(n)}))}vn(e,t){return this.Je.getEntries(e,t).next((t=>this.Vn(e,t).next((()=>t))))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.Pn(t,e)))}getDocumentsMatchingQuery(e,t,n){return function(e){return de.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):it(t)?this.Dn(e,t,n):this.Cn(e,t,n)}Sn(e,t){return this.Rn(e,new de(t)).next((e=>{let t=an();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}Dn(e,t,n){const s=t.collectionGroup;let i=an();return this.Jt.getCollectionParents(e,s).next((r=>Or.forEach(r,(r=>{const o=function(e,t){return new Ye(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,r.child(s));return this.Cn(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}Cn(e,t,n){let s,i;return this.Je.getDocumentsMatchingQuery(e,t,n).next((n=>(s=n,this.An.getAllMutationBatchesAffectingQuery(e,t)))).next((t=>(i=t,this.Nn(e,i,s).next((e=>{s=e;for(const e of i)for(const t of e.mutations){const n=t.key;let i=s.get(n);null==i&&(i=Ne.newInvalidDocument(n),s=s.insert(n,i)),Lt(t,i,e.localWriteTime),i.isFoundDocument()||(s=s.remove(n))}}))))).next((()=>(s.forEach(((e,n)=>{ht(t,n)||(s=s.remove(e))})),s)))}Nn(e,t,n){let s=hn();for(const e of t)for(const t of e.mutations)t instanceof Vt&&null===n.get(t.key)&&(s=s.add(t.key));let i=n;return this.Je.getEntries(e,s).next((e=>(e.forEach(((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))})),i)))}}class hr{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.kn=n,this.xn=s}static $n(e,t){let n=hn(),s=hn();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:s=s.add(e.doc.key)}return new hr(e,t.fromCache,n,s)}}class Wi{On(e){this.Mn=e}getDocumentsMatchingQuery(e,t,n,s){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual($.min())?this.Fn(e,t):this.Mn.vn(e,s).next((i=>{const r=this.Ln(t,i);return(Ze(t)||et(t))&&this.Bn(t.limitType,r,s,n)?this.Fn(e,t):(v()<=c.a.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),lt(t)),this.Mn.getDocumentsMatchingQuery(e,t,n).next((e=>(r.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}Ln(e,t){let n=new tn(ft(e));return t.forEach(((t,s)=>{ht(e,s)&&(n=n.add(s))})),n}Bn(e,t,n,s){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Fn(e,t){return v()<=c.a.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",lt(t)),this.Mn.getDocumentsMatchingQuery(e,t,$.min())}}class Hi{constructor(e,t,n,s){this.persistence=e,this.Un=t,this.k=s,this.qn=new Xt(rt),this.Kn=new Oi((e=>De(e)),Re),this.jn=$.min(),this.An=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Bi(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.qn)))}}function zi(e,t,n,s){return new Hi(e,t,n,s)}async function $i(e,t){const n=k(e);let s=n.An,i=n.Wn;const r=await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.An.getAllMutationBatches(e).next((o=>(r=o,s=n.persistence.getMutationQueue(t),i=new Bi(n.Qn,s,n.persistence.getIndexManager()),s.getAllMutationBatches(e)))).next((t=>{const n=[],s=[];let o=hn();for(const e of r){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.vn(e,o).next((e=>({Gn:e,removedBatchIds:n,addedBatchIds:s})))}))}));return n.An=s,n.Wn=i,n.Un.On(n.Wn),r}function Ki(e){const t=k(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.He.getLastRemoteSnapshotVersion(e)))}function Gi(e,t,n,s,i){let r=hn();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=sn();return n.forEach(((n,o)=>{const c=e.get(n),a=(null==i?void 0:i.get(n))||s;o.isNoDocument()&&o.version.isEqual($.min())?(t.removeEntry(n,a),r=r.insert(n,o)):!c.isValidDocument()||o.version.compareTo(c.version)>0||0===o.version.compareTo(c.version)&&c.hasPendingWrites?(t.addEntry(o,a),r=r.insert(n,o)):w("LocalStore","Ignoring outdated watch update for ",n,". Current version:",c.version," Watch version:",o.version)})),r}))}function Qi(e,t){const n=k(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t))))}function Yi(e,t){const n=k(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let s;return n.He.getTargetData(e,t).next((i=>i?(s=i,Or.resolve(s)):n.He.allocateTargetId(e).next((i=>(s=new Br(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,s).next((()=>s)))))))})).then((e=>{const s=n.qn.get(e.targetId);return(null===s||e.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}async function Ji(e,t,n){const s=k(e),i=s.qn.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(e=>s.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Rr(e))throw e;w("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}s.qn=s.qn.remove(t),s.Kn.delete(i.target)}function Xi(e,t,n){const s=k(e);let i=$.min(),r=hn();return s.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const s=k(e),i=s.Kn.get(n);return void 0!==i?Or.resolve(s.qn.get(i)):s.He.getTargetData(t,n)}(s,e,ot(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,s.He.getMatchingKeysForTargetId(e,t.targetId).next((e=>{r=e}))})).next((()=>s.Un.getDocumentsMatchingQuery(e,t,n?i:$.min(),n?r:hn()))).next((e=>({documents:e,zn:r})))))}function Zi(e,t){const n=k(e),s=k(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>s.Et(e,t).next((e=>e?e.target:null))))}function es(e){const t=k(e);return t.persistence.runTransaction("Get new document changes","readonly",(e=>function(e,t,n){const s=k(e);let i=sn(),r=zr(n);const o=Ri(t),c=IDBKeyRange.lowerBound(r,!0);return o.jt({index:gr.readTimeIndex,range:c},((e,t)=>{const n=Hr(s.k,t);i=i.insert(n.key,n),r=t.readTime})).next((()=>({In:i,readTime:$r(r)})))}(t.Qn,e,t.jn))).then((({In:e,readTime:n})=>(t.jn=n,e)))}async function ts(e,t,n=hn()){const s=await Yi(e,ot(Xr(t.bundledQuery))),i=k(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const r=Nn(t.readTime);if(s.snapshotVersion.compareTo(r)>=0)return i.Ye.saveNamedQuery(e,t);const o=s.withResumeToken(te.EMPTY_BYTE_STRING,r);return i.qn=i.qn.insert(o.targetId,o),i.He.updateTargetData(e,o).next((()=>i.He.removeMatchingKeysForTargetId(e,s.targetId))).next((()=>i.He.addMatchingKeys(e,n,s.targetId))).next((()=>i.Ye.saveNamedQuery(e,t)))}))}class ns{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Or.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:Nn(n.createTime)}),Or.resolve()}getNamedQuery(e,t){return Or.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:Xr(e.bundledQuery),readTime:Nn(e.readTime)}}(t)),Or.resolve()}}class rs{constructor(){this.ts=new tn(is.es),this.ns=new tn(is.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const n=new is(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.os(new is(e,t))}cs(e,t){e.forEach((e=>this.removeReference(e,t)))}us(e){const t=new de(new Y([])),n=new is(t,e),s=new is(t,e+1),i=[];return this.ns.forEachInRange([n,s],(e=>{this.os(e),i.push(e.key)})),i}hs(){this.ts.forEach((e=>this.os(e)))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new de(new Y([])),n=new is(t,e),s=new is(t,e+1);let i=hn();return this.ns.forEachInRange([n,s],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new is(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class is{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return de.comparator(e.key,t.key)||rt(e.fs,t.fs)}static ss(e,t){return rt(e.fs,t.fs)||de.comparator(e.key,t.key)}}class ss{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new tn(is.es)}checkEmpty(e){return Or.resolve(0===this.An.length)}addMutationBatch(e,t,n,s){const i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const r=new Ur(i,t,n,s);this.An.push(r);for(const t of s)this.ws=this.ws.add(new is(t.key,i)),this.Jt.addToCollectionParentIndex(e,t.key.path.popLast());return Or.resolve(r)}lookupMutationBatch(e,t){return Or.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.gs(n),i=s<0?0:s;return Or.resolve(this.An.length>i?this.An[i]:null)}getHighestUnacknowledgedBatchId(){return Or.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Or.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new is(t,0),s=new is(t,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,s],(e=>{const t=this._s(e.fs);i.push(t)})),Or.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new tn(rt);return t.forEach((e=>{const t=new is(e,0),s=new is(e,Number.POSITIVE_INFINITY);this.ws.forEachInRange([t,s],(e=>{n=n.add(e.fs)}))})),Or.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let i=n;de.isDocumentKey(i)||(i=i.child(""));const r=new is(new de(i),0);let o=new tn(rt);return this.ws.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===s&&(o=o.add(e.fs)),!0)}),r),Or.resolve(this.ys(o))}ys(e){const t=[];return e.forEach((e=>{const n=this._s(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){S(0===this.ps(t.batchId,"removed")),this.An.shift();let n=this.ws;return Or.forEach(t.mutations,(s=>{const i=new is(s.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.ws=n}))}ee(e){}containsKey(e,t){const n=new is(t,0),s=this.ws.firstAfterOrEqual(n);return Or.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.An.length,Or.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class os{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Xt(de.comparator),this.size=0}addEntry(e,t,n){const s=t.key,i=this.docs.get(s),r=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o,readTime:n}),this.size+=o-r,this.Jt.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Or.resolve(n?n.document.mutableCopy():Ne.newInvalidDocument(t))}getEntries(e,t){let n=sn();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ne.newInvalidDocument(e))})),Or.resolve(n)}getDocumentsMatchingQuery(e,t,n){let s=sn();const i=new de(t.path.child("")),r=this.docs.getIteratorFrom(i);for(;r.hasNext();){const{key:e,value:{document:i,readTime:o}}=r.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||ht(t,i)&&(s=s.insert(i.key,i.mutableCopy()))}return Or.resolve(s)}Es(e,t){return Or.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new as(this)}getSize(e){return Or.resolve(this.size)}}class as extends Ni{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.document.isValidDocument()?t.push(this.De.addEntry(e,s.document,this.getReadTime(n))):this.De.removeEntry(n)})),Or.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class cs{constructor(e){this.persistence=e,this.Is=new Oi((e=>De(e)),Re),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.As=0,this.Rs=new rs,this.targetCount=0,this.bs=mi.ie()}forEachTarget(e,t){return this.Is.forEach(((e,n)=>t(n))),Or.resolve()}getLastRemoteSnapshotVersion(e){return Or.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Or.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Or.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),Or.resolve()}ae(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new mi(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Or.resolve()}updateTargetData(e,t){return this.ae(t),Or.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Or.resolve()}removeTargets(e,t,n){let s=0;const i=[];return this.Is.forEach(((r,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Is.delete(r),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)})),Or.waitFor(i).next((()=>s))}getTargetCount(e){return Or.resolve(this.targetCount)}getTargetData(e,t){const n=this.Is.get(t)||null;return Or.resolve(n)}addMatchingKeys(e,t,n){return this.Rs.rs(t,n),Or.resolve()}removeMatchingKeys(e,t,n){this.Rs.cs(t,n);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((t=>{i.push(s.markPotentiallyOrphaned(e,t))})),Or.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Or.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Rs.ls(t);return Or.resolve(n)}containsKey(e,t){return Or.resolve(this.Rs.containsKey(t))}}class us{constructor(e,t){this.Ps={},this.Be=new U(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new cs(this),this.Jt=new ni,this.Je=function(e,t){return new os(e,t)}(this.Jt,(e=>this.referenceDelegate.vs(e))),this.k=new Wr(t),this.Ye=new ns(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new ss(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,n){w("MemoryPersistence","Starting transaction:",e);const s=new ls(this.Be.next());return this.referenceDelegate.Vs(),n(s).next((e=>this.referenceDelegate.Ss(s).next((()=>e)))).toPromise().then((e=>(s.raiseOnCommittedEvent(),e)))}Ds(e,t){return Or.or(Object.values(this.Ps).map((n=>()=>n.containsKey(e,t))))}}class ls extends kr{constructor(e){super(),this.currentSequenceNumber=e}}class hs{constructor(e){this.persistence=e,this.Cs=new rs,this.Ns=null}static ks(e){return new hs(e)}get xs(){if(this.Ns)return this.Ns;throw C()}addReference(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),Or.resolve()}removeReference(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),Or.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Or.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach((e=>this.xs.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.xs.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Or.forEach(this.xs,(n=>{const s=de.fromPath(n);return this.$s(e,s).next((e=>{e||t.removeEntry(s)}))})).next((()=>(this.Ns=null,t.apply(e))))}updateLimboDocument(e,t){return this.$s(e,t).next((e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())}))}vs(e){return 0}$s(e,t){return Or.or([()=>Or.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function ds(e,t){return`firestore_clients_${e}_${t}`}function fs(e,t,n){let s=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(s+=`_${t.uid}`),s}function ps(e,t){return`firestore_targets_${e}_${t}`}class gs{constructor(e,t,n,s){this.user=e,this.batchId=t,this.state=n,this.error=s}static Os(e,t,n){const s=JSON.parse(n);let i,r="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return r&&s.error&&(r="string"==typeof s.error.message&&"string"==typeof s.error.code,r&&(i=new N(s.error.code,s.error.message))),r?new gs(e,t,s.state,i):(T("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ms{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Os(e,t){const n=JSON.parse(t);let s,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(s=new N(n.error.code,n.error.message))),i?new ms(e,n.state,s):(T("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ys{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const n=JSON.parse(t);let s="object"==typeof n&&n.activeTargetIds instanceof Array,i=fn();for(let e=0;s&&e<n.activeTargetIds.length;++e)s=he(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return s?new ys(e,i):(T("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vs{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vs(t.clientId,t.onlineState):(T("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _s{constructor(){this.activeTargetIds=fn()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ws{constructor(e,t,n,s,i){this.window=e,this.Me=t,this.persistenceKey=n,this.Bs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Xt(rt),this.started=!1,this.js=[];const r=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=ds(this.persistenceKey,this.Bs),this.Ws=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new _s),this.Gs=new RegExp(`^firestore_clients_${r}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${r}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${r}_(\\d+)$`),this.Js=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Ys=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Tn();for(const t of e){if(t===this.Bs)continue;const e=this.getItem(ds(this.persistenceKey,t));if(e){const n=ys.Os(t,e);n&&(this.Ks=this.Ks.insert(n.clientId,n))}}this.Xs();const t=this.storage.getItem(this.Js);if(t){const e=this.Zs(t);e&&this.ti(e)}for(const e of this.js)this.qs(e);this.js=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach(((n,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,n){this.ni(e,t,n),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(ps(this.persistenceKey,e));if(n){const s=ms.Os(e,n);s&&(t=s.state)}}return this.ii.Fs(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ps(this.persistenceKey,e))}updateQueryState(e,t,n){this.ri(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.si(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ci()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return w("SharedClientState","READ",e,t),t}setItem(e,t){w("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){w("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){const t=e;if(t.storageArea===this.storage){if(w("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Qs)return void T("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Gs.test(t.key)){if(null==t.newValue){const e=this.ai(t.key);return this.ui(e,null)}{const e=this.hi(t.key,t.newValue);if(e)return this.ui(e.clientId,e)}}else if(this.zs.test(t.key)){if(null!==t.newValue){const e=this.li(t.key,t.newValue);if(e)return this.fi(e)}}else if(this.Hs.test(t.key)){if(null!==t.newValue){const e=this.di(t.key,t.newValue);if(e)return this.wi(e)}}else if(t.key===this.Js){if(null!==t.newValue){const e=this.Zs(t.newValue);if(e)return this.ti(e)}}else if(t.key===this.Ws){const e=function(e){let t=U.I;if(null!=e)try{const n=JSON.parse(e);S("number"==typeof n),t=n}catch(e){T("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==U.I&&this.sequenceNumberHandler(e)}else if(t.key===this.Ys)return this.syncEngine._i()}else this.js.push(t)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Ms())}ni(e,t,n){const s=new gs(this.currentUser,e,t,n),i=fs(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Ms())}si(e){const t=fs(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){const t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}ri(e,t,n){const s=ps(this.persistenceKey,e),i=new ms(e,t,n);this.setItem(s,i.Ms())}ci(){this.setItem(this.Ys,"value-not-used")}ai(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const n=this.ai(e);return ys.Os(n,t)}li(e,t){const n=this.zs.exec(e),s=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gs.Os(new f(i),s,t)}di(e,t){const n=this.Hs.exec(e),s=Number(n[1]);return ms.Os(s,t)}Zs(e){return vs.Os(e)}async fi(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.mi(e.batchId,e.state,e.error);w("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const n=t?this.Ks.insert(e,t):this.Ks.remove(e),s=this.ei(this.Ks),i=this.ei(n),r=[],o=[];return i.forEach((e=>{s.has(e)||r.push(e)})),s.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.yi(r,o).then((()=>{this.Ks=n}))}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=fn();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class bs{constructor(){this.pi=new _s,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,t,n){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new _s,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Ts{Ei(e){}shutdown(){}}class Es{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Is={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Cs{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}class Ss extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.Fi=t+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,n,s,i){const r=this.Ui(e,t);w("RestConnection","Sending: ",r,n);const o={};return this.qi(o,s,i),this.Ki(e,r,o,n).then((e=>(w("RestConnection","Received: ",e),e)),(t=>{throw E("RestConnection",`${e} failed with error: `,t,"url: ",r,"request:",n),t}))}ji(e,t,n,s,i){return this.Bi(e,t,n,s,i)}qi(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+m,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Ui(e,t){const n=Is[e];return`${this.Fi}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,n,s){return new Promise(((i,r)=>{const o=new h.g;o.listenOnce(h.c.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case h.a.NO_ERROR:const t=o.getResponseJson();w("Connection","XHR received:",JSON.stringify(t)),i(t);break;case h.a.TIMEOUT:w("Connection",'RPC "'+e+'" timed out'),r(new N(O.DEADLINE_EXCEEDED,"Request time out"));break;case h.a.HTTP_ERROR:const n=o.getStatus();if(w("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(t)>=0?t:O.UNKNOWN}(e.status);r(new N(t,e.message))}else r(new N(O.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new N(O.UNAVAILABLE,"Connection failed."));break;default:C()}}finally{w("Connection",'RPC "'+e+'" completed.')}}));const c=JSON.stringify(s);o.send(t,"POST",c,n,15)}))}Qi(e,t,n){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(h.h)(),r=Object(h.i)(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new h.d({})),this.qi(o.initMessageHeaders,t,n),Object(l.A)()||Object(l.D)()||Object(l.w)()||Object(l.y)()||Object(l.F)()||Object(l.v)()||(o.httpHeadersOverwriteParam="$httpHeaders");const c=s.join("");w("Connection","Creating WebChannel: "+c,o);const a=i.createWebChannel(c,o);let u=!1,d=!1;const f=new Cs({Vi:e=>{d?w("Connection","Not sending because WebChannel is closed:",e):(u||(w("Connection","Opening WebChannel transport."),a.open(),u=!0),w("Connection","WebChannel sending:",e),a.send(e))},Si:()=>a.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(a,h.f.EventType.OPEN,(()=>{d||w("Connection","WebChannel transport opened.")})),m(a,h.f.EventType.CLOSE,(()=>{d||(d=!0,w("Connection","WebChannel transport closed"),f.Oi())})),m(a,h.f.EventType.ERROR,(e=>{d||(d=!0,E("Connection","WebChannel transport errored:",e),f.Oi(new N(O.UNAVAILABLE,"The operation could not be completed")))})),m(a,h.f.EventType.MESSAGE,(e=>{var t;if(!d){const n=e.data[0];S(!!n);const s=n,i=s.error||(null===(t=s[0])||void 0===t?void 0:t.error);if(i){w("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Gt[e];if(void 0!==t)return Jt(t)}(e),n=i.message;void 0===t&&(t=O.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),d=!0,f.Oi(new N(t,n)),a.close()}else w("Connection","WebChannel received:",n),f.Mi(n)}})),m(r,h.b.STAT_EVENT,(e=>{e.stat===h.e.PROXY?w("Connection","Detected buffering proxy"):e.stat===h.e.NOPROXY&&w("Connection","Detected no buffering proxy")})),setTimeout((()=>{f.$i()}),0),f}}function ks(){return"undefined"!=typeof window?window:null}function Os(){return"undefined"!=typeof document?document:null}function Ns(e){return new Cn(e,!0)}class As{constructor(e,t,n=1e3,s=1.5,i=6e4){this.Me=e,this.timerId=t,this.Wi=n,this.Gi=s,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),s=Math.max(0,t-n);s>0&&w("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,s,(()=>(this.Yi=Date.now(),e()))),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class xs{constructor(e,t,n,s,i,r,o,c){this.Me=e,this.nr=n,this.sr=s,this.ir=i,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new As(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,(()=>this.mr())))}gr(e){this.yr(),this.stream.send(e)}async mr(){if(this.lr())return this.close(0)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}async close(e,t){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==e?this.ur.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(T(t.toString()),T("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):t&&t.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ni(t)}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.rr===t&&this.Ir(e,n)}),(t=>{e((()=>{const e=new N(O.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ar(e)}))}))}Ir(e,t){const n=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((()=>{n((()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,(()=>(this.lr()&&(this.state=3),Promise.resolve()))),this.listener.Di())))})),this.stream.Ni((e=>{n((()=>this.Ar(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}dr(){this.state=5,this.ur.Zi((async()=>{this.state=0,this.start()}))}Ar(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Me.enqueueAndForget((()=>this.rr===e?t():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ds extends xs{constructor(e,t,n,s,i,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,r),this.k=i}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:C()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(e,t){return e.C?(S(void 0===t||"string"==typeof t),te.fromBase64String(t||"")):(S(void 0===t||t instanceof Uint8Array),te.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(e){const t=void 0===e.code?O.UNKNOWN:Jt(e.code);return new N(t,e.message||"")}(o);n=new vn(s,i,r,c||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Rn(e,s.document.name),r=Nn(s.document.updateTime),o=new ke({mapValue:{fields:s.document.fields}}),c=Ne.newFoundDocument(i,r,o),a=s.targetIds||[],u=s.removedTargetIds||[];n=new mn(a,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Rn(e,s.document),r=s.readTime?Nn(s.readTime):$.min(),o=Ne.newNoDocument(i,r),c=s.removedTargetIds||[];n=new mn([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Rn(e,s.document),r=s.removedTargetIds||[];n=new mn([],r,i,null)}else{if(!("filter"in t))return C();{t.filter;const e=t.filter;e.targetId;const s=e.count||0,i=new Kt(s),r=e.targetId;n=new yn(r,i)}}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return $.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?$.min():t.readTime?Nn(t.readTime):$.min()}(e);return this.listener.br(t,n)}Pr(e){const t={};t.database=Ln(this.k),t.addTarget=function(e,t){let n;const s=t.target;return n=Pe(s)?{documents:Bn(e,s)}:{query:Wn(e,s)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=kn(e,t.resumeToken):t.snapshotVersion.compareTo($.min())>0&&(n.readTime=Sn(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return C()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}vr(e){const t={};t.database=Ln(this.k),t.removeTarget=e,this.gr(t)}}class Rs extends xs{constructor(e,t,n,s,i,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,r),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(S(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(e,t){return e&&e.length>0?(S(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Nn(e.updateTime):Nn(t);return n.isEqual($.min())&&(n=Nn(t)),new xt(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Nn(e.commitTime);return this.listener.Cr(n,t)}return S(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Ln(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Un(this.k,e)))};this.gr(t)}}class Ps extends class{}{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=n,this.k=s,this.$r=!1}Or(){if(this.$r)throw new N(O.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.ir.Bi(e,t,n,s,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new N(O.UNKNOWN,e.toString())}))}ji(e,t,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.ir.ji(e,t,n,s,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new N(O.UNKNOWN,e.toString())}))}terminate(){this.$r=!0}}class js{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve()))))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(T(t),this.Lr=!1):w("OnlineStateTracker",t)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class Ls{constructor(e,t,n,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei((e=>{n.enqueueAndForget((async()=>{zs(this)&&(w("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=k(e);t.Gr.add(4),await Fs(t),t.Jr.set("Unknown"),t.Gr.delete(4),await Ms(t)}(this))}))})),this.Jr=new js(n,s)}}async function Ms(e){if(zs(e))for(const t of e.zr)await t(!0)}async function Fs(e){for(const t of e.zr)await t(!1)}function qs(e,t){const n=k(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Hs(n)?Ws(n):uo(n).lr()&&Vs(n,t))}function Us(e,t){const n=k(e),s=uo(n);n.Wr.delete(t),s.lr()&&Bs(n,t),0===n.Wr.size&&(s.lr()?s._r():zs(n)&&n.Jr.set("Unknown"))}function Vs(e,t){e.Yr.X(t.targetId),uo(e).Pr(t)}function Bs(e,t){e.Yr.X(t),uo(e).vr(t)}function Ws(e){e.Yr=new wn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Wr.get(t)||null}),uo(e).start(),e.Jr.Br()}function Hs(e){return zs(e)&&!uo(e).hr()&&e.Wr.size>0}function zs(e){return 0===k(e).Gr.size}function $s(e){e.Yr=void 0}async function Ks(e){e.Wr.forEach(((t,n)=>{Vs(e,t)}))}async function Gs(e,t){$s(e),Hs(e)?(e.Jr.Kr(t),Ws(e)):e.Jr.set("Unknown")}async function Qs(e,t,n){if(e.Jr.set("Online"),t instanceof vn&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const s of t.targetIds)e.Wr.has(s)&&(await e.remoteSyncer.rejectListen(s,n),e.Wr.delete(s),e.Yr.removeTarget(s))}(e,t)}catch(n){w("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ys(e,n)}else if(t instanceof mn?e.Yr.ot(t):t instanceof yn?e.Yr.dt(t):e.Yr.ut(t),!n.isEqual($.min()))try{const t=await Ki(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Yr.gt(t);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Wr.get(s);i&&e.Wr.set(s,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.Wr.get(t);if(!n)return;e.Wr.set(t,n.withResumeToken(te.EMPTY_BYTE_STRING,n.snapshotVersion)),Bs(e,t);const s=new Br(n.target,t,1,n.sequenceNumber);Vs(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){w("RemoteStore","Failed to raise snapshot:",t),await Ys(e,t)}}async function Ys(e,t,n){if(!Rr(t))throw t;e.Gr.add(1),await Fs(e),e.Jr.set("Offline"),n||(n=()=>Ki(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{w("RemoteStore","Retrying IndexedDB access"),await n(),e.Gr.delete(1),await Ms(e)}))}function Js(e,t){return t().catch((n=>Ys(e,n,t)))}async function Xs(e){const t=k(e),n=lo(t);let s=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;Zs(t);)try{const e=await Qi(t.localStore,s);if(null===e){0===t.Qr.length&&n._r();break}s=e.batchId,eo(t,e)}catch(e){await Ys(t,e)}to(t)&&no(t)}function Zs(e){return zs(e)&&e.Qr.length<10}function eo(e,t){e.Qr.push(t);const n=lo(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function to(e){return zs(e)&&!lo(e).hr()&&e.Qr.length>0}function no(e){lo(e).start()}async function ro(e){lo(e).kr()}async function io(e){const t=lo(e);for(const n of e.Qr)t.Dr(n.mutations)}async function so(e,t,n){const s=e.Qr.shift(),i=Vr.from(s,t,n);await Js(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Xs(e)}async function oo(e,t){t&&lo(e).Sr&&await async function(e,t){if(Yt(n=t.code)&&n!==O.ABORTED){const n=e.Qr.shift();lo(e).wr(),await Js(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Xs(e)}var n}(e,t),to(e)&&no(e)}async function ao(e,t){const n=k(e);n.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");const s=zs(n);n.Gr.add(3),await Fs(n),s&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Gr.delete(3),await Ms(n)}async function co(e,t){const n=k(e);t?(n.Gr.delete(2),await Ms(n)):t||(n.Gr.add(2),await Fs(n),n.Jr.set("Unknown"))}function uo(e){return e.Xr||(e.Xr=function(e,t,n){const s=k(e);return s.Or(),new Ds(t,s.ir,s.authCredentials,s.appCheckCredentials,s.k,n)}(e.datastore,e.asyncQueue,{Di:Ks.bind(null,e),Ni:Gs.bind(null,e),br:Qs.bind(null,e)}),e.zr.push((async t=>{t?(e.Xr.wr(),Hs(e)?Ws(e):e.Jr.set("Unknown")):(await e.Xr.stop(),$s(e))}))),e.Xr}function lo(e){return e.Zr||(e.Zr=function(e,t,n){const s=k(e);return s.Or(),new Rs(t,s.ir,s.authCredentials,s.appCheckCredentials,s.k,n)}(e.datastore,e.asyncQueue,{Di:ro.bind(null,e),Ni:oo.bind(null,e),Nr:io.bind(null,e),Cr:so.bind(null,e)}),e.zr.push((async t=>{t?(e.Zr.wr(),await Xs(e)):(await e.Zr.stop(),e.Qr.length>0&&(w("RemoteStore",`Stopping write stream with ${e.Qr.length} pending writes`),e.Qr=[]))}))),e.Zr}class ho{constructor(e,t,n,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new A,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,s,i){const r=Date.now()+n,o=new ho(e,t,r,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new N(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fo(e,t){if(T("AsyncQueue",`${t}: ${e}`),Rr(e))return new N(O.UNAVAILABLE,`${t}: ${e}`);throw e}class po{constructor(e){this.comparator=e?(t,n)=>e(t,n)||de.comparator(t.key,n.key):(e,t)=>de.comparator(e.key,t.key),this.keyedMap=an(),this.sortedSet=new Xt(this.comparator)}static emptySet(e){return new po(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof po))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(!e.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new po;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class go{constructor(){this.eo=new Xt(de.comparator)}track(e){const t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):C():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal(((t,n)=>{e.push(n)})),e}}class mo{constructor(e,t,n,s,i,r,o,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=c}static fromInitialDocuments(e,t,n,s){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new mo(e,t,po.emptySet(t),i,n,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ct(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class yo{constructor(){this.so=void 0,this.listeners=[]}}class vo{constructor(){this.queries=new Oi((e=>ut(e)),ct),this.onlineState="Unknown",this.io=new Set}}async function _o(e,t){const n=k(e),s=t.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new yo),i)try{r.so=await n.onListen(s)}catch(e){const n=fo(e,`Initialization of query '${lt(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,r),r.listeners.push(t),t.ro(n.onlineState),r.so&&t.oo(r.so)&&Eo(n)}async function wo(e,t){const n=k(e),s=t.query;let i=!1;const r=n.queries.get(s);if(r){const e=r.listeners.indexOf(t);e>=0&&(r.listeners.splice(e,1),i=0===r.listeners.length)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function bo(e,t){const n=k(e);let s=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.oo(e)&&(s=!0);i.so=e}}s&&Eo(n)}function To(e,t,n){const s=k(e),i=s.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);s.queries.delete(t)}function Eo(e){e.io.forEach((e=>{e.next()}))}class Io{constructor(e,t,n){this.query=e,this.co=t,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new mo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.ao?this.ho(e)&&(this.co.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.wo&&n||e.docs.isEmpty()&&"Offline"!==t)}ho(e){if(e.docChanges.length>0)return!0;const t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}fo(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}class Co{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class So{constructor(e){this.k=e}Hn(e){return Rn(this.k,e)}Jn(e){return e.metadata.exists?qn(this.k,e.document,!1):Ne.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Nn(e)}}class ko{constructor(e,t,n){this.mo=e,this.localStore=t,this.k=n,this.queries=[],this.documents=[],this.progress=Oo(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,n=new So(this.k);for(const s of e)if(s.metadata.queries){const e=n.Hn(s.metadata.name);for(const n of s.metadata.queries){const s=(t.get(n)||hn()).add(e);t.set(n,s)}}return t}async complete(){const e=await async function(e,t,n,s){const i=k(e);let r=hn(),o=sn(),c=un();for(const e of n){const n=t.Hn(e.metadata.name);e.document&&(r=r.add(n)),o=o.insert(n,t.Jn(e)),c=c.insert(n,t.Yn(e.metadata.readTime))}const a=i.Qn.newChangeBuffer({trackRemovals:!0}),u=await Yi(i,function(e){return ot(Xe(Y.fromString(`__bundle__/docs/${e}`)))}(s));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Gi(e,a,o,$.min(),c).next((t=>(a.apply(e),t))).next((t=>i.He.removeMatchingKeysForTargetId(e,u.targetId).next((()=>i.He.addMatchingKeys(e,r,u.targetId))).next((()=>i.Wn.Vn(e,t))).next((()=>t))))))}(this.localStore,new So(this.k),this.documents,this.mo.id),t=this.po(this.documents);for(const e of this.queries)await ts(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",new Vi(Object.assign({},this.progress),e)}}function Oo(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class No{constructor(e){this.key=e}}class Ao{constructor(e){this.key=e}}class xo{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=hn(),this.mutatedKeys=hn(),this.Ao=ft(e),this.Ro=new po(this.Ao)}get bo(){return this.To}Po(e,t){const n=t?t.vo:new go,s=t?t.Ro:this.Ro;let i=t?t.mutatedKeys:this.mutatedKeys,r=s,o=!1;const c=Ze(this.query)&&s.size===this.query.limit?s.last():null,a=et(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((e,t)=>{const u=s.get(e),l=ht(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Vo(u,l)||(n.track({type:2,doc:l}),f=!0,(c&&this.Ao(l,c)>0||a&&this.Ao(l,a)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(c||a)&&(o=!0)),f&&(l?(r=r.add(l),i=d?i.add(e):i.delete(e)):(r=r.delete(e),i=i.delete(e)))})),Ze(this.query)||et(this.query))for(;r.size>this.query.limit;){const e=Ze(this.query)?r.last():r.first();r=r.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ro:r,vo:n,Bn:o,mutatedKeys:i}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const s=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const i=e.vo.no();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return C()}};return n(e)-n(t)}(e.type,t.type)||this.Ao(e.doc,t.doc))),this.So(n);const r=t?this.Do():[],o=0===this.Io.size&&this.current?1:0,c=o!==this.Eo;return this.Eo=o,0!==i.length||c?{snapshot:new mo(this.query,e.Ro,s,i,e.mutatedKeys,0===o,c,!1),Co:r}:{Co:r}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new go,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach((e=>this.To=this.To.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.To=this.To.delete(e))),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=hn(),this.Ro.forEach((e=>{this.No(e.key)&&(this.Io=this.Io.add(e.key))}));const t=[];return e.forEach((e=>{this.Io.has(e)||t.push(new Ao(e))})),this.Io.forEach((n=>{e.has(n)||t.push(new No(n))})),t}ko(e){this.To=e.zn,this.Io=hn();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return mo.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class Do{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ro{constructor(e){this.key=e,this.$o=!1}}class Po{constructor(e,t,n,s,i,r){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=r,this.Oo={},this.Mo=new Oi((e=>ut(e)),ct),this.Fo=new Map,this.Lo=new Set,this.Bo=new Xt(de.comparator),this.Uo=new Map,this.qo=new rs,this.Ko={},this.jo=new Map,this.Qo=mi.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function jo(e,t){const n=aa(e);let s,i;const r=n.Mo.get(t);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.xo();else{const e=await Yi(n.localStore,ot(t)),r=n.sharedClientState.addLocalQueryTarget(e.targetId);s=e.targetId,i=await Lo(n,t,s,"current"===r),n.isPrimaryClient&&qs(n.remoteStore,e)}return i}async function Lo(e,t,n,s){e.Go=(t,n,s)=>async function(e,t,n,s){let i=t.view.Po(n);i.Bn&&(i=await Xi(e.localStore,t.query,!1).then((({documents:e})=>t.view.Po(e,i))));const r=s&&s.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,r);return Ko(e,t.targetId,o.Co),o.snapshot}(e,t,n,s);const i=await Xi(e.localStore,t,!0),r=new xo(t,i.zn),o=r.Po(i.documents),c=gn.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==e.onlineState),a=r.applyChanges(o,e.isPrimaryClient,c);Ko(e,n,a.Co);const u=new Do(t,n,r);return e.Mo.set(t,u),e.Fo.has(n)?e.Fo.get(n).push(t):e.Fo.set(n,[t]),a.snapshot}async function Mo(e,t){const n=k(e),s=n.Mo.get(t),i=n.Fo.get(s.targetId);if(i.length>1)return n.Fo.set(s.targetId,i.filter((e=>!ct(e,t)))),void n.Mo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Ji(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),Us(n.remoteStore,s.targetId),zo(n,s.targetId)})).catch(bi)):(zo(n,s.targetId),await Ji(n.localStore,s.targetId,!0))}async function Fo(e,t){const n=k(e);try{const e=await function(e,t){const n=k(e),s=t.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const r=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];t.targetChanges.forEach(((r,c)=>{const a=i.get(c);if(!a)return;o.push(n.He.removeMatchingKeys(e,r.removedDocuments,c).next((()=>n.He.addMatchingKeys(e,r.addedDocuments,c))));let u=a.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(c)?u=u.withResumeToken(te.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):r.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(r.resumeToken,s)),i=i.insert(c,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,r)&&o.push(n.He.updateTargetData(e,u))}));let c=sn();if(t.documentUpdates.forEach(((s,i)=>{t.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,s))})),o.push(Gi(e,r,t.documentUpdates,s,void 0).next((e=>{c=e}))),!s.isEqual($.min())){const t=n.He.getLastRemoteSnapshotVersion(e).next((t=>n.He.setTargetsMetadata(e,e.currentSequenceNumber,s)));o.push(t)}return Or.waitFor(o).next((()=>r.apply(e))).next((()=>n.Wn.Vn(e,c))).next((()=>c))})).then((e=>(n.qn=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const s=n.Uo.get(t);s&&(S(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?s.$o=!0:e.modifiedDocuments.size>0?S(s.$o):e.removedDocuments.size>0&&(S(s.$o),s.$o=!1))})),await Yo(n,e,t)}catch(e){await bi(e)}}function qo(e,t,n){const s=k(e);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const e=[];s.Mo.forEach(((n,s)=>{const i=s.view.ro(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=k(e);n.onlineState=t;let s=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.ro(t)&&(s=!0)})),s&&Eo(n)}(s.eventManager,t),e.length&&s.Oo.br(e),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Uo(e,t,n){const s=k(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Uo.get(t),r=i&&i.key;if(r){let e=new Xt(de.comparator);e=e.insert(r,Ne.newNoDocument(r,$.min()));const n=hn().add(r),i=new pn($.min(),new Map,new tn(rt),e,n);await Fo(s,i),s.Bo=s.Bo.remove(r),s.Uo.delete(t),Qo(s)}else await Ji(s.localStore,t,!1).then((()=>zo(s,t,n))).catch(bi)}async function Vo(e,t){const n=k(e),s=t.batch.batchId;try{const e=await function(e,t){const n=k(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const s=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,s){const i=n.batch,r=i.keys();let o=Or.resolve();return r.forEach((e=>{o=o.next((()=>s.getEntry(t,e))).next((t=>{const r=n.docVersions.get(e);S(null!==r),t.version.compareTo(r)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&s.addEntry(t,n.commitVersion))}))})),o.next((()=>e.An.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.An.performConsistencyCheck(e))).next((()=>n.Wn.vn(e,s)))}))}(n.localStore,t);Ho(n,s,null),Wo(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Yo(n,e)}catch(e){await bi(e)}}async function Bo(e,t,n){const s=k(e);try{const e=await function(e,t){const n=k(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let s;return n.An.lookupMutationBatch(e,t).next((t=>(S(null!==t),s=t.keys(),n.An.removeMutationBatch(e,t)))).next((()=>n.An.performConsistencyCheck(e))).next((()=>n.Wn.vn(e,s)))}))}(s.localStore,t);Ho(s,t,n),Wo(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Yo(s,e)}catch(n){await bi(n)}}function Wo(e,t){(e.jo.get(t)||[]).forEach((e=>{e.resolve()})),e.jo.delete(t)}function Ho(e,t,n){const s=k(e);let i=s.Ko[s.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),s.Ko[s.currentUser.toKey()]=i}}function zo(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Fo.get(t))e.Mo.delete(s),n&&e.Oo.zo(s,n);e.Fo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((t=>{e.qo.containsKey(t)||$o(e,t)}))}function $o(e,t){e.Lo.delete(t.path.canonicalString());const n=e.Bo.get(t);null!==n&&(Us(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),Qo(e))}function Ko(e,t,n){for(const s of n)s instanceof No?(e.qo.addReference(s.key,t),Go(e,s)):s instanceof Ao?(w("SyncEngine","Document no longer in limbo: "+s.key),e.qo.removeReference(s.key,t),e.qo.containsKey(s.key)||$o(e,s.key)):C()}function Go(e,t){const n=t.key,s=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(s)||(w("SyncEngine","New document in limbo: "+n),e.Lo.add(s),Qo(e))}function Qo(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){const t=e.Lo.values().next().value;e.Lo.delete(t);const n=new de(Y.fromString(t)),s=e.Qo.next();e.Uo.set(s,new Ro(n)),e.Bo=e.Bo.insert(n,s),qs(e.remoteStore,new Br(ot(Xe(n.path)),s,2,U.I))}}async function Yo(e,t,n){const s=k(e),i=[],r=[],o=[];s.Mo.isEmpty()||(s.Mo.forEach(((e,c)=>{o.push(s.Go(c,t,n).then((e=>{if(e){s.isPrimaryClient&&s.sharedClientState.updateQueryState(c.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=hr.$n(c.targetId,e);r.push(t)}})))})),await Promise.all(o),s.Oo.br(i),await async function(e,t){const n=k(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Or.forEach(t,(t=>Or.forEach(t.kn,(s=>n.persistence.referenceDelegate.addReference(e,t.targetId,s))).next((()=>Or.forEach(t.xn,(s=>n.persistence.referenceDelegate.removeReference(e,t.targetId,s)))))))))}catch(e){if(!Rr(e))throw e;w("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.qn.get(t),s=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(s);n.qn=n.qn.insert(t,i)}}}(s.localStore,r))}async function Jo(e,t){const n=k(e);if(!n.currentUser.isEqual(t)){w("SyncEngine","User change. New user:",t.toKey());const e=await $i(n.localStore,t);n.currentUser=t,function(e,t){e.jo.forEach((e=>{e.forEach((e=>{e.reject(new N(O.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Yo(n,e.Gn)}}function Xo(e,t){const n=k(e),s=n.Uo.get(t);if(s&&s.$o)return hn().add(s.key);{let e=hn();const s=n.Fo.get(t);if(!s)return e;for(const t of s){const s=n.Mo.get(t);e=e.unionWith(s.view.bo)}return e}}async function Zo(e,t){const n=k(e),s=await Xi(n.localStore,t.query,!0),i=t.view.ko(s);return n.isPrimaryClient&&Ko(n,t.targetId,i.Co),i}async function ea(e){const t=k(e);return es(t.localStore).then((e=>Yo(t,e)))}async function ta(e,t,n,s){const i=k(e),r=await function(e,t){const n=k(e),s=k(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>s.Zt(e,t).next((t=>t?n.Wn.vn(e,t):Or.resolve(null)))))}(i.localStore,t);null!==r?("pending"===n?await Xs(i.remoteStore):"acknowledged"===n||"rejected"===n?(Ho(i,t,s||null),Wo(i,t),function(e,t){k(k(e).An).ee(t)}(i.localStore,t)):C(),await Yo(i,r)):w("SyncEngine","Cannot apply mutation batch with id: "+t)}async function na(e,t,n){const s=k(e),i=[],r=[];for(const e of t){let t;const n=s.Fo.get(e);if(n&&0!==n.length){t=await Yi(s.localStore,ot(n[0]));for(const e of n){const t=s.Mo.get(e),n=await Zo(s,t);n.snapshot&&r.push(n.snapshot)}}else{const n=await Zi(s.localStore,e);t=await Yi(s.localStore,n),await Lo(s,ra(n),e,!1)}i.push(t)}return s.Oo.br(r),i}function ra(e){return Je(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ia(e){const t=k(e);return k(k(t.localStore).persistence).Tn()}async function sa(e,t,n,s){const i=k(e);if(i.Wo)w("SyncEngine","Ignoring unexpected query state notification.");else if(i.Fo.has(t))switch(n){case"current":case"not-current":{const e=await es(i.localStore),s=pn.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Yo(i,e,s);break}case"rejected":await Ji(i.localStore,t,!0),zo(i,t,s);break;default:C()}}async function oa(e,t,n){const s=aa(e);if(s.Wo){for(const e of t){if(s.Fo.has(e)){w("SyncEngine","Adding an already active target "+e);continue}const t=await Zi(s.localStore,e),n=await Yi(s.localStore,t);await Lo(s,ra(t),n.targetId,!1),qs(s.remoteStore,n)}for(const e of n)s.Fo.has(e)&&await Ji(s.localStore,e,!1).then((()=>{Us(s.remoteStore,e),zo(s,e)})).catch(bi)}}function aa(e){const t=k(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fo.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xo.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Uo.bind(null,t),t.Oo.br=bo.bind(null,t.eventManager),t.Oo.zo=To.bind(null,t.eventManager),t}function ca(e){const t=k(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vo.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Bo.bind(null,t),t}class ua{constructor(){this.synchronizeTabs=!1}async initialize(e){this.k=Ns(e.databaseInfo.databaseId),this.sharedClientState=this.Jo(e),this.persistence=this.Yo(e),await this.persistence.start(),this.gcScheduler=this.Xo(e),this.localStore=this.Zo(e)}Xo(e){return null}Zo(e){return zi(this.persistence,new Wi,e.initialUser,this.k)}Yo(e){return new us(hs.ks,this.k)}Jo(e){return new bs}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class la extends ua{constructor(e,t,n){super(),this.tc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await async function(e){const t=k(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",(e=>function(e){const t=Ri(e);let n=$.min();return t.jt({index:gr.readTimeIndex,reverse:!0},((e,t,s)=>{t.readTime&&(n=$r(t.readTime)),s.done()})).next((()=>n))}(e))).then((e=>{t.jn=e}))}(this.localStore),await this.tc.initialize(this,e),await ca(this.tc.syncEngine),await Xs(this.tc.remoteStore),await this.persistence.sn((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}Zo(e){return zi(this.persistence,new Wi,e.initialUser,this.k)}Xo(e){const t=this.persistence.referenceDelegate.garbageCollector;return new Ii(t,e.asyncQueue)}Yo(e){const t=Ui(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ai.withCacheSize(this.cacheSizeBytes):ai.DEFAULT;return new Mi(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ks(),Os(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new bs}}class ha extends la{constructor(e,t){super(e,t,!1),this.tc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.tc.syncEngine;this.sharedClientState instanceof ws&&(this.sharedClientState.syncEngine={mi:ta.bind(null,t),gi:sa.bind(null,t),yi:oa.bind(null,t),Tn:ia.bind(null,t),_i:ea.bind(null,t)},await this.sharedClientState.start()),await this.persistence.sn((async e=>{await async function(e,t){const n=k(e);if(aa(n),ca(n),!0===t&&!0!==n.Wo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await na(n,e.toArray());n.Wo=!0,await co(n.remoteStore,!0);for(const e of t)qs(n.remoteStore,e)}else if(!1===t&&!1!==n.Wo){const e=[];let t=Promise.resolve();n.Fo.forEach(((s,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(zo(n,i),Ji(n.localStore,i,!0)))),Us(n.remoteStore,i)})),await t,await na(n,e),function(e){const t=k(e);t.Uo.forEach(((e,n)=>{Us(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new Xt(de.comparator)}(n),n.Wo=!1,await co(n.remoteStore,!1)}}(this.tc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())}))}Jo(e){const t=ks();if(!ws.Pt(t))throw new N(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Ui(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ws(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class da{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>qo(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jo.bind(null,this.syncEngine),await co(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new vo}createDatastore(e){const t=Ns(e.databaseInfo.databaseId),n=(s=e.databaseInfo,new Ss(s));var s;return function(e,t,n,s){return new Ps(e,t,n,s)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,s=e.asyncQueue,i=e=>qo(this.syncEngine,e,0),r=Es.Pt()?new Es:new Ts,new Ls(t,n,s,i,r);var t,n,s,i,r}createSyncEngine(e,t){return function(e,t,n,s,i,r,o){const c=new Po(e,t,n,s,i,r);return o&&(c.Wo=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=k(e);w("RemoteStore","RemoteStore shutting down."),t.Gr.add(5),await Fs(t),t.Hr.shutdown(),t.Jr.set("Unknown")}(this.remoteStore)}}function fa(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const s={value:e.slice(n,n+t),done:!1};return n+=t,s}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class pa{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class ga{constructor(e,t){this.sc=e,this.k=t,this.metadata=new A,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then((e=>{e&&e._o()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))}),(e=>this.metadata.reject(e)))}close(){return this.sc.cancel()}async getMetadata(){return this.metadata.promise}async Ho(){return await this.getMetadata(),this.rc()}async rc(){const e=await this.oc();if(null===e)return null;const t=this.ic.decode(e),n=Number(t);isNaN(n)&&this.cc(`length string (${t}) is not valid number`);const s=await this.ac(n);return new Co(JSON.parse(s),e.length+n)}uc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async oc(){for(;this.uc()<0&&!await this.hc(););if(0===this.buffer.length)return null;const e=this.uc();e<0&&this.cc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ac(e){for(;this.buffer.length<e;)await this.hc()&&this.cc("Reached the end of bundle when more is expected.");const t=this.ic.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cc(e){throw this.sc.cancel(),new Error(`Invalid bundle format: ${e}`)}async hc(){const e=await this.sc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class ma{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new N(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=k(e),s=Ln(n.k)+"/documents",i={documents:t.map((e=>Dn(n.k,e)))},r=await n.ji("BatchGetDocuments",s,i),o=new Map;r.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){S(!!t.found),t.found.name,t.found.updateTime;const n=Rn(e,t.found.name),s=Nn(t.found.updateTime),i=new ke({mapValue:{fields:t.found.fields}});return Ne.newFoundDocument(n,s,i)}(e,t):"missing"in t?function(e,t){S(!!t.missing),S(!!t.readTime);const n=Rn(e,t.missing),s=Nn(t.readTime);return Ne.newNoDocument(n,s)}(e,t):C()}(n.k,e);o.set(t.key.toString(),t)}));const c=[];return t.forEach((e=>{const t=o.get(e.toString());S(!!t),c.push(t)})),c}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new zt(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=de.fromPath(t);this.mutations.push(new $t(n,this.precondition(n)))})),await async function(e,t){const n=k(e),s=Ln(n.k)+"/documents",i={writes:t.map((e=>Un(n.k,e)))};await n.Bi("Commit",s,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw C();t=$.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new N(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Dt.updateTime(t):Dt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($.min()))throw new N(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dt.updateTime(t)}return Dt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ya{constructor(e,t,n,s){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=s,this.lc=5,this.ur=new As(this.asyncQueue,"transaction_retry")}run(){this.lc-=1,this.fc()}fc(){this.ur.Zi((async()=>{const e=new ma(this.datastore),t=this.dc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.wc(e)}))))})).catch((e=>{this.wc(e)}))}))}dc(e){try{const t=this.updateFunction(e);return!ue(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}wc(e){this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget((()=>(this.fc(),Promise.resolve())))):this.deferred.reject(e)}_c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Yt(t)}return!1}}class va{constructor(e,t,n,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=f.UNAUTHENTICATED,this.clientId=B.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{w("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(w("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new N(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new A;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=fo(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function _a(e,t){e.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async e=>{s.isEqual(e)||(await $i(t.localStore,e),s=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function wa(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ba(e);w("FirestoreClient","Initializing OnlineComponentProvider");const s=await e.getConfiguration();await t.initialize(n,s),e.setCredentialChangeListener((e=>ao(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ao(t.remoteStore,n))),e.onlineComponents=t}async function ba(e){return e.offlineComponents||(w("FirestoreClient","Using default OfflineComponentProvider"),await _a(e,new ua)),e.offlineComponents}async function Ta(e){return e.onlineComponents||(w("FirestoreClient","Using default OnlineComponentProvider"),await wa(e,new da)),e.onlineComponents}function Ea(e){return ba(e).then((e=>e.persistence))}function Ia(e){return ba(e).then((e=>e.localStore))}function Ca(e){return Ta(e).then((e=>e.remoteStore))}function Sa(e){return Ta(e).then((e=>e.syncEngine))}async function ka(e){const t=await Ta(e),n=t.eventManager;return n.onListen=jo.bind(null,t.syncEngine),n.onUnlisten=Mo.bind(null,t.syncEngine),n}function Oa(e,t,n={}){const s=new A;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,s,i){const r=new pa({next:r=>{t.enqueueAndForget((()=>wo(e,o)));const c=r.docs.has(n);!c&&r.fromCache?i.reject(new N(O.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&r.fromCache&&s&&"server"===s.source?i.reject(new N(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(r)},error:e=>i.reject(e)}),o=new Io(Xe(n.path),r,{includeMetadataChanges:!0,wo:!0});return _o(e,o)}(await ka(e),e.asyncQueue,t,n,s))),s.promise}function Na(e,t,n={}){const s=new A;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,s,i){const r=new pa({next:n=>{t.enqueueAndForget((()=>wo(e,o))),n.fromCache&&"server"===s.source?i.reject(new N(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Io(n,r,{includeMetadataChanges:!0,wo:!0});return _o(e,o)}(await ka(e),e.asyncQueue,t,n,s))),s.promise}function Aa(e,t,n,s){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new ga(e,t)}(function(e,t){if(e instanceof Uint8Array)return fa(e,t);if(e instanceof ArrayBuffer)return fa(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ns(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const s=k(e);(async function(e,t,n){try{const s=await t.getMetadata();if(await function(e,t){const n=k(e),s=Nn(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Ye.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(s)>=0))}(e.localStore,s))return await t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(s));n._updateProgress(Oo(s));const i=new ko(s,e.localStore,t.k);let r=await t.Ho();for(;r;){const e=await i.yo(r);e&&n._updateProgress(e),r=await t.Ho()}const o=await i.complete();await Yo(e,o.In,void 0),await function(e,t){const n=k(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Ye.saveBundleMetadata(e,t)))}(e.localStore,s),n._completeWith(o.progress)}catch(e){E("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}})(s,t,n).then((()=>{s.sharedClientState.notifyBundleLoaded()}))}(await Sa(e),i,s)}))}class xa{constructor(e,t,n,s,i,r,o,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=c}}class Da{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}const Ra=new Map;function Pa(e,t,n){if(!n)throw new N(O.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ja(e,t,n,s){if(!0===t&&!0===s)throw new N(O.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function La(e){if(!de.isDocumentKey(e))throw new N(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ma(e){if(de.isDocumentKey(e))throw new N(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Fa(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":C()}function qa(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new N(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fa(e);throw new N(O.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ua(e,t){if(t<=0)throw new N(O.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Va{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new N(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new N(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ja("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ba{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Va({}),this._settingsFrozen=!1,e instanceof Da?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new N(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(e.options.projectId)}(e))}get app(){if(!this._app)throw new N(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new N(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Va(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new D;switch(e.type){case"gapi":const t=e.client;return S(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new L(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new N(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ra.get(e);t&&(w("ComponentProvider","Removing Datastore"),Ra.delete(e),t.terminate())}(this),Promise.resolve()}}function Wa(e,t,n,s={}){var i;const r=(e=qa(e,Ba))._getSettings();if("firestore.googleapis.com"!==r.host&&r.host!==t&&E("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},r),{host:`${t}:${n}`,ssl:!1})),s.mockUserToken){let t,n;if("string"==typeof s.mockUserToken)t=s.mockUserToken,n=f.MOCK_USER;else{t=Object(l.k)(s.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const r=s.mockUserToken.sub||s.mockUserToken.user_id;if(!r)throw new N(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new f(r)}e._authCredentials=new R(new x(t,n))}}class Ha{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ha(this.firestore,e,this._key)}}class za{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new za(this.firestore,e,this._query)}}class $a extends za{constructor(e,t,n){super(e,t,Xe(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ha(this.firestore,null,new de(e))}withConverter(e){return new $a(this.firestore,e,this._path)}}function Ka(e,t,...n){if(e=Object(l.r)(e),Pa("collection","path",t),e instanceof Ba){const s=Y.fromString(t,...n);return Ma(s),new $a(e,null,s)}{if(!(e instanceof Ha||e instanceof $a))throw new N(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Y.fromString(t,...n));return Ma(s),new $a(e.firestore,null,s)}}function Ga(e,t){if(e=qa(e,Ba),Pa("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new N(O.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new za(e,null,function(e){return new Ye(Y.emptyPath(),e)}(t))}function Qa(e,t,...n){if(e=Object(l.r)(e),1===arguments.length&&(t=B.A()),Pa("doc","path",t),e instanceof Ba){const s=Y.fromString(t,...n);return La(s),new Ha(e,null,new de(s))}{if(!(e instanceof Ha||e instanceof $a))throw new N(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Y.fromString(t,...n));return La(s),new Ha(e.firestore,e instanceof $a?e.converter:null,new de(s))}}function Ya(e,t){return e=Object(l.r)(e),t=Object(l.r)(t),(e instanceof Ha||e instanceof $a)&&(t instanceof Ha||t instanceof $a)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ja(e,t){return e=Object(l.r)(e),t=Object(l.r)(t),e instanceof za&&t instanceof za&&e.firestore===t.firestore&&ct(e._query,t._query)&&e.converter===t.converter}class Xa{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new As(this,"async_queue_retry"),this.bc=()=>{const e=Os();e&&w("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ur.er()};const e=Os();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=Os();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise((()=>{}));const t=new A;return this.vc((()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.gc.push(e),this.Vc())))}async Vc(){if(0!==this.gc.length){try{await this.gc[0](),this.gc.shift(),this.ur.reset()}catch(e){if(!Rr(e))throw e;w("AsyncQueue","Operation failed with retryable error: "+e)}this.gc.length>0&&this.ur.Zi((()=>this.Vc()))}}vc(e){const t=this.mc.then((()=>(this.Ic=!0,e().catch((e=>{this.Ec=e,this.Ic=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw T("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Ic=!1,e))))));return this.mc=t,t}enqueueAfterDelay(e,t,n){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const s=ho.createAndSchedule(this,e,t,n,(e=>this.Sc(e)));return this.Tc.push(s),s}Pc(){this.Ec&&C()}verifyOperationInProgress(){}async Dc(){let e;do{e=this.mc,await e}while(e!==this.mc)}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then((()=>{this.Tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()}))}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}function Za(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class ec{constructor(){this._progressObserver={},this._taskCompletionResolver=new A,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const tc=-1;class nc extends Ba{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new Xa,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ic(this),this._firestoreClient.terminate()}}function rc(e){return e._firestoreClient||ic(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ic(e){var t;const n=e._freezeSettings(),s=function(e,t,n,s){return new xa(e,t,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new va(e._authCredentials,e._appCheckCredentials,e._queue,s)}function sc(e,t){pc(e=qa(e,nc));const n=rc(e),s=e._freezeSettings(),i=new da;return ac(n,i,new la(i,s.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function oc(e){pc(e=qa(e,nc));const t=rc(e),n=e._freezeSettings(),s=new da;return ac(t,s,new ha(s,n.cacheSizeBytes))}function ac(e,t,n){const s=new A;return e.asyncQueue.enqueue((async()=>{try{await _a(e,n),await wa(e,t),s.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),s.reject(e)}})).then((()=>s.promise))}function cc(e){if(e._initialized&&!e._terminated)throw new N(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new A;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ar.Pt())return Promise.resolve();const t=e+"main";await Ar.delete(t)}(Ui(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function uc(e){return function(e){const t=new A;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=k(e);zs(n.remoteStore)||w("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=k(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.An.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const s=n.jo.get(e)||[];s.push(t),n.jo.set(e,s)}catch(e){const n=fo(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Sa(e),t))),t.promise}(rc(e=qa(e,nc)))}function lc(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Ea(e),n=await Ca(e);return t.setNetworkEnabled(!0),function(e){const t=k(e);return t.Gr.delete(0),Ms(t)}(n)}))}(rc(e=qa(e,nc)))}function hc(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Ea(e),n=await Ca(e);return t.setNetworkEnabled(!1),async function(e){const t=k(e);t.Gr.add(0),await Fs(t),t.Jr.set("Offline")}(n)}))}(rc(e=qa(e,nc)))}function dc(e,t){const n=rc(e=qa(e,nc)),s=new ec;return Aa(n,e._databaseId,t,s),s}function fc(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=k(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Ye.getNamedQuery(e,t)))}(await Ia(e),t)))}(rc(e=qa(e,nc)),t).then((t=>t?new za(e,null,t.query):null))}function pc(e){if(e._initialized||e._terminated)throw new N(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new N(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new X(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mc(te.fromBase64String(e))}catch(e){throw new N(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new mc(te.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yc{constructor(e){this._methodName=e}}class vc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new N(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new N(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}const _c=/^__.*__$/;class wc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Vt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ut(e,this.data,t,this.fieldTransforms)}}class bc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Vt(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw C()}}class Ec{constructor(e,t,n,s,i,r){this.settings=e,this.databaseId=t,this.k=n,this.ignoreUndefinedProperties=s,void 0===i&&this.xc(),this.fieldTransforms=i||[],this.fieldMask=r||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new Ec(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Oc({path:n,Fc:!1});return s.Lc(e),s}Bc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Oc({path:n,Fc:!1});return s.xc(),s}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return Wc(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(Tc(this.$c)&&_c.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class Ic{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=n||Ns(e)}Qc(e,t,n,s=!1){return new Ec({$c:e,methodName:t,jc:n,path:X.emptyPath(),Fc:!1,Kc:s},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Cc(e){const t=e._freezeSettings(),n=Ns(e._databaseId);return new Ic(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sc(e,t,n,s,i,r={}){const o=e.Qc(r.merge||r.mergeFields?2:0,t,n,i);qc("Data must be an object, but it was:",o,s);const c=Mc(s,o);let a,u;if(r.merge)a=new Z(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const e=[];for(const s of r.mergeFields){const i=Uc(t,s,n);if(!o.contains(i))throw new N(O.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Hc(e,i)||e.push(i)}a=new Z(e),u=o.fieldTransforms.filter((e=>a.covers(e.field)))}else a=null,u=o.fieldTransforms;return new wc(new ke(c),a,u)}class kc extends yc{_toFieldTransform(e){if(2!==e.$c)throw 1===e.$c?e.qc(`${this._methodName}() can only appear at the top level of your update data`):e.qc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kc}}function Oc(e,t,n){return new Ec({$c:3,jc:t.settings.jc,methodName:e._methodName,Fc:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}class Nc extends yc{_toFieldTransform(e){return new At(e.path,new Tt)}isEqual(e){return e instanceof Nc}}class Ac extends yc{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=Oc(this,e,!0),n=this.Wc.map((e=>Lc(e,t))),s=new Et(n);return new At(e.path,s)}isEqual(e){return this===e}}class xc extends yc{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=Oc(this,e,!0),n=this.Wc.map((e=>Lc(e,t))),s=new Ct(n);return new At(e.path,s)}isEqual(e){return this===e}}class Dc extends yc{constructor(e,t){super(e),this.Gc=t}_toFieldTransform(e){const t=new kt(e.k,yt(e.k,this.Gc));return new At(e.path,t)}isEqual(e){return this===e}}function Rc(e,t,n,s){const i=e.Qc(1,t,n);qc("Data must be an object, but it was:",i,s);const r=[],o=ke.empty();G(s,((e,s)=>{const c=Bc(t,e,n);s=Object(l.r)(s);const a=i.Bc(c);if(s instanceof kc)r.push(c);else{const e=Lc(s,a);null!=e&&(r.push(c),o.set(c,e))}}));const c=new Z(r);return new bc(o,c,i.fieldTransforms)}function Pc(e,t,n,s,i,r){const o=e.Qc(1,t,n),c=[Uc(t,s,n)],a=[i];if(r.length%2!=0)throw new N(O.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<r.length;e+=2)c.push(Uc(t,r[e])),a.push(r[e+1]);const u=[],h=ke.empty();for(let e=c.length-1;e>=0;--e)if(!Hc(u,c[e])){const t=c[e];let n=a[e];n=Object(l.r)(n);const s=o.Bc(t);if(n instanceof kc)u.push(t);else{const e=Lc(n,s);null!=e&&(u.push(t),h.set(t,e))}}const d=new Z(u);return new bc(h,d,o.fieldTransforms)}function jc(e,t,n,s=!1){return Lc(n,e.Qc(s?4:3,t))}function Lc(e,t){if(Fc(e=Object(l.r)(e)))return qc("Unsupported field value:",t,e),Mc(e,t);if(e instanceof yc)return function(e,t){if(!Tc(t.$c))throw t.qc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.qc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.$c)throw t.qc("Nested arrays are not supported");return function(e,t){const n=[];let s=0;for(const i of e){let e=Lc(i,t.Uc(s));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),s++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(l.r)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yt(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=z.fromDate(e);return{timestampValue:Sn(t.k,n)}}if(e instanceof z){const n=new z(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sn(t.k,n)}}if(e instanceof vc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mc)return{bytesValue:kn(t.k,e._byteString)};if(e instanceof Ha){const n=t.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw t.qc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:An(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.qc(`Unsupported field value: ${Fa(e)}`)}(e,t)}function Mc(e,t){const n={};return Q(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):G(e,((e,s)=>{const i=Lc(s,t.Mc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Fc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof z||e instanceof vc||e instanceof mc||e instanceof Ha||e instanceof yc)}function qc(e,t,n){if(!Fc(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const s=Fa(n);throw"an object"===s?t.qc(e+" a custom object"):t.qc(e+" "+s)}}function Uc(e,t,n){if((t=Object(l.r)(t))instanceof gc)return t._internalPath;if("string"==typeof t)return Bc(e,t);throw Wc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Vc=new RegExp("[~\\*/\\[\\]]");function Bc(e,t,n){if(t.search(Vc)>=0)throw Wc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new gc(...t.split("."))._internalPath}catch(r){throw Wc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Wc(e,t,n,s,i){const r=s&&!s.isEmpty(),o=void 0!==i;let c=`Function ${t}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let a="";return(r||o)&&(a+=" (found",r&&(a+=` in field ${s}`),o&&(a+=` in document ${i}`),a+=")"),new N(O.INVALID_ARGUMENT,c+e+a)}function Hc(e,t){return e.some((e=>e.isEqual(t)))}class zc{constructor(e,t,n,s,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ha(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $c(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $c extends zc{data(){return super.data()}}function Kc(e,t){return"string"==typeof t?Bc(e,t):t instanceof gc?t._internalPath:t._delegate._internalPath}class Gc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qc extends zc{constructor(e,t,n,s,i,r){super(e,t,n,s,r),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Kc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Yc extends Qc{data(e={}){return super.data(e)}}class Jc{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Gc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Yc(this._firestore,this._userDataWriter,n.key,n,new Gc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new N(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new Yc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Gc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const s=new Yc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,r=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),r=n.indexOf(t.doc.key)),{type:Xc(t.type),doc:s,oldIndex:i,newIndex:r}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Xc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return C()}}function Zc(e,t){return e instanceof Qc&&t instanceof Qc?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Jc&&t instanceof Jc&&e._firestore===t._firestore&&Ja(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function eu(e){if(et(e)&&0===e.explicitOrderBy.length)throw new N(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tu{}function nu(e,...t){for(const n of t)e=n._apply(e);return e}class ru extends tu{constructor(e,t,n){super(),this.zc=e,this.Hc=t,this.Jc=n,this.type="where"}_apply(e){const t=Cc(e.firestore),n=function(e,t,n,s,i,r,o){let c;if(i.isKeyField()){if("array-contains"===r||"array-contains-any"===r)throw new N(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${r}' queries on documentId().`);if("in"===r||"not-in"===r){yu(o,r);const t=[];for(const n of o)t.push(mu(s,e,n));c={arrayValue:{values:t}}}else c=mu(s,e,o)}else"in"!==r&&"not-in"!==r&&"array-contains-any"!==r||yu(o,r),c=jc(n,"where",o,"in"===r||"not-in"===r);const a=je.create(i,r,c);return function(e,t){if(t.V()){const n=nt(e);if(null!==n&&!n.isEqual(t.field))throw new N(O.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const s=tt(e);null!==s&&vu(e,t.field,s)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new N(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new N(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,a),a}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new za(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Ye(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}function iu(e,t,n){const s=t,i=Kc("where",e);return new ru(i,s,n)}class su extends tu{constructor(e,t){super(),this.zc=e,this.Yc=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new N(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new N(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const s=new $e(t,n);return function(e,t){if(null===tt(e)){const n=nt(e);null!==n&&vu(e,n,t.field)}}(e,s),s}(e._query,this.zc,this.Yc);return new za(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ye(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ou(e,t="asc"){const n=t,s=Kc("orderBy",e);return new su(s,n)}class au extends tu{constructor(e,t,n){super(),this.type=e,this.Xc=t,this.Zc=n}_apply(e){return new za(e.firestore,e.converter,at(e._query,this.Xc,this.Zc))}}function cu(e){return Ua("limit",e),new au("limit",e,"F")}function uu(e){return Ua("limitToLast",e),new au("limitToLast",e,"L")}class lu extends tu{constructor(e,t,n){super(),this.type=e,this.ta=t,this.ea=n}_apply(e){const t=gu(e,this.type,this.ta,this.ea);return new za(e.firestore,e.converter,function(e,t){return new Ye(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function hu(...e){return new lu("startAt",e,!0)}function du(...e){return new lu("startAfter",e,!1)}class th extends tu{constructor(e,t,n){super(),this.type=e,this.ta=t,this.ea=n}_apply(e){const t=gu(e,this.type,this.ta,this.ea);return new za(e.firestore,e.converter,function(e,t){return new Ye(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function fu(...e){return new th("endBefore",e,!0)}function pu(...e){return new th("endAt",e,!1)}function gu(e,t,n,s){if(n[0]=Object(l.r)(n[0]),n[0]instanceof zc)return function(e,t,n,s,i){if(!s)throw new N(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const r=[];for(const n of st(e))if(n.field.isKeyField())r.push(we(t,s.key));else{const e=s.data.field(n.field);if(oe(e))throw new N(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new N(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}r.push(e)}return new He(r,i)}(e._query,e.firestore._databaseId,t,n[0]._document,s);{const i=Cc(e.firestore);return function(e,t,n,s,i,r){const o=e.explicitOrderBy;if(i.length>o.length)throw new N(O.INVALID_ARGUMENT,`Too many arguments provided to ${s}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const c=[];for(let r=0;r<i.length;r++){const a=i[r];if(o[r].field.isKeyField()){if("string"!=typeof a)throw new N(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${s}(), but got a ${typeof a}`);if(!it(e)&&-1!==a.indexOf("/"))throw new N(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${s}() must be a plain document ID, but '${a}' contains a slash.`);const n=e.path.child(Y.fromString(a));if(!de.isDocumentKey(n))throw new N(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${s}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new de(n);c.push(we(t,i))}else{const e=jc(n,s,a);c.push(e)}}return new He(c,r)}(e._query,e.firestore._databaseId,i,t,n,s)}}function mu(e,t,n){if("string"==typeof(n=Object(l.r)(n))){if(""===n)throw new N(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!it(t)&&-1!==n.indexOf("/"))throw new N(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Y.fromString(n));if(!de.isDocumentKey(s))throw new N(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return we(e,new de(s))}if(n instanceof Ha)return we(e,n._key);throw new N(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fa(n)}.`)}function yu(e,t){if(!Array.isArray(e)||0===e.length)throw new N(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new N(O.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function vu(e,t,n){if(!n.isEqual(t))throw new N(O.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class _u{convertValue(e,t="none"){switch(fe(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(se(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw C()}}convertObject(e,t){const n={};return G(e.fields,((e,s)=>{n[e]=this.convertValue(s,t)})),n}convertGeoPoint(e){return new vc(ie(e.latitude),ie(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ae(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ce(e));default:return null}}convertTimestamp(e){const t=re(e);return new z(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Y.fromString(e);S(nr(n));const s=new Da(n.get(1),n.get(3)),i=new de(n.popFirst(5));return s.isEqual(t)||T(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function wu(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class bu extends _u{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ha(this.firestore,null,t)}}class Tu{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cc(e)}set(e,t,n){this._verifyNotCommitted();const s=Eu(e,this._firestore),i=wu(s.converter,t,n),r=Sc(this._dataReader,"WriteBatch.set",s._key,i,null!==s.converter,n);return this._mutations.push(r.toMutation(s._key,Dt.none())),this}update(e,t,n,...s){this._verifyNotCommitted();const i=Eu(e,this._firestore);let r;return r="string"==typeof(t=Object(l.r)(t))||t instanceof gc?Pc(this._dataReader,"WriteBatch.update",i._key,t,n,s):Rc(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Dt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Eu(e,this._firestore);return this._mutations=this._mutations.concat(new zt(t._key,Dt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new N(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eu(e,t){if((e=Object(l.r)(e)).firestore!==t)throw new N(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Iu(e){e=qa(e,Ha);const t=qa(e.firestore,nc);return Oa(rc(t),e._key).then((n=>Fu(t,e,n)))}class Cu extends _u{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ha(this.firestore,null,t)}}function Su(e){e=qa(e,Ha);const t=qa(e.firestore,nc),n=rc(t),s=new Cu(t);return function(e,t){const n=new A;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const s=await function(e,t){const n=k(e);return n.persistence.runTransaction("read document","readonly",(e=>n.Wn.Rn(e,t)))}(e,t);s.isFoundDocument()?n.resolve(s):s.isNoDocument()?n.resolve(null):n.reject(new N(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const s=fo(e,`Failed to get document '${t} from cache`);n.reject(s)}}(await Ia(e),t,n))),n.promise}(n,e._key).then((n=>new Qc(t,s,e._key,n,new Gc(null!==n&&n.hasLocalMutations,!0),e.converter)))}function ku(e){e=qa(e,Ha);const t=qa(e.firestore,nc);return Oa(rc(t),e._key,{source:"server"}).then((n=>Fu(t,e,n)))}function Ou(e){e=qa(e,za);const t=qa(e.firestore,nc),n=rc(t),s=new Cu(t);return eu(e._query),Na(n,e._query).then((n=>new Jc(t,s,e,n)))}function Nu(e){e=qa(e,za);const t=qa(e.firestore,nc),n=rc(t),s=new Cu(t);return function(e,t){const n=new A;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const s=await Xi(e,t,!0),i=new xo(t,s.zn),r=i.Po(s.documents),o=i.applyChanges(r,!1);n.resolve(o.snapshot)}catch(e){const s=fo(e,`Failed to execute query '${t} against cache`);n.reject(s)}}(await Ia(e),t,n))),n.promise}(n,e._query).then((n=>new Jc(t,s,e,n)))}function Au(e){e=qa(e,za);const t=qa(e.firestore,nc),n=rc(t),s=new Cu(t);return Na(n,e._query,{source:"server"}).then((n=>new Jc(t,s,e,n)))}function xu(e,t,n){e=qa(e,Ha);const s=qa(e.firestore,nc),i=wu(e.converter,t,n);return Mu(s,[Sc(Cc(s),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Dt.none())])}function Du(e,t,n,...s){e=qa(e,Ha);const i=qa(e.firestore,nc),r=Cc(i);let o;return o="string"==typeof(t=Object(l.r)(t))||t instanceof gc?Pc(r,"updateDoc",e._key,t,n,s):Rc(r,"updateDoc",e._key,t),Mu(i,[o.toMutation(e._key,Dt.exists(!0))])}function Ru(e){return Mu(qa(e.firestore,nc),[new zt(e._key,Dt.none())])}function Pu(e,t){const n=qa(e.firestore,nc),s=Qa(e),i=wu(e.converter,t);return Mu(n,[Sc(Cc(e.firestore),"addDoc",s._key,i,null!==e.converter,{}).toMutation(s._key,Dt.exists(!1))]).then((()=>s))}function ju(e,...t){var n,s,i;e=Object(l.r)(e);let r={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Za(t[o])||(r=t[o],o++);const c={includeMetadataChanges:r.includeMetadataChanges};if(Za(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let a,u,h;if(e instanceof Ha)u=qa(e.firestore,nc),h=Xe(e._key.path),a={next:n=>{t[o]&&t[o](Fu(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=qa(e,za);u=qa(n.firestore,nc),h=n._query;const s=new Cu(u);a={next:e=>{t[o]&&t[o](new Jc(u,s,n,e))},error:t[o+1],complete:t[o+2]},eu(e._query)}return function(e,t,n,s){const i=new pa(s),r=new Io(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>_o(await ka(e),r))),()=>{i.nc(),e.asyncQueue.enqueueAndForget((async()=>wo(await ka(e),r)))}}(rc(u),h,c,a)}function Lu(e,t){return function(e,t){const n=new pa(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){k(e).io.add(t),t.next()}(await ka(e),n))),()=>{n.nc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){k(e).io.delete(t)}(await ka(e),n)))}}(rc(e=qa(e,nc)),Za(t)?t:{next:t})}function Mu(e,t){return function(e,t){const n=new A;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const s=ca(e);try{const e=await function(e,t){const n=k(e),s=z.now(),i=t.reduce(((e,t)=>e.add(t.key)),hn());let r;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.Wn.vn(e,i).next((i=>{r=i;const o=[];for(const e of t){const t=Mt(e,r.get(e.key));null!=t&&o.push(new Vt(e.key,t,Oe(t.value.mapValue),Dt.exists(!0)))}return n.An.addMutationBatch(e,s,o,t)})))).then((e=>(e.applyToLocalDocumentSet(r),{batchId:e.batchId,changes:r})))}(s.localStore,t);s.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let s=e.Ko[e.currentUser.toKey()];s||(s=new Xt(rt)),s=s.insert(t,n),e.Ko[e.currentUser.toKey()]=s}(s,e.batchId,n),await Yo(s,e.changes),await Xs(s.remoteStore)}catch(e){const t=fo(e,"Failed to persist write");n.reject(t)}}(await Sa(e),t,n))),n.promise}(rc(e),t)}function Fu(e,t,n){const s=n.docs.get(t._key),i=new Cu(e);return new Qc(e,i,t._key,s,new Gc(n.hasPendingWrites,n.fromCache),t.converter)}class qu extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cc(e)}get(e){const t=Eu(e,this._firestore),n=new bu(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return C();const s=e[0];if(s.isFoundDocument())return new zc(this._firestore,n,s.key,s,t.converter);if(s.isNoDocument())return new zc(this._firestore,n,t._key,null,t.converter);throw C()}))}set(e,t,n){const s=Eu(e,this._firestore),i=wu(s.converter,t,n),r=Sc(this._dataReader,"Transaction.set",s._key,i,null!==s.converter,n);return this._transaction.set(s._key,r),this}update(e,t,n,...s){const i=Eu(e,this._firestore);let r;return r="string"==typeof(t=Object(l.r)(t))||t instanceof gc?Pc(this._dataReader,"Transaction.update",i._key,t,n,s):Rc(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}delete(e){const t=Eu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Eu(e,this._firestore),n=new Cu(this._firestore);return super.get(e).then((e=>new Qc(this._firestore,n,t._key,e._document,new Gc(!1,!1),t.converter)))}}function Uu(e,t){return function(e,t){const n=new A;return e.asyncQueue.enqueueAndForget((async()=>{const s=await function(e){return Ta(e).then((e=>e.datastore))}(e);new ya(e.asyncQueue,s,t,n).run()})),n.promise}(rc(e=qa(e,nc)),(n=>t(new qu(e,n))))}function Vu(){return new kc("deleteField")}function Bu(){return new Nc("serverTimestamp")}function Wu(...e){return new Ac("arrayUnion",e)}function Hu(...e){return new xc("arrayRemove",e)}function zu(e){return new Dc("increment",e)}!function(e,t=!0){!function(e){m=e}(r.SDK_VERSION),Object(r._registerComponent)(new o.a("firestore",((e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=new nc(s,new P(e.getProvider("auth-internal")),new F(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i}),"PUBLIC")),Object(r.registerVersion)(d,"3.4.4",e),Object(r.registerVersion)(d,"3.4.4","esm2017")}()}).call(this,n(109))},242:function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},251:function(e,t,n){"use strict";(function(e){var t=n(28),r=n(1),o=n(13),c=n(0);function l(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function h(e=Object(c.s)()){return!("file:"!==l()&&"ionic:"!==l()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function d(e=Object(c.s)()){return Object(c.y)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=Object(c.s)()){return/Edge\/\d+/.test(e)}(e)}function f(){try{const e=self.localStorage,t=r.s();if(e)return e.setItem(t,"1"),e.removeItem(t),!d()||Object(c.z)()}catch(e){return m()&&Object(c.z)()}return!1}function m(){return void 0!==e&&"WorkerGlobalScope"in e&&"importScripts"in e}function y(){return("http:"===l()||"https:"===l()||Object(c.v)()||h())&&!(Object(c.D)()||Object(c.B)())&&f()&&!m()}function v(){return h()&&"undefined"!=typeof document}const _={LOCAL:"local",NONE:"none",SESSION:"session"},w=r.p,T="persistence";async function E(e){await e._initializationPromise;const t=I(),n=r.v(T,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function I(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}const C=r.p;class S{constructor(){this.browserResolver=r.t(r.z),this.cordovaResolver=r.t(r.E),this.underlyingResolver=null,this._redirectPersistence=r.A,this._completeRedirectFn=r.u}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return v()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return C(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!v()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function k(object){return object.unwrap()}function O(object){const{_tokenResponse:e}=object instanceof c.c?object.customData:object;if(!e)return null;if(!(object instanceof c.c)&&"temporaryProof"in e&&"phoneNumber"in e)return r.i.credentialFromResult(object);const t=e.providerId;if(!t||t===r.k.PASSWORD)return null;let n;switch(t){case r.k.GOOGLE:n=r.f;break;case r.k.FACEBOOK:n=r.d;break;case r.k.GITHUB:n=r.e;break;case r.k.TWITTER:n=r.o;break;default:const{oauthIdToken:o,oauthAccessToken:c,oauthTokenSecret:l,pendingToken:h,nonce:d}=e;return c||l||o||h?h?t.startsWith("saml.")?r.m._create(t,h):r.g._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:o,accessToken:c}):new r.h(t).credential({idToken:o,accessToken:c,rawNonce:d}):null}return object instanceof c.c?n.credentialFromError(object):n.credentialFromResult(object)}function N(e,t){return t.catch((t=>{throw t instanceof c.c&&function(e,t){var n;const o=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new x(e,r.J(e,t));else if(o){const e=O(t),n=t;e&&(n.credential=e,n.tenantId=o.tenantId||void 0,n.email=o.email||void 0,n.phoneNumber=o.phoneNumber||void 0)}}(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(o=e,O(o)),additionalUserInfo:r.I(e),user:D.getOrCreate(n)};var o}))}async function A(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>N(e,n.confirm(t))}}class x{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return N(k(this.auth),this.resolver.resolveSignIn(e))}}class D{constructor(e){this._delegate=e,this.multiFactor=r.S(e)}static getOrCreate(e){return D.USER_MAP.has(e)||D.USER_MAP.set(e,new D(e)),D.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return N(this.auth,r.O(this._delegate,e))}async linkWithPhoneNumber(e,t){return A(this.auth,r.P(this._delegate,e,t))}async linkWithPopup(e){return N(this.auth,r.Q(this._delegate,e,S))}async linkWithRedirect(e){return await E(r.q(this.auth)),r.R(this._delegate,e,S)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return N(this.auth,r.T(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return A(this.auth,r.U(this._delegate,e,t))}reauthenticateWithPopup(e){return N(this.auth,r.V(this._delegate,e,S))}async reauthenticateWithRedirect(e){return await E(r.q(this.auth)),r.W(this._delegate,e,S)}sendEmailVerification(e){return r.X(this._delegate,e)}async unlink(e){return await r.ib(this._delegate,e),this}updateEmail(e){return r.jb(this._delegate,e)}updatePassword(e){return r.kb(this._delegate,e)}updatePhoneNumber(e){return r.lb(this._delegate,e)}updateProfile(e){return r.mb(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return r.nb(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}D.USER_MAP=new WeakMap;const R=r.p;class P{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;R(n,"invalid-api-key",{appName:e.name}),R(n,"invalid-api-key",{appName:e.name});const o="undefined"!=typeof window?S:void 0;this._delegate=t.initialize({options:{persistence:L(n,e.name),popupRedirectResolver:o}}),this._delegate._updateErrorMap(r.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?D.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){r.D(this._delegate,e,t)}applyActionCode(code){return r.x(this._delegate,code)}checkActionCode(code){return r.B(this._delegate,code)}confirmPasswordReset(code,e){return r.C(this._delegate,code,e)}async createUserWithEmailAndPassword(e,t){return N(this._delegate,r.F(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return r.H(this._delegate,e)}isSignInWithEmailLink(e){return r.N(this._delegate,e)}async getRedirectResult(){R(y(),this._delegate,"operation-not-supported-in-this-environment");const e=await r.K(this._delegate,S);return e?N(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){r.w(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:o,complete:c}=j(e,t,n);return this._delegate.onAuthStateChanged(r,o,c)}onIdTokenChanged(e,t,n){const{next:r,error:o,complete:c}=j(e,t,n);return this._delegate.onIdTokenChanged(r,o,c)}sendSignInLinkToEmail(e,t){return r.Z(this._delegate,e,t)}sendPasswordResetEmail(e,t){return r.Y(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){w(Object.values(_).includes(t),e,"invalid-persistence-type"),Object(c.D)()?w(t!==_.SESSION,e,"unsupported-persistence-type"):Object(c.B)()?w(t===_.NONE,e,"unsupported-persistence-type"):m()?w(t===_.NONE||t===_.LOCAL&&Object(c.z)(),e,"unsupported-persistence-type"):w(t===_.NONE||f(),e,"unsupported-persistence-type")}(this._delegate,e),e){case _.SESSION:t=r.A;break;case _.LOCAL:t=await r.t(r.M)._isAvailable()?r.M:r.y;break;case _.NONE:t=r.L;break;default:return r.r("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return N(this._delegate,r.ab(this._delegate))}signInWithCredential(e){return N(this._delegate,r.bb(this._delegate,e))}signInWithCustomToken(e){return N(this._delegate,r.cb(this._delegate,e))}signInWithEmailAndPassword(e,t){return N(this._delegate,r.db(this._delegate,e,t))}signInWithEmailLink(e,t){return N(this._delegate,r.eb(this._delegate,e,t))}signInWithPhoneNumber(e,t){return A(this._delegate,r.fb(this._delegate,e,t))}async signInWithPopup(e){return R(y(),this._delegate,"operation-not-supported-in-this-environment"),N(this._delegate,r.gb(this._delegate,e,S))}async signInWithRedirect(e){return R(y(),this._delegate,"operation-not-supported-in-this-environment"),await E(this._delegate),r.hb(this._delegate,e,S)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(code){return r.ob(this._delegate,code)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function j(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const o=r;return{next:e=>o(e&&D.getOrCreate(e)),error:t,complete:n}}function L(e,t){const n=function(e,t){const n=I();if(!n)return[];const o=r.v(T,e,t);switch(n.getItem(o)){case _.NONE:return[r.L];case _.LOCAL:return[r.M,r.A];case _.SESSION:return[r.A];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(r.M)||n.push(r.M),"undefined"!=typeof window)for(const e of[r.y,r.A])n.includes(e)||n.push(e);return n.includes(r.L)||n.push(r.L),n}P.Persistence=_;class M{constructor(){this.providerId="phone",this._delegate=new r.i(k(t.a.auth()))}static credential(e,t){return r.i.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}M.PHONE_SIGN_IN_METHOD=r.i.PHONE_SIGN_IN_METHOD,M.PROVIDER_ID=r.i.PROVIDER_ID;const F=r.p;class U{constructor(e,n,o=t.a.app()){var c;F(null===(c=o.options)||void 0===c?void 0:c.apiKey,"invalid-api-key",{appName:o.name}),this._delegate=new r.l(e,n,o.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var V;(V=t.a).INTERNAL.registerComponent(new o.a("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new P(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:r.a.EMAIL_SIGNIN,PASSWORD_RESET:r.a.PASSWORD_RESET,RECOVER_EMAIL:r.a.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:r.a.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:r.a.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:r.a.VERIFY_EMAIL}},EmailAuthProvider:r.c,FacebookAuthProvider:r.d,GithubAuthProvider:r.e,GoogleAuthProvider:r.f,OAuthProvider:r.h,SAMLAuthProvider:r.n,PhoneAuthProvider:M,PhoneMultiFactorGenerator:r.j,RecaptchaVerifier:U,TwitterAuthProvider:r.o,Auth:P,AuthCredential:r.b,Error:c.c}).setInstantiationMode("LAZY").setMultipleInstances(!1)),V.registerVersion("@firebase/auth-compat","0.2.8")}).call(this,n(30))},270:function(e,t,n){!function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t),c=r(n);function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(){return d=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},d.apply(this,arguments)}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,m(e,t)}function m(e,p){return m=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},m(e,p)}var y="transitionend",v=1e6,_=1e3;function w(e){return null==e?""+e:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}function T(){return{bindType:y,delegateType:y,handle:function(e){if(o.default(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}}function E(e){var t=this,n=!1;return o.default(this).one(C.TRANSITION_END,(function(){n=!0})),setTimeout((function(){n||C.triggerTransitionEnd(t)}),e),this}function I(){o.default.fn.emulateTransitionEnd=E,o.default.event.special[C.TRANSITION_END]=T()}var C={TRANSITION_END:"bsTransitionEnd",getUID:function(e){do{e+=~~(Math.random()*v)}while(document.getElementById(e));return e},getSelectorFromElement:function(element){var e=element.getAttribute("data-target");if(!e||"#"===e){var t=element.getAttribute("href");e=t&&"#"!==t?t.trim():""}try{return document.querySelector(e)?e:null}catch(e){return null}},getTransitionDurationFromElement:function(element){if(!element)return 0;var e=o.default(element).css("transition-duration"),t=o.default(element).css("transition-delay"),n=parseFloat(e),r=parseFloat(t);return n||r?(e=e.split(",")[0],t=t.split(",")[0],(parseFloat(e)+parseFloat(t))*_):0},reflow:function(element){return element.offsetHeight},triggerTransitionEnd:function(element){o.default(element).trigger(y)},supportsTransitionEnd:function(){return Boolean(y)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r],c=t[r],l=c&&C.isElement(c)?"element":w(c);if(!new RegExp(o).test(l))throw new Error(e.toUpperCase()+': Option "'+r+'" provided type "'+l+'" but expected type "'+o+'".')}},findShadowRoot:function(element){if(!document.documentElement.attachShadow)return null;if("function"==typeof element.getRootNode){var e=element.getRootNode();return e instanceof ShadowRoot?e:null}return element instanceof ShadowRoot?element:element.parentNode?C.findShadowRoot(element.parentNode):null},jQueryDetection:function(){if(void 0===o.default)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=o.default.fn.jquery.split(" ")[0].split("."),t=1,n=2,r=9,c=1,l=4;if(e[0]<n&&e[1]<r||e[0]===t&&e[1]===r&&e[2]<c||e[0]>=l)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};C.jQueryDetection(),I();var S="alert",k="4.6.1",O="bs.alert",N="."+O,A=".data-api",x=o.default.fn[S],D="alert",R="fade",P="show",j="close"+N,L="closed"+N,M="click"+N+A,F='[data-dismiss="alert"]',U=function(){function e(element){this._element=element}var t=e.prototype;return t.close=function(element){var e=this._element;element&&(e=this._getRootElement(element)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){o.default.removeData(this._element,O),this._element=null},t._getRootElement=function(element){var e=C.getSelectorFromElement(element),t=!1;return e&&(t=document.querySelector(e)),t||(t=o.default(element).closest("."+D)[0]),t},t._triggerCloseEvent=function(element){var e=o.default.Event(j);return o.default(element).trigger(e),e},t._removeElement=function(element){var e=this;if(o.default(element).removeClass(P),o.default(element).hasClass(R)){var t=C.getTransitionDurationFromElement(element);o.default(element).one(C.TRANSITION_END,(function(t){return e._destroyElement(element,t)})).emulateTransitionEnd(t)}else this._destroyElement(element)},t._destroyElement=function(element){o.default(element).detach().trigger(L).remove()},e._jQueryInterface=function(t){return this.each((function(){var n=o.default(this),data=n.data(O);data||(data=new e(this),n.data(O,data)),"close"===t&&data[t](this)}))},e._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},h(e,null,[{key:"VERSION",get:function(){return k}}]),e}();o.default(document).on(M,F,U._handleDismiss(new U)),o.default.fn[S]=U._jQueryInterface,o.default.fn[S].Constructor=U,o.default.fn[S].noConflict=function(){return o.default.fn[S]=x,U._jQueryInterface};var V="button",B="4.6.1",W="bs.button",H="."+W,z=".data-api",$=o.default.fn[V],K="active",G="btn",Q="focus",Y="click"+H+z,J="focus"+H+z+" blur"+H+z,X="load"+H+z,Z='[data-toggle^="button"]',ee='[data-toggle="buttons"]',te='[data-toggle="button"]',ne='[data-toggle="buttons"] .btn',re='input:not([type="hidden"])',ie=".active",se=".btn",oe=function(){function e(element){this._element=element,this.shouldAvoidTriggerChange=!1}var t=e.prototype;return t.toggle=function(){var e=!0,t=!0,n=o.default(this._element).closest(ee)[0];if(n){var input=this._element.querySelector(re);if(input){if("radio"===input.type)if(input.checked&&this._element.classList.contains(K))e=!1;else{var r=n.querySelector(ie);r&&o.default(r).removeClass(K)}e&&("checkbox"!==input.type&&"radio"!==input.type||(input.checked=!this._element.classList.contains(K)),this.shouldAvoidTriggerChange||o.default(input).trigger("change")),input.focus(),t=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(t&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(K)),e&&o.default(this._element).toggleClass(K))},t.dispose=function(){o.default.removeData(this._element,W),this._element=null},e._jQueryInterface=function(t,n){return this.each((function(){var r=o.default(this),data=r.data(W);data||(data=new e(this),r.data(W,data)),data.shouldAvoidTriggerChange=n,"toggle"===t&&data[t]()}))},h(e,null,[{key:"VERSION",get:function(){return B}}]),e}();o.default(document).on(Y,Z,(function(e){var button=e.target,t=button;if(o.default(button).hasClass(G)||(button=o.default(button).closest(se)[0]),!button||button.hasAttribute("disabled")||button.classList.contains("disabled"))e.preventDefault();else{var n=button.querySelector(re);if(n&&(n.hasAttribute("disabled")||n.classList.contains("disabled")))return void e.preventDefault();"INPUT"!==t.tagName&&"LABEL"===button.tagName||oe._jQueryInterface.call(o.default(button),"toggle","INPUT"===t.tagName)}})).on(J,Z,(function(e){var button=o.default(e.target).closest(se)[0];o.default(button).toggleClass(Q,/^focus(in)?$/.test(e.type))})),o.default(window).on(X,(function(){for(var e=[].slice.call(document.querySelectorAll(ne)),i=0,t=e.length;i<t;i++){var button=e[i],input=button.querySelector(re);input.checked||input.hasAttribute("checked")?button.classList.add(K):button.classList.remove(K)}for(var n=0,r=(e=[].slice.call(document.querySelectorAll(te))).length;n<r;n++){var o=e[n];"true"===o.getAttribute("aria-pressed")?o.classList.add(K):o.classList.remove(K)}})),o.default.fn[V]=oe._jQueryInterface,o.default.fn[V].Constructor=oe,o.default.fn[V].noConflict=function(){return o.default.fn[V]=$,oe._jQueryInterface};var ae="carousel",ce="4.6.1",ue="bs.carousel",le="."+ue,he=".data-api",de=o.default.fn[ae],fe=37,pe=39,ge=500,me=40,ye="carousel",ve="active",_e="slide",we="carousel-item-right",be="carousel-item-left",Te="carousel-item-next",Ee="carousel-item-prev",Ie="pointer-event",Ce="next",Se="prev",ke="left",Oe="right",Ne="slide"+le,Ae="slid"+le,xe="keydown"+le,De="mouseenter"+le,Re="mouseleave"+le,Pe="touchstart"+le,je="touchmove"+le,Le="touchend"+le,Me="pointerdown"+le,Fe="pointerup"+le,qe="dragstart"+le,Ue="load"+le+he,Ve="click"+le+he,Be=".active",We=".active.carousel-item",He=".carousel-item",ze=".carousel-item img",$e=".carousel-item-next, .carousel-item-prev",Ke=".carousel-indicators",Ge="[data-slide], [data-slide-to]",Qe='[data-ride="carousel"]',Ye={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Je={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Xe={TOUCH:"touch",PEN:"pen"},Ze=function(){function e(element,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=element,this._indicatorsElement=this._element.querySelector(Ke),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var t=e.prototype;return t.next=function(){this._isSliding||this._slide(Ce)},t.nextWhenVisible=function(){var e=o.default(this._element);!document.hidden&&e.is(":visible")&&"hidden"!==e.css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(Se)},t.pause=function(e){e||(this._isPaused=!0),this._element.querySelector($e)&&(C.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(e){var t=this;this._activeElement=this._element.querySelector(We);var n=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)o.default(this._element).one(Ae,(function(){return t.to(e)}));else{if(n===e)return this.pause(),void this.cycle();var r=e>n?Ce:Se;this._slide(r,this._items[e])}},t.dispose=function(){o.default(this._element).off(le),o.default.removeData(this._element,ue),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(e){return e=d({},Ye,e),C.typeCheckConfig(ae,e,Je),e},t._handleSwipe=function(){var e=Math.abs(this.touchDeltaX);if(!(e<=me)){var t=e/this.touchDeltaX;this.touchDeltaX=0,t>0&&this.prev(),t<0&&this.next()}},t._addEventListeners=function(){var e=this;this._config.keyboard&&o.default(this._element).on(xe,(function(t){return e._keydown(t)})),"hover"===this._config.pause&&o.default(this._element).on(De,(function(t){return e.pause(t)})).on(Re,(function(t){return e.cycle(t)})),this._config.touch&&this._addTouchEventListeners()},t._addTouchEventListeners=function(){var e=this;if(this._touchSupported){var t=function(t){e._pointerEvent&&Xe[t.originalEvent.pointerType.toUpperCase()]?e.touchStartX=t.originalEvent.clientX:e._pointerEvent||(e.touchStartX=t.originalEvent.touches[0].clientX)},n=function(t){e.touchDeltaX=t.originalEvent.touches&&t.originalEvent.touches.length>1?0:t.originalEvent.touches[0].clientX-e.touchStartX},r=function(t){e._pointerEvent&&Xe[t.originalEvent.pointerType.toUpperCase()]&&(e.touchDeltaX=t.originalEvent.clientX-e.touchStartX),e._handleSwipe(),"hover"===e._config.pause&&(e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout((function(t){return e.cycle(t)}),ge+e._config.interval))};o.default(this._element.querySelectorAll(ze)).on(qe,(function(e){return e.preventDefault()})),this._pointerEvent?(o.default(this._element).on(Me,(function(e){return t(e)})),o.default(this._element).on(Fe,(function(e){return r(e)})),this._element.classList.add(Ie)):(o.default(this._element).on(Pe,(function(e){return t(e)})),o.default(this._element).on(je,(function(e){return n(e)})),o.default(this._element).on(Le,(function(e){return r(e)})))}},t._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case fe:e.preventDefault(),this.prev();break;case pe:e.preventDefault(),this.next()}},t._getItemIndex=function(element){return this._items=element&&element.parentNode?[].slice.call(element.parentNode.querySelectorAll(He)):[],this._items.indexOf(element)},t._getItemByDirection=function(e,t){var n=e===Ce,r=e===Se,o=this._getItemIndex(t),c=this._items.length-1;if((r&&0===o||n&&o===c)&&!this._config.wrap)return t;var l=(o+(e===Se?-1:1))%this._items.length;return-1===l?this._items[this._items.length-1]:this._items[l]},t._triggerSlideEvent=function(e,t){var n=this._getItemIndex(e),r=this._getItemIndex(this._element.querySelector(We)),c=o.default.Event(Ne,{relatedTarget:e,direction:t,from:r,to:n});return o.default(this._element).trigger(c),c},t._setActiveIndicatorElement=function(element){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(Be));o.default(e).removeClass(ve);var t=this._indicatorsElement.children[this._getItemIndex(element)];t&&o.default(t).addClass(ve)}},t._updateInterval=function(){var element=this._activeElement||this._element.querySelector(We);if(element){var e=parseInt(element.getAttribute("data-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}},t._slide=function(e,element){var t,n,r,c=this,l=this._element.querySelector(We),h=this._getItemIndex(l),d=element||l&&this._getItemByDirection(e,l),f=this._getItemIndex(d),m=Boolean(this._interval);if(e===Ce?(t=be,n=Te,r=ke):(t=we,n=Ee,r=Oe),d&&o.default(d).hasClass(ve))this._isSliding=!1;else if(!this._triggerSlideEvent(d,r).isDefaultPrevented()&&l&&d){this._isSliding=!0,m&&this.pause(),this._setActiveIndicatorElement(d),this._activeElement=d;var y=o.default.Event(Ae,{relatedTarget:d,direction:r,from:h,to:f});if(o.default(this._element).hasClass(_e)){o.default(d).addClass(n),C.reflow(d),o.default(l).addClass(t),o.default(d).addClass(t);var v=C.getTransitionDurationFromElement(l);o.default(l).one(C.TRANSITION_END,(function(){o.default(d).removeClass(t+" "+n).addClass(ve),o.default(l).removeClass(ve+" "+n+" "+t),c._isSliding=!1,setTimeout((function(){return o.default(c._element).trigger(y)}),0)})).emulateTransitionEnd(v)}else o.default(l).removeClass(ve),o.default(d).addClass(ve),this._isSliding=!1,o.default(this._element).trigger(y);m&&this.cycle()}},e._jQueryInterface=function(t){return this.each((function(){var data=o.default(this).data(ue),n=d({},Ye,o.default(this).data());"object"==typeof t&&(n=d({},n,t));var r="string"==typeof t?t:n.slide;if(data||(data=new e(this,n),o.default(this).data(ue,data)),"number"==typeof t)data.to(t);else if("string"==typeof r){if(void 0===data[r])throw new TypeError('No method named "'+r+'"');data[r]()}else n.interval&&n.ride&&(data.pause(),data.cycle())}))},e._dataApiClickHandler=function(t){var n=C.getSelectorFromElement(this);if(n){var r=o.default(n)[0];if(r&&o.default(r).hasClass(ye)){var c=d({},o.default(r).data(),o.default(this).data()),l=this.getAttribute("data-slide-to");l&&(c.interval=!1),e._jQueryInterface.call(o.default(r),c),l&&o.default(r).data(ue).to(l),t.preventDefault()}}},h(e,null,[{key:"VERSION",get:function(){return ce}},{key:"Default",get:function(){return Ye}}]),e}();o.default(document).on(Ve,Ge,Ze._dataApiClickHandler),o.default(window).on(Ue,(function(){for(var e=[].slice.call(document.querySelectorAll(Qe)),i=0,t=e.length;i<t;i++){var n=o.default(e[i]);Ze._jQueryInterface.call(n,n.data())}})),o.default.fn[ae]=Ze._jQueryInterface,o.default.fn[ae].Constructor=Ze,o.default.fn[ae].noConflict=function(){return o.default.fn[ae]=de,Ze._jQueryInterface};var et="collapse",tt="4.6.1",nt="bs.collapse",it="."+nt,st=".data-api",ot=o.default.fn[et],at="show",ct="collapse",ut="collapsing",lt="collapsed",ht="width",ft="height",pt="show"+it,gt="shown"+it,mt="hide"+it,yt="hidden"+it,vt="click"+it+st,_t=".show, .collapsing",wt='[data-toggle="collapse"]',bt={toggle:!0,parent:""},Tt={toggle:"boolean",parent:"(string|element)"},Et=function(){function e(element,e){this._isTransitioning=!1,this._element=element,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+element.id+'"],[data-toggle="collapse"][data-target="#'+element.id+'"]'));for(var t=[].slice.call(document.querySelectorAll(wt)),i=0,n=t.length;i<n;i++){var r=t[i],o=C.getSelectorFromElement(r),c=[].slice.call(document.querySelectorAll(o)).filter((function(e){return e===element}));null!==o&&c.length>0&&(this._selector=o,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=e.prototype;return t.toggle=function(){o.default(this._element).hasClass(at)?this.hide():this.show()},t.show=function(){var t,n,r=this;if(!(this._isTransitioning||o.default(this._element).hasClass(at)||(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(_t)).filter((function(e){return"string"==typeof r._config.parent?e.getAttribute("data-parent")===r._config.parent:e.classList.contains(ct)}))).length&&(t=null),t&&(n=o.default(t).not(this._selector).data(nt))&&n._isTransitioning))){var c=o.default.Event(pt);if(o.default(this._element).trigger(c),!c.isDefaultPrevented()){t&&(e._jQueryInterface.call(o.default(t).not(this._selector),"hide"),n||o.default(t).data(nt,null));var l=this._getDimension();o.default(this._element).removeClass(ct).addClass(ut),this._element.style[l]=0,this._triggerArray.length&&o.default(this._triggerArray).removeClass(lt).attr("aria-expanded",!0),this.setTransitioning(!0);var h=function(){o.default(r._element).removeClass(ut).addClass(ct+" "+at),r._element.style[l]="",r.setTransitioning(!1),o.default(r._element).trigger(gt)},d="scroll"+(l[0].toUpperCase()+l.slice(1)),f=C.getTransitionDurationFromElement(this._element);o.default(this._element).one(C.TRANSITION_END,h).emulateTransitionEnd(f),this._element.style[l]=this._element[d]+"px"}}},t.hide=function(){var e=this;if(!this._isTransitioning&&o.default(this._element).hasClass(at)){var t=o.default.Event(mt);if(o.default(this._element).trigger(t),!t.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",C.reflow(this._element),o.default(this._element).addClass(ut).removeClass(ct+" "+at);var r=this._triggerArray.length;if(r>0)for(var i=0;i<r;i++){var c=this._triggerArray[i],l=C.getSelectorFromElement(c);null!==l&&(o.default([].slice.call(document.querySelectorAll(l))).hasClass(at)||o.default(c).addClass(lt).attr("aria-expanded",!1))}this.setTransitioning(!0);var h=function(){e.setTransitioning(!1),o.default(e._element).removeClass(ut).addClass(ct).trigger(yt)};this._element.style[n]="";var d=C.getTransitionDurationFromElement(this._element);o.default(this._element).one(C.TRANSITION_END,h).emulateTransitionEnd(d)}}},t.setTransitioning=function(e){this._isTransitioning=e},t.dispose=function(){o.default.removeData(this._element,nt),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(e){return(e=d({},bt,e)).toggle=Boolean(e.toggle),C.typeCheckConfig(et,e,Tt),e},t._getDimension=function(){return o.default(this._element).hasClass(ht)?ht:ft},t._getParent=function(){var t,n=this;C.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var r='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',c=[].slice.call(t.querySelectorAll(r));return o.default(c).each((function(i,element){n._addAriaAndCollapsedClass(e._getTargetFromElement(element),[element])})),t},t._addAriaAndCollapsedClass=function(element,e){var t=o.default(element).hasClass(at);e.length&&o.default(e).toggleClass(lt,!t).attr("aria-expanded",t)},e._getTargetFromElement=function(element){var e=C.getSelectorFromElement(element);return e?document.querySelector(e):null},e._jQueryInterface=function(t){return this.each((function(){var n=o.default(this),data=n.data(nt),r=d({},bt,n.data(),"object"==typeof t&&t?t:{});if(!data&&r.toggle&&"string"==typeof t&&/show|hide/.test(t)&&(r.toggle=!1),data||(data=new e(this,r),n.data(nt,data)),"string"==typeof t){if(void 0===data[t])throw new TypeError('No method named "'+t+'"');data[t]()}}))},h(e,null,[{key:"VERSION",get:function(){return tt}},{key:"Default",get:function(){return bt}}]),e}();o.default(document).on(vt,wt,(function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var t=o.default(this),n=C.getSelectorFromElement(this),r=[].slice.call(document.querySelectorAll(n));o.default(r).each((function(){var e=o.default(this),n=e.data(nt)?"toggle":t.data();Et._jQueryInterface.call(e,n)}))})),o.default.fn[et]=Et._jQueryInterface,o.default.fn[et].Constructor=Et,o.default.fn[et].noConflict=function(){return o.default.fn[et]=ot,Et._jQueryInterface};var It="dropdown",Ct="4.6.1",St="bs.dropdown",kt="."+St,Ot=".data-api",Nt=o.default.fn[It],At=27,xt=32,Dt=9,Rt=38,Pt=40,jt=3,Lt=new RegExp(Rt+"|"+Pt+"|"+At),Mt="disabled",Ft="show",qt="dropup",Ut="dropright",Vt="dropleft",Bt="dropdown-menu-right",Wt="position-static",Ht="hide"+kt,zt="hidden"+kt,$t="show"+kt,Kt="shown"+kt,Gt="click"+kt,Qt="click"+kt+Ot,Yt="keydown"+kt+Ot,Jt="keyup"+kt+Ot,Xt='[data-toggle="dropdown"]',Zt=".dropdown form",en=".dropdown-menu",tn=".navbar-nav",nn=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",rn="top-start",sn="top-end",on="bottom-start",an="bottom-end",cn="right-start",un="left-start",ln={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},hn={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},dn=function(){function e(element,e){this._element=element,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=e.prototype;return t.toggle=function(){if(!this._element.disabled&&!o.default(this._element).hasClass(Mt)){var t=o.default(this._menu).hasClass(Ft);e._clearMenus(),t||this.show(!0)}},t.show=function(t){if(void 0===t&&(t=!1),!(this._element.disabled||o.default(this._element).hasClass(Mt)||o.default(this._menu).hasClass(Ft))){var n={relatedTarget:this._element},r=o.default.Event($t,n),l=e._getParentFromElement(this._element);if(o.default(l).trigger(r),!r.isDefaultPrevented()){if(!this._inNavbar&&t){if(void 0===c.default)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var h=this._element;"parent"===this._config.reference?h=l:C.isElement(this._config.reference)&&(h=this._config.reference,void 0!==this._config.reference.jquery&&(h=this._config.reference[0])),"scrollParent"!==this._config.boundary&&o.default(l).addClass(Wt),this._popper=new c.default(h,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===o.default(l).closest(tn).length&&o.default(document.body).children().on("mouseover",null,o.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),o.default(this._menu).toggleClass(Ft),o.default(l).toggleClass(Ft).trigger(o.default.Event(Kt,n))}}},t.hide=function(){if(!this._element.disabled&&!o.default(this._element).hasClass(Mt)&&o.default(this._menu).hasClass(Ft)){var t={relatedTarget:this._element},n=o.default.Event(Ht,t),r=e._getParentFromElement(this._element);o.default(r).trigger(n),n.isDefaultPrevented()||(this._popper&&this._popper.destroy(),o.default(this._menu).toggleClass(Ft),o.default(r).toggleClass(Ft).trigger(o.default.Event(zt,t)))}},t.dispose=function(){o.default.removeData(this._element,St),o.default(this._element).off(kt),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;o.default(this._element).on(Gt,(function(t){t.preventDefault(),t.stopPropagation(),e.toggle()}))},t._getConfig=function(e){return e=d({},this.constructor.Default,o.default(this._element).data(),e),C.typeCheckConfig(It,e,this.constructor.DefaultType),e},t._getMenuElement=function(){if(!this._menu){var t=e._getParentFromElement(this._element);t&&(this._menu=t.querySelector(en))}return this._menu},t._getPlacement=function(){var e=o.default(this._element.parentNode),t=on;return e.hasClass(qt)?t=o.default(this._menu).hasClass(Bt)?sn:rn:e.hasClass(Ut)?t=cn:e.hasClass(Vt)?t=un:o.default(this._menu).hasClass(Bt)&&(t=an),t},t._detectNavbar=function(){return o.default(this._element).closest(".navbar").length>0},t._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(data){return data.offsets=d({},data.offsets,e._config.offset(data.offsets,e._element)),data}:t.offset=this._config.offset,t},t._getPopperConfig=function(){var e={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(e.modifiers.applyStyle={enabled:!1}),d({},e,this._config.popperConfig)},e._jQueryInterface=function(t){return this.each((function(){var data=o.default(this).data(St);if(data||(data=new e(this,"object"==typeof t?t:null),o.default(this).data(St,data)),"string"==typeof t){if(void 0===data[t])throw new TypeError('No method named "'+t+'"');data[t]()}}))},e._clearMenus=function(t){if(!t||t.which!==jt&&("keyup"!==t.type||t.which===Dt))for(var n=[].slice.call(document.querySelectorAll(Xt)),i=0,r=n.length;i<r;i++){var c=e._getParentFromElement(n[i]),l=o.default(n[i]).data(St),h={relatedTarget:n[i]};if(t&&"click"===t.type&&(h.clickEvent=t),l){var d=l._menu;if(o.default(c).hasClass(Ft)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&t.which===Dt)&&o.default.contains(c,t.target))){var f=o.default.Event(Ht,h);o.default(c).trigger(f),f.isDefaultPrevented()||("ontouchstart"in document.documentElement&&o.default(document.body).children().off("mouseover",null,o.default.noop),n[i].setAttribute("aria-expanded","false"),l._popper&&l._popper.destroy(),o.default(d).removeClass(Ft),o.default(c).removeClass(Ft).trigger(o.default.Event(zt,h)))}}}},e._getParentFromElement=function(element){var e,t=C.getSelectorFromElement(element);return t&&(e=document.querySelector(t)),e||element.parentNode},e._dataApiKeydownHandler=function(t){if(!(/input|textarea/i.test(t.target.tagName)?t.which===xt||t.which!==At&&(t.which!==Pt&&t.which!==Rt||o.default(t.target).closest(en).length):!Lt.test(t.which))&&!this.disabled&&!o.default(this).hasClass(Mt)){var n=e._getParentFromElement(this),r=o.default(n).hasClass(Ft);if(r||t.which!==At){if(t.preventDefault(),t.stopPropagation(),!r||t.which===At||t.which===xt)return t.which===At&&o.default(n.querySelector(Xt)).trigger("focus"),void o.default(this).trigger("click");var c=[].slice.call(n.querySelectorAll(nn)).filter((function(e){return o.default(e).is(":visible")}));if(0!==c.length){var l=c.indexOf(t.target);t.which===Rt&&l>0&&l--,t.which===Pt&&l<c.length-1&&l++,l<0&&(l=0),c[l].focus()}}}},h(e,null,[{key:"VERSION",get:function(){return Ct}},{key:"Default",get:function(){return ln}},{key:"DefaultType",get:function(){return hn}}]),e}();o.default(document).on(Yt,Xt,dn._dataApiKeydownHandler).on(Yt,en,dn._dataApiKeydownHandler).on(Qt+" "+Jt,dn._clearMenus).on(Qt,Xt,(function(e){e.preventDefault(),e.stopPropagation(),dn._jQueryInterface.call(o.default(this),"toggle")})).on(Qt,Zt,(function(e){e.stopPropagation()})),o.default.fn[It]=dn._jQueryInterface,o.default.fn[It].Constructor=dn,o.default.fn[It].noConflict=function(){return o.default.fn[It]=Nt,dn._jQueryInterface};var fn="modal",pn="4.6.1",gn="bs.modal",mn="."+gn,yn=".data-api",vn=o.default.fn[fn],_n=27,wn="modal-dialog-scrollable",bn="modal-scrollbar-measure",Tn="modal-backdrop",En="modal-open",In="fade",Cn="show",Sn="modal-static",kn="hide"+mn,On="hidePrevented"+mn,Nn="hidden"+mn,An="show"+mn,xn="shown"+mn,Dn="focusin"+mn,Rn="resize"+mn,Pn="click.dismiss"+mn,jn="keydown.dismiss"+mn,Ln="mouseup.dismiss"+mn,Mn="mousedown.dismiss"+mn,Fn="click"+mn+yn,qn=".modal-dialog",Un=".modal-body",Vn='[data-toggle="modal"]',Bn='[data-dismiss="modal"]',Wn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Hn=".sticky-top",zn={backdrop:!0,keyboard:!0,focus:!0,show:!0},$n={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Kn=function(){function e(element,e){this._config=this._getConfig(e),this._element=element,this._dialog=element.querySelector(qn),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var t=e.prototype;return t.toggle=function(e){return this._isShown?this.hide():this.show(e)},t.show=function(e){var t=this;if(!this._isShown&&!this._isTransitioning){var n=o.default.Event(An,{relatedTarget:e});o.default(this._element).trigger(n),n.isDefaultPrevented()||(this._isShown=!0,o.default(this._element).hasClass(In)&&(this._isTransitioning=!0),this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),o.default(this._element).on(Pn,Bn,(function(e){return t.hide(e)})),o.default(this._dialog).on(Mn,(function(){o.default(t._element).one(Ln,(function(e){o.default(e.target).is(t._element)&&(t._ignoreBackdropClick=!0)}))})),this._showBackdrop((function(){return t._showElement(e)})))}},t.hide=function(e){var t=this;if(e&&e.preventDefault(),this._isShown&&!this._isTransitioning){var n=o.default.Event(kn);if(o.default(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var r=o.default(this._element).hasClass(In);if(r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),o.default(document).off(Dn),o.default(this._element).removeClass(Cn),o.default(this._element).off(Pn),o.default(this._dialog).off(Mn),r){var c=C.getTransitionDurationFromElement(this._element);o.default(this._element).one(C.TRANSITION_END,(function(e){return t._hideModal(e)})).emulateTransitionEnd(c)}else this._hideModal()}}},t.dispose=function(){[window,this._element,this._dialog].forEach((function(e){return o.default(e).off(mn)})),o.default(document).off(Dn),o.default.removeData(this._element,gn),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(e){return e=d({},zn,e),C.typeCheckConfig(fn,e,$n),e},t._triggerBackdropTransition=function(){var e=this,t=o.default.Event(On);if(o.default(this._element).trigger(t),!t.isDefaultPrevented()){var n=this._element.scrollHeight>document.documentElement.clientHeight;n||(this._element.style.overflowY="hidden"),this._element.classList.add(Sn);var r=C.getTransitionDurationFromElement(this._dialog);o.default(this._element).off(C.TRANSITION_END),o.default(this._element).one(C.TRANSITION_END,(function(){e._element.classList.remove(Sn),n||o.default(e._element).one(C.TRANSITION_END,(function(){e._element.style.overflowY=""})).emulateTransitionEnd(e._element,r)})).emulateTransitionEnd(r),this._element.focus()}},t._showElement=function(e){var t=this,n=o.default(this._element).hasClass(In),r=this._dialog?this._dialog.querySelector(Un):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),o.default(this._dialog).hasClass(wn)&&r?r.scrollTop=0:this._element.scrollTop=0,n&&C.reflow(this._element),o.default(this._element).addClass(Cn),this._config.focus&&this._enforceFocus();var c=o.default.Event(xn,{relatedTarget:e}),l=function(){t._config.focus&&t._element.focus(),t._isTransitioning=!1,o.default(t._element).trigger(c)};if(n){var h=C.getTransitionDurationFromElement(this._dialog);o.default(this._dialog).one(C.TRANSITION_END,l).emulateTransitionEnd(h)}else l()},t._enforceFocus=function(){var e=this;o.default(document).off(Dn).on(Dn,(function(t){document!==t.target&&e._element!==t.target&&0===o.default(e._element).has(t.target).length&&e._element.focus()}))},t._setEscapeEvent=function(){var e=this;this._isShown?o.default(this._element).on(jn,(function(t){e._config.keyboard&&t.which===_n?(t.preventDefault(),e.hide()):e._config.keyboard||t.which!==_n||e._triggerBackdropTransition()})):this._isShown||o.default(this._element).off(jn)},t._setResizeEvent=function(){var e=this;this._isShown?o.default(window).on(Rn,(function(t){return e.handleUpdate(t)})):o.default(window).off(Rn)},t._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop((function(){o.default(document.body).removeClass(En),e._resetAdjustments(),e._resetScrollbar(),o.default(e._element).trigger(Nn)}))},t._removeBackdrop=function(){this._backdrop&&(o.default(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(e){var t=this,animate=o.default(this._element).hasClass(In)?In:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=Tn,animate&&this._backdrop.classList.add(animate),o.default(this._backdrop).appendTo(document.body),o.default(this._element).on(Pn,(function(e){t._ignoreBackdropClick?t._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===t._config.backdrop?t._triggerBackdropTransition():t.hide())})),animate&&C.reflow(this._backdrop),o.default(this._backdrop).addClass(Cn),!e)return;if(!animate)return void e();var n=C.getTransitionDurationFromElement(this._backdrop);o.default(this._backdrop).one(C.TRANSITION_END,e).emulateTransitionEnd(n)}else if(!this._isShown&&this._backdrop){o.default(this._backdrop).removeClass(Cn);var r=function(){t._removeBackdrop(),e&&e()};if(o.default(this._element).hasClass(In)){var c=C.getTransitionDurationFromElement(this._backdrop);o.default(this._backdrop).one(C.TRANSITION_END,r).emulateTransitionEnd(c)}else r()}else e&&e()},t._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var rect=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(rect.left+rect.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var e=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(Wn)),n=[].slice.call(document.querySelectorAll(Hn));o.default(t).each((function(t,element){var n=element.style.paddingRight,r=o.default(element).css("padding-right");o.default(element).data("padding-right",n).css("padding-right",parseFloat(r)+e._scrollbarWidth+"px")})),o.default(n).each((function(t,element){var n=element.style.marginRight,r=o.default(element).css("margin-right");o.default(element).data("margin-right",n).css("margin-right",parseFloat(r)-e._scrollbarWidth+"px")}));var r=document.body.style.paddingRight,c=o.default(document.body).css("padding-right");o.default(document.body).data("padding-right",r).css("padding-right",parseFloat(c)+this._scrollbarWidth+"px")}o.default(document.body).addClass(En)},t._resetScrollbar=function(){var e=[].slice.call(document.querySelectorAll(Wn));o.default(e).each((function(e,element){var t=o.default(element).data("padding-right");o.default(element).removeData("padding-right"),element.style.paddingRight=t||""}));var t=[].slice.call(document.querySelectorAll(""+Hn));o.default(t).each((function(e,element){var t=o.default(element).data("margin-right");void 0!==t&&o.default(element).css("margin-right",t).removeData("margin-right")}));var n=o.default(document.body).data("padding-right");o.default(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},t._getScrollbarWidth=function(){var e=document.createElement("div");e.className=bn,document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},e._jQueryInterface=function(t,n){return this.each((function(){var data=o.default(this).data(gn),r=d({},zn,o.default(this).data(),"object"==typeof t&&t?t:{});if(data||(data=new e(this,r),o.default(this).data(gn,data)),"string"==typeof t){if(void 0===data[t])throw new TypeError('No method named "'+t+'"');data[t](n)}else r.show&&data.show(n)}))},h(e,null,[{key:"VERSION",get:function(){return pn}},{key:"Default",get:function(){return zn}}]),e}();o.default(document).on(Fn,Vn,(function(e){var t,n=this,r=C.getSelectorFromElement(this);r&&(t=document.querySelector(r));var c=o.default(t).data(gn)?"toggle":d({},o.default(t).data(),o.default(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var l=o.default(t).one(An,(function(e){e.isDefaultPrevented()||l.one(Nn,(function(){o.default(n).is(":visible")&&n.focus()}))}));Kn._jQueryInterface.call(o.default(t),c,this)})),o.default.fn[fn]=Kn._jQueryInterface,o.default.fn[fn].Constructor=Kn,o.default.fn[fn].noConflict=function(){return o.default.fn[fn]=vn,Kn._jQueryInterface};var Gn=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Qn={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Yn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Jn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function Xn(e,t){var n=e.nodeName.toLowerCase();if(-1!==t.indexOf(n))return-1===Gn.indexOf(n)||Boolean(Yn.test(e.nodeValue)||Jn.test(e.nodeValue));for(var r=t.filter((function(e){return e instanceof RegExp})),i=0,o=r.length;i<o;i++)if(r[i].test(n))return!0;return!1}function Zn(e,t,n){if(0===e.length)return e;if(n&&"function"==typeof n)return n(e);for(var r=(new window.DOMParser).parseFromString(e,"text/html"),o=Object.keys(t),c=[].slice.call(r.body.querySelectorAll("*")),l=function(i,e){var n=c[i],r=n.nodeName.toLowerCase();if(-1===o.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var l=[].slice.call(n.attributes),h=[].concat(t["*"]||[],t[r]||[]);l.forEach((function(e){Xn(e,h)||n.removeAttribute(e.nodeName)}))},i=0,h=c.length;i<h;i++)l(i);return r.body.innerHTML}var er="tooltip",nr="4.6.1",rr="bs.tooltip",ir="."+rr,sr=o.default.fn[er],or="bs-tooltip",ar=new RegExp("(^|\\s)"+or+"\\S+","g"),cr=["sanitize","whiteList","sanitizeFn"],ur="fade",lr="show",dr="show",fr="out",pr=".tooltip-inner",gr=".arrow",mr="hover",yr="focus",vr="click",_r="manual",wr={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Tr={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:Qn,popperConfig:null},Er={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},Ir={HIDE:"hide"+ir,HIDDEN:"hidden"+ir,SHOW:"show"+ir,SHOWN:"shown"+ir,INSERTED:"inserted"+ir,CLICK:"click"+ir,FOCUSIN:"focusin"+ir,FOCUSOUT:"focusout"+ir,MOUSEENTER:"mouseenter"+ir,MOUSELEAVE:"mouseleave"+ir},Cr=function(){function e(element,e){if(void 0===c.default)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=element,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=e.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(e){if(this._isEnabled)if(e){var t=this.constructor.DATA_KEY,n=o.default(e.currentTarget).data(t);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),o.default(e.currentTarget).data(t,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(o.default(this.getTipElement()).hasClass(lr))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),o.default.removeData(this.element,this.constructor.DATA_KEY),o.default(this.element).off(this.constructor.EVENT_KEY),o.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&o.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===o.default(this.element).css("display"))throw new Error("Please use show on visible elements");var t=o.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){o.default(this.element).trigger(t);var n=C.findShadowRoot(this.element),r=o.default.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!r)return;var l=this.getTipElement(),h=C.getUID(this.constructor.NAME);l.setAttribute("id",h),this.element.setAttribute("aria-describedby",h),this.setContent(),this.config.animation&&o.default(l).addClass(ur);var d="function"==typeof this.config.placement?this.config.placement.call(this,l,this.element):this.config.placement,f=this._getAttachment(d);this.addAttachmentClass(f);var m=this._getContainer();o.default(l).data(this.constructor.DATA_KEY,this),o.default.contains(this.element.ownerDocument.documentElement,this.tip)||o.default(l).appendTo(m),o.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new c.default(this.element,l,this._getPopperConfig(f)),o.default(l).addClass(lr),o.default(l).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&o.default(document.body).children().on("mouseover",null,o.default.noop);var y=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,o.default(e.element).trigger(e.constructor.Event.SHOWN),t===fr&&e._leave(null,e)};if(o.default(this.tip).hasClass(ur)){var v=C.getTransitionDurationFromElement(this.tip);o.default(this.tip).one(C.TRANSITION_END,y).emulateTransitionEnd(v)}else y()}},t.hide=function(e){var t=this,n=this.getTipElement(),r=o.default.Event(this.constructor.Event.HIDE),c=function(){t._hoverState!==dr&&n.parentNode&&n.parentNode.removeChild(n),t._cleanTipClass(),t.element.removeAttribute("aria-describedby"),o.default(t.element).trigger(t.constructor.Event.HIDDEN),null!==t._popper&&t._popper.destroy(),e&&e()};if(o.default(this.element).trigger(r),!r.isDefaultPrevented()){if(o.default(n).removeClass(lr),"ontouchstart"in document.documentElement&&o.default(document.body).children().off("mouseover",null,o.default.noop),this._activeTrigger[vr]=!1,this._activeTrigger[yr]=!1,this._activeTrigger[mr]=!1,o.default(this.tip).hasClass(ur)){var l=C.getTransitionDurationFromElement(n);o.default(n).one(C.TRANSITION_END,c).emulateTransitionEnd(l)}else c();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(e){o.default(this.getTipElement()).addClass(or+"-"+e)},t.getTipElement=function(){return this.tip=this.tip||o.default(this.config.template)[0],this.tip},t.setContent=function(){var e=this.getTipElement();this.setElementContent(o.default(e.querySelectorAll(pr)),this.getTitle()),o.default(e).removeClass(ur+" "+lr)},t.setElementContent=function(e,content){"object"!=typeof content||!content.nodeType&&!content.jquery?this.config.html?(this.config.sanitize&&(content=Zn(content,this.config.whiteList,this.config.sanitizeFn)),e.html(content)):e.text(content):this.config.html?o.default(content).parent().is(e)||e.empty().append(content):e.text(o.default(content).text())},t.getTitle=function(){var title=this.element.getAttribute("data-original-title");return title||(title="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),title},t._getPopperConfig=function(e){var t=this;return d({},{placement:e,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:gr},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(data){data.originalPlacement!==data.placement&&t._handlePopperPlacementChange(data)},onUpdate:function(data){return t._handlePopperPlacementChange(data)}},this.config.popperConfig)},t._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(data){return data.offsets=d({},data.offsets,e.config.offset(data.offsets,e.element)),data}:t.offset=this.config.offset,t},t._getContainer=function(){return!1===this.config.container?document.body:C.isElement(this.config.container)?o.default(this.config.container):o.default(document).find(this.config.container)},t._getAttachment=function(e){return wr[e.toUpperCase()]},t._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach((function(t){if("click"===t)o.default(e.element).on(e.constructor.Event.CLICK,e.config.selector,(function(t){return e.toggle(t)}));else if(t!==_r){var n=t===mr?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,r=t===mr?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;o.default(e.element).on(n,e.config.selector,(function(t){return e._enter(t)})).on(r,e.config.selector,(function(t){return e._leave(t)}))}})),this._hideModalHandler=function(){e.element&&e.hide()},o.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=d({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(e,t){var n=this.constructor.DATA_KEY;(t=t||o.default(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),o.default(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusin"===e.type?yr:mr]=!0),o.default(t.getTipElement()).hasClass(lr)||t._hoverState===dr?t._hoverState=dr:(clearTimeout(t._timeout),t._hoverState=dr,t.config.delay&&t.config.delay.show?t._timeout=setTimeout((function(){t._hoverState===dr&&t.show()}),t.config.delay.show):t.show())},t._leave=function(e,t){var n=this.constructor.DATA_KEY;(t=t||o.default(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),o.default(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusout"===e.type?yr:mr]=!1),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState=fr,t.config.delay&&t.config.delay.hide?t._timeout=setTimeout((function(){t._hoverState===fr&&t.hide()}),t.config.delay.hide):t.hide())},t._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},t._getConfig=function(e){var t=o.default(this.element).data();return Object.keys(t).forEach((function(e){-1!==cr.indexOf(e)&&delete t[e]})),"number"==typeof(e=d({},this.constructor.Default,t,"object"==typeof e&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),C.typeCheckConfig(er,e,this.constructor.DefaultType),e.sanitize&&(e.template=Zn(e.template,e.whiteList,e.sanitizeFn)),e},t._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},t._cleanTipClass=function(){var e=o.default(this.getTipElement()),t=e.attr("class").match(ar);null!==t&&t.length&&e.removeClass(t.join(""))},t._handlePopperPlacementChange=function(e){this.tip=e.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},t._fixTransition=function(){var e=this.getTipElement(),t=this.config.animation;null===e.getAttribute("x-placement")&&(o.default(e).removeClass(ur),this.config.animation=!1,this.hide(),this.show(),this.config.animation=t)},e._jQueryInterface=function(t){return this.each((function(){var n=o.default(this),data=n.data(rr),r="object"==typeof t&&t;if((data||!/dispose|hide/.test(t))&&(data||(data=new e(this,r),n.data(rr,data)),"string"==typeof t)){if(void 0===data[t])throw new TypeError('No method named "'+t+'"');data[t]()}}))},h(e,null,[{key:"VERSION",get:function(){return nr}},{key:"Default",get:function(){return Tr}},{key:"NAME",get:function(){return er}},{key:"DATA_KEY",get:function(){return rr}},{key:"Event",get:function(){return Ir}},{key:"EVENT_KEY",get:function(){return ir}},{key:"DefaultType",get:function(){return Er}}]),e}();o.default.fn[er]=Cr._jQueryInterface,o.default.fn[er].Constructor=Cr,o.default.fn[er].noConflict=function(){return o.default.fn[er]=sr,Cr._jQueryInterface};var Sr="popover",kr="4.6.1",Or="bs.popover",Nr="."+Or,Ar=o.default.fn[Sr],xr="bs-popover",Dr=new RegExp("(^|\\s)"+xr+"\\S+","g"),Rr="fade",Pr="show",jr=".popover-header",Lr=".popover-body",Mr=d({},Cr.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Fr=d({},Cr.DefaultType,{content:"(string|element|function)"}),qr={HIDE:"hide"+Nr,HIDDEN:"hidden"+Nr,SHOW:"show"+Nr,SHOWN:"shown"+Nr,INSERTED:"inserted"+Nr,CLICK:"click"+Nr,FOCUSIN:"focusin"+Nr,FOCUSOUT:"focusout"+Nr,MOUSEENTER:"mouseenter"+Nr,MOUSELEAVE:"mouseleave"+Nr},Ur=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var n=t.prototype;return n.isWithContent=function(){return this.getTitle()||this._getContent()},n.addAttachmentClass=function(e){o.default(this.getTipElement()).addClass(xr+"-"+e)},n.getTipElement=function(){return this.tip=this.tip||o.default(this.config.template)[0],this.tip},n.setContent=function(){var e=o.default(this.getTipElement());this.setElementContent(e.find(jr),this.getTitle());var content=this._getContent();"function"==typeof content&&(content=content.call(this.element)),this.setElementContent(e.find(Lr),content),e.removeClass(Rr+" "+Pr)},n._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},n._cleanTipClass=function(){var e=o.default(this.getTipElement()),t=e.attr("class").match(Dr);null!==t&&t.length>0&&e.removeClass(t.join(""))},t._jQueryInterface=function(e){return this.each((function(){var data=o.default(this).data(Or),n="object"==typeof e?e:null;if((data||!/dispose|hide/.test(e))&&(data||(data=new t(this,n),o.default(this).data(Or,data)),"string"==typeof e)){if(void 0===data[e])throw new TypeError('No method named "'+e+'"');data[e]()}}))},h(t,null,[{key:"VERSION",get:function(){return kr}},{key:"Default",get:function(){return Mr}},{key:"NAME",get:function(){return Sr}},{key:"DATA_KEY",get:function(){return Or}},{key:"Event",get:function(){return qr}},{key:"EVENT_KEY",get:function(){return Nr}},{key:"DefaultType",get:function(){return Fr}}]),t}(Cr);o.default.fn[Sr]=Ur._jQueryInterface,o.default.fn[Sr].Constructor=Ur,o.default.fn[Sr].noConflict=function(){return o.default.fn[Sr]=Ar,Ur._jQueryInterface};var Vr="scrollspy",Br="4.6.1",Wr="bs.scrollspy",Hr="."+Wr,zr=".data-api",$r=o.default.fn[Vr],Kr="dropdown-item",Gr="active",Qr="activate"+Hr,Yr="scroll"+Hr,Jr="load"+Hr+zr,Xr="offset",Zr="position",ei='[data-spy="scroll"]',ti=".nav, .list-group",ni=".nav-link",ri=".nav-item",ii=".list-group-item",si=".dropdown",oi=".dropdown-item",ai=".dropdown-toggle",ci={offset:10,method:"auto",target:""},ui={offset:"number",method:"string",target:"(string|element)"},hi=function(){function e(element,e){var t=this;this._element=element,this._scrollElement="BODY"===element.tagName?window:element,this._config=this._getConfig(e),this._selector=this._config.target+" "+ni+","+this._config.target+" "+ii+","+this._config.target+" "+oi,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,o.default(this._scrollElement).on(Yr,(function(e){return t._process(e)})),this.refresh(),this._process()}var t=e.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?Xr:Zr,n="auto"===this._config.method?t:this._config.method,r=n===Zr?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map((function(element){var e,t=C.getSelectorFromElement(element);if(t&&(e=document.querySelector(t)),e){var c=e.getBoundingClientRect();if(c.width||c.height)return[o.default(e)[n]().top+r,t]}return null})).filter((function(e){return e})).sort((function(a,b){return a[0]-b[0]})).forEach((function(t){e._offsets.push(t[0]),e._targets.push(t[1])}))},t.dispose=function(){o.default.removeData(this._element,Wr),o.default(this._scrollElement).off(Hr),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(e){if("string"!=typeof(e=d({},ci,"object"==typeof e&&e?e:{})).target&&C.isElement(e.target)){var t=o.default(e.target).attr("id");t||(t=C.getUID(Vr),o.default(e.target).attr("id",t)),e.target="#"+t}return C.typeCheckConfig(Vr,e,ui),e},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=n){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;)this._activeTarget!==this._targets[i]&&e>=this._offsets[i]&&(void 0===this._offsets[i+1]||e<this._offsets[i+1])&&this._activate(this._targets[i])}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",").map((function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'})),n=o.default([].slice.call(document.querySelectorAll(t.join(","))));n.hasClass(Kr)?(n.closest(si).find(ai).addClass(Gr),n.addClass(Gr)):(n.addClass(Gr),n.parents(ti).prev(ni+", "+ii).addClass(Gr),n.parents(ti).prev(ri).children(ni).addClass(Gr)),o.default(this._scrollElement).trigger(Qr,{relatedTarget:e})},t._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter((function(e){return e.classList.contains(Gr)})).forEach((function(e){return e.classList.remove(Gr)}))},e._jQueryInterface=function(t){return this.each((function(){var data=o.default(this).data(Wr);if(data||(data=new e(this,"object"==typeof t&&t),o.default(this).data(Wr,data)),"string"==typeof t){if(void 0===data[t])throw new TypeError('No method named "'+t+'"');data[t]()}}))},h(e,null,[{key:"VERSION",get:function(){return Br}},{key:"Default",get:function(){return ci}}]),e}();o.default(window).on(Jr,(function(){for(var e=[].slice.call(document.querySelectorAll(ei)),i=e.length;i--;){var t=o.default(e[i]);hi._jQueryInterface.call(t,t.data())}})),o.default.fn[Vr]=hi._jQueryInterface,o.default.fn[Vr].Constructor=hi,o.default.fn[Vr].noConflict=function(){return o.default.fn[Vr]=$r,hi._jQueryInterface};var di="tab",fi="4.6.1",pi="bs.tab",gi="."+pi,mi=".data-api",yi=o.default.fn[di],vi="dropdown-menu",_i="active",wi="disabled",bi="fade",Ti="show",Ei="hide"+gi,Ii="hidden"+gi,Ci="show"+gi,Si="shown"+gi,ki="click"+gi+mi,Oi=".dropdown",Ni=".nav, .list-group",Ai=".active",xi="> li > .active",Di='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',Ri=".dropdown-toggle",Pi="> .dropdown-menu .active",ji=function(){function e(element){this._element=element}var t=e.prototype;return t.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&o.default(this._element).hasClass(_i)||o.default(this._element).hasClass(wi))){var t,n,r=o.default(this._element).closest(Ni)[0],c=C.getSelectorFromElement(this._element);if(r){var l="UL"===r.nodeName||"OL"===r.nodeName?xi:Ai;n=(n=o.default.makeArray(o.default(r).find(l)))[n.length-1]}var h=o.default.Event(Ei,{relatedTarget:this._element}),d=o.default.Event(Ci,{relatedTarget:n});if(n&&o.default(n).trigger(h),o.default(this._element).trigger(d),!d.isDefaultPrevented()&&!h.isDefaultPrevented()){c&&(t=document.querySelector(c)),this._activate(this._element,r);var f=function(){var t=o.default.Event(Ii,{relatedTarget:e._element}),r=o.default.Event(Si,{relatedTarget:n});o.default(n).trigger(t),o.default(e._element).trigger(r)};t?this._activate(t,t.parentNode,f):f()}}},t.dispose=function(){o.default.removeData(this._element,pi),this._element=null},t._activate=function(element,e,t){var n=this,r=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?o.default(e).children(Ai):o.default(e).find(xi))[0],c=t&&r&&o.default(r).hasClass(bi),l=function(){return n._transitionComplete(element,r,t)};if(r&&c){var h=C.getTransitionDurationFromElement(r);o.default(r).removeClass(Ti).one(C.TRANSITION_END,l).emulateTransitionEnd(h)}else l()},t._transitionComplete=function(element,e,t){if(e){o.default(e).removeClass(_i);var n=o.default(e.parentNode).find(Pi)[0];n&&o.default(n).removeClass(_i),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}o.default(element).addClass(_i),"tab"===element.getAttribute("role")&&element.setAttribute("aria-selected",!0),C.reflow(element),element.classList.contains(bi)&&element.classList.add(Ti);var r=element.parentNode;if(r&&"LI"===r.nodeName&&(r=r.parentNode),r&&o.default(r).hasClass(vi)){var c=o.default(element).closest(Oi)[0];if(c){var l=[].slice.call(c.querySelectorAll(Ri));o.default(l).addClass(_i)}element.setAttribute("aria-expanded",!0)}t&&t()},e._jQueryInterface=function(t){return this.each((function(){var n=o.default(this),data=n.data(pi);if(data||(data=new e(this),n.data(pi,data)),"string"==typeof t){if(void 0===data[t])throw new TypeError('No method named "'+t+'"');data[t]()}}))},h(e,null,[{key:"VERSION",get:function(){return fi}}]),e}();o.default(document).on(ki,Di,(function(e){e.preventDefault(),ji._jQueryInterface.call(o.default(this),"show")})),o.default.fn[di]=ji._jQueryInterface,o.default.fn[di].Constructor=ji,o.default.fn[di].noConflict=function(){return o.default.fn[di]=yi,ji._jQueryInterface};var Li="toast",Mi="4.6.1",Fi="bs.toast",qi="."+Fi,Ui=o.default.fn[Li],Vi="fade",Bi="hide",Wi="show",Hi="showing",zi="click.dismiss"+qi,$i="hide"+qi,Ki="hidden"+qi,Gi="show"+qi,Qi="shown"+qi,Yi='[data-dismiss="toast"]',Ji={animation:!0,autohide:!0,delay:500},Xi={animation:"boolean",autohide:"boolean",delay:"number"},Zi=function(){function e(element,e){this._element=element,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var t=e.prototype;return t.show=function(){var e=this,t=o.default.Event(Gi);if(o.default(this._element).trigger(t),!t.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add(Vi);var n=function(){e._element.classList.remove(Hi),e._element.classList.add(Wi),o.default(e._element).trigger(Qi),e._config.autohide&&(e._timeout=setTimeout((function(){e.hide()}),e._config.delay))};if(this._element.classList.remove(Bi),C.reflow(this._element),this._element.classList.add(Hi),this._config.animation){var r=C.getTransitionDurationFromElement(this._element);o.default(this._element).one(C.TRANSITION_END,n).emulateTransitionEnd(r)}else n()}},t.hide=function(){if(this._element.classList.contains(Wi)){var e=o.default.Event($i);o.default(this._element).trigger(e),e.isDefaultPrevented()||this._close()}},t.dispose=function(){this._clearTimeout(),this._element.classList.contains(Wi)&&this._element.classList.remove(Wi),o.default(this._element).off(zi),o.default.removeData(this._element,Fi),this._element=null,this._config=null},t._getConfig=function(e){return e=d({},Ji,o.default(this._element).data(),"object"==typeof e&&e?e:{}),C.typeCheckConfig(Li,e,this.constructor.DefaultType),e},t._setListeners=function(){var e=this;o.default(this._element).on(zi,Yi,(function(){return e.hide()}))},t._close=function(){var e=this,t=function(){e._element.classList.add(Bi),o.default(e._element).trigger(Ki)};if(this._element.classList.remove(Wi),this._config.animation){var n=C.getTransitionDurationFromElement(this._element);o.default(this._element).one(C.TRANSITION_END,t).emulateTransitionEnd(n)}else t()},t._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},e._jQueryInterface=function(t){return this.each((function(){var n=o.default(this),data=n.data(Fi);if(data||(data=new e(this,"object"==typeof t&&t),n.data(Fi,data)),"string"==typeof t){if(void 0===data[t])throw new TypeError('No method named "'+t+'"');data[t](this)}}))},h(e,null,[{key:"VERSION",get:function(){return Mi}},{key:"DefaultType",get:function(){return Xi}},{key:"Default",get:function(){return Ji}}]),e}();o.default.fn[Li]=Zi._jQueryInterface,o.default.fn[Li].Constructor=Zi,o.default.fn[Li].noConflict=function(){return o.default.fn[Li]=Ui,Zi._jQueryInterface},e.Alert=U,e.Button=oe,e.Carousel=Ze,e.Collapse=Et,e.Dropdown=dn,e.Modal=Kn,e.Popover=Ur,e.Scrollspy=hi,e.Tab=ji,e.Toast=Zi,e.Tooltip=Cr,e.Util=C,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(271),n(272))},271:function(e,t,n){var r;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,o){"use strict";var c=[],l=Object.getPrototypeOf,h=c.slice,d=c.flat?function(e){return c.flat.call(e)}:function(e){return c.concat.apply([],e)},f=c.push,m=c.indexOf,y={},v=y.toString,_=y.hasOwnProperty,w=_.toString,T=w.call(Object),E={},I=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},C=function(e){return null!=e&&e===e.window},S=n.document,k={type:!0,src:!0,nonce:!0,noModule:!0};function O(code,e,t){var i,n,script=(t=t||S).createElement("script");if(script.text=code,e)for(i in k)(n=e[i]||e.getAttribute&&e.getAttribute(i))&&script.setAttribute(i,n);t.head.appendChild(script).parentNode.removeChild(script)}function N(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?y[v.call(e)]||"object":typeof e}var A="3.6.0",x=function(e,t){return new x.fn.init(e,t)};function D(e){var t=!!e&&"length"in e&&e.length,n=N(e);return!I(e)&&!C(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}x.fn=x.prototype={jquery:A,constructor:x,length:0,toArray:function(){return h.call(this)},get:function(e){return null==e?h.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,(function(e,i){return(i+1)%2})))},odd:function(){return this.pushStack(x.grep(this,(function(e,i){return i%2})))},eq:function(i){var e=this.length,t=+i+(i<0?e:0);return this.pushStack(t>=0&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:c.sort,splice:c.splice},x.extend=x.fn.extend=function(){var e,t,n,r,o,c,l=arguments[0]||{},i=1,h=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[i]||{},i++),"object"==typeof l||I(l)||(l={}),i===h&&(l=this,i--);i<h;i++)if(null!=(e=arguments[i]))for(t in e)r=e[t],"__proto__"!==t&&l!==r&&(d&&r&&(x.isPlainObject(r)||(o=Array.isArray(r)))?(n=l[t],c=o&&!Array.isArray(n)?[]:o||x.isPlainObject(n)?n:{},o=!1,l[t]=x.extend(d,c,r)):void 0!==r&&(l[t]=r));return l},x.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==v.call(e))&&(!(t=l(e))||"function"==typeof(n=_.call(t,"constructor")&&t.constructor)&&w.call(n)===T)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(code,e,t){O(code,{nonce:e&&e.nonce},t)},each:function(e,t){var n,i=0;if(D(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(D(Object(e))?x.merge(n,"string"==typeof e?[e]:e):f.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:m.call(t,e,i)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,c=!n;i<o;i++)!t(e[i],i)!==c&&r.push(e[i]);return r},map:function(e,t,n){var r,o,i=0,c=[];if(D(e))for(r=e.length;i<r;i++)null!=(o=t(e[i],i,n))&&c.push(o);else for(i in e)null!=(o=t(e[i],i,n))&&c.push(o);return d(c)},guid:1,support:E}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=c[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){y["[object "+t+"]"]=t.toLowerCase()}));var R=function(e){var i,t,n,r,o,c,l,select,h,d,f,m,y,v,_,w,T,E,I,C="sizzle"+1*new Date,S=e.document,k=0,O=0,N=pe(),A=pe(),x=pe(),D=pe(),R=function(a,b){return a===b&&(f=!0),0},P={}.hasOwnProperty,j=[],L=j.pop,M=j.push,F=j.push,U=j.slice,V=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",W="[\\x20\\t\\r\\n\\f]",H="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\[[\\x20\\t\\r\\n\\f]*("+H+")(?:"+W+"*([*^$|!~]?=)"+W+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+W+"*\\]",$=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",K=new RegExp(W+"+","g"),G=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Q=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),Y=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),J=new RegExp(W+"|>"),X=new RegExp($),Z=new RegExp("^"+H+"$"),ee={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},te=/HTML$/i,ne=/^(?:input|select|textarea|button)$/i,re=/^h\d$/i,ie=/^[^{]+\{\s*\[native \w/,se=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oe=/[+~]/,ae=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ce=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ue=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,le=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},he=function(){m()},de=Se((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{F.apply(j=U.call(S.childNodes),S.childNodes),j[S.childNodes.length].nodeType}catch(e){F={apply:j.length?function(e,t){M.apply(e,U.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function fe(e,n,r,o){var l,i,h,d,f,v,T,E=n&&n.ownerDocument,S=n?n.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==S&&9!==S&&11!==S)return r;if(!o&&(m(n),n=n||y,_)){if(11!==S&&(f=se.exec(e)))if(l=f[1]){if(9===S){if(!(h=n.getElementById(l)))return r;if(h.id===l)return r.push(h),r}else if(E&&(h=E.getElementById(l))&&I(n,h)&&h.id===l)return r.push(h),r}else{if(f[2])return F.apply(r,n.getElementsByTagName(e)),r;if((l=f[3])&&t.getElementsByClassName&&n.getElementsByClassName)return F.apply(r,n.getElementsByClassName(l)),r}if(t.qsa&&!D[e+" "]&&(!w||!w.test(e))&&(1!==S||"object"!==n.nodeName.toLowerCase())){if(T=e,E=n,1===S&&(J.test(e)||Y.test(e))){for((E=oe.test(e)&&Ee(n.parentNode)||n)===n&&t.scope||((d=n.getAttribute("id"))?d=d.replace(ue,le):n.setAttribute("id",d=C)),i=(v=c(e)).length;i--;)v[i]=(d?"#"+d:":scope")+" "+Ce(v[i]);T=v.join(",")}try{return F.apply(r,E.querySelectorAll(T)),r}catch(t){D(e,!0)}finally{d===C&&n.removeAttribute("id")}}}return select(e.replace(G,"$1"),n,r,o)}function pe(){var e=[];return function t(r,o){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=o}}function ge(e){return e[C]=!0,e}function me(e){var t=y.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ye(e,t){for(var r=e.split("|"),i=r.length;i--;)n.attrHandle[r[i]]=t}function ve(a,b){var e=b&&a,t=e&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(t)return t;if(e)for(;e=e.nextSibling;)if(e===b)return-1;return a?1:-1}function _e(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function we(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function be(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&de(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function Te(e){return ge((function(t){return t=+t,ge((function(n,r){for(var o,c=e([],n.length,t),i=c.length;i--;)n[o=c[i]]&&(n[o]=!(r[o]=n[o]))}))}))}function Ee(e){return e&&void 0!==e.getElementsByTagName&&e}for(i in t=fe.support={},o=fe.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!te.test(t||n&&n.nodeName||"HTML")},m=fe.setDocument=function(e){var r,c,l=e?e.ownerDocument||e:S;return l!=y&&9===l.nodeType&&l.documentElement?(v=(y=l).documentElement,_=!o(y),S!=y&&(c=y.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",he,!1):c.attachEvent&&c.attachEvent("onunload",he)),t.scope=me((function(e){return v.appendChild(e).appendChild(y.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),t.attributes=me((function(e){return e.className="i",!e.getAttribute("className")})),t.getElementsByTagName=me((function(e){return e.appendChild(y.createComment("")),!e.getElementsByTagName("*").length})),t.getElementsByClassName=ie.test(y.getElementsByClassName),t.getById=me((function(e){return v.appendChild(e).id=C,!y.getElementsByName||!y.getElementsByName(C).length})),t.getById?(n.filter.ID=function(e){var t=e.replace(ae,ce);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var n=t.getElementById(e);return n?[n]:[]}}):(n.filter.ID=function(e){var t=e.replace(ae,ce);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),n.find.TAG=t.getElementsByTagName?function(e,n){return void 0!==n.getElementsByTagName?n.getElementsByTagName(e):t.qsa?n.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},n.find.CLASS=t.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&_)return t.getElementsByClassName(e)},T=[],w=[],(t.qsa=ie.test(y.querySelectorAll))&&(me((function(e){var input;v.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&w.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||w.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+B+")"),e.querySelectorAll("[id~="+C+"-]").length||w.push("~="),(input=y.createElement("input")).setAttribute("name",""),e.appendChild(input),e.querySelectorAll("[name='']").length||w.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||w.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||w.push(".#.+[+~]"),e.querySelectorAll("\\\f"),w.push("[\\r\\n\\f]")})),me((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var input=y.createElement("input");input.setAttribute("type","hidden"),e.appendChild(input).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&w.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&w.push(":enabled",":disabled"),v.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&w.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),w.push(",.*:")}))),(t.matchesSelector=ie.test(E=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.oMatchesSelector||v.msMatchesSelector))&&me((function(e){t.disconnectedMatch=E.call(e,"*"),E.call(e,"[s!='']:x"),T.push("!=",$)})),w=w.length&&new RegExp(w.join("|")),T=T.length&&new RegExp(T.join("|")),r=ie.test(v.compareDocumentPosition),I=r||ie.test(v.contains)?function(a,b){var e=9===a.nodeType?a.documentElement:a,t=b&&b.parentNode;return a===t||!(!t||1!==t.nodeType||!(e.contains?e.contains(t):a.compareDocumentPosition&&16&a.compareDocumentPosition(t)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},R=r?function(a,b){if(a===b)return f=!0,0;var e=!a.compareDocumentPosition-!b.compareDocumentPosition;return e||(1&(e=(a.ownerDocument||a)==(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!t.sortDetached&&b.compareDocumentPosition(a)===e?a==y||a.ownerDocument==S&&I(S,a)?-1:b==y||b.ownerDocument==S&&I(S,b)?1:d?V(d,a)-V(d,b):0:4&e?-1:1)}:function(a,b){if(a===b)return f=!0,0;var e,i=0,t=a.parentNode,n=b.parentNode,r=[a],o=[b];if(!t||!n)return a==y?-1:b==y?1:t?-1:n?1:d?V(d,a)-V(d,b):0;if(t===n)return ve(a,b);for(e=a;e=e.parentNode;)r.unshift(e);for(e=b;e=e.parentNode;)o.unshift(e);for(;r[i]===o[i];)i++;return i?ve(r[i],o[i]):r[i]==S?-1:o[i]==S?1:0},y):y},fe.matches=function(e,t){return fe(e,null,null,t)},fe.matchesSelector=function(e,n){if(m(e),t.matchesSelector&&_&&!D[n+" "]&&(!T||!T.test(n))&&(!w||!w.test(n)))try{var r=E.call(e,n);if(r||t.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){D(n,!0)}return fe(n,y,null,[e]).length>0},fe.contains=function(e,t){return(e.ownerDocument||e)!=y&&m(e),I(e,t)},fe.attr=function(e,r){(e.ownerDocument||e)!=y&&m(e);var o=n.attrHandle[r.toLowerCase()],c=o&&P.call(n.attrHandle,r.toLowerCase())?o(e,r,!_):void 0;return void 0!==c?c:t.attributes||!_?e.getAttribute(r):(c=e.getAttributeNode(r))&&c.specified?c.value:null},fe.escape=function(e){return(e+"").replace(ue,le)},fe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},fe.uniqueSort=function(e){var n,r=[],o=0,i=0;if(f=!t.detectDuplicates,d=!t.sortStable&&e.slice(0),e.sort(R),f){for(;n=e[i++];)n===e[i]&&(o=r.push(i));for(;o--;)e.splice(r[o],1)}return d=null,e},r=fe.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},n=fe.selectors={cacheLength:50,createPseudo:ge,match:ee,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ae,ce),e[3]=(e[3]||e[4]||e[5]||"").replace(ae,ce),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||fe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&fe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ee.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=c(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ae,ce).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var pattern=N[e+" "];return pattern||(pattern=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+W+"|$)"))&&N(e,(function(e){return pattern.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var o=fe.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(K," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var c="nth"!==e.slice(0,3),l="last"!==e.slice(-4),h="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,d){var f,m,y,v,_,w,T=c!==l?"nextSibling":"previousSibling",E=t.parentNode,I=h&&t.nodeName.toLowerCase(),S=!d&&!h,O=!1;if(E){if(c){for(;T;){for(v=t;v=v[T];)if(h?v.nodeName.toLowerCase()===I:1===v.nodeType)return!1;w=T="only"===e&&!w&&"nextSibling"}return!0}if(w=[l?E.firstChild:E.lastChild],l&&S){for(O=(_=(f=(m=(y=(v=E)[C]||(v[C]={}))[v.uniqueID]||(y[v.uniqueID]={}))[e]||[])[0]===k&&f[1])&&f[2],v=_&&E.childNodes[_];v=++_&&v&&v[T]||(O=_=0)||w.pop();)if(1===v.nodeType&&++O&&v===t){m[e]=[k,_,O];break}}else if(S&&(O=_=(f=(m=(y=(v=t)[C]||(v[C]={}))[v.uniqueID]||(y[v.uniqueID]={}))[e]||[])[0]===k&&f[1]),!1===O)for(;(v=++_&&v&&v[T]||(O=_=0)||w.pop())&&((h?v.nodeName.toLowerCase()!==I:1!==v.nodeType)||!++O||(S&&((m=(y=v[C]||(v[C]={}))[v.uniqueID]||(y[v.uniqueID]={}))[e]=[k,O]),v!==t)););return(O-=o)===r||O%r==0&&O/r>=0}}},PSEUDO:function(e,t){var r,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||fe.error("unsupported pseudo: "+e);return o[C]?o(t):o.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ge((function(e,n){for(var r,c=o(e,t),i=c.length;i--;)e[r=V(e,c[i])]=!(n[r]=c[i])})):function(e){return o(e,0,r)}):o}},pseudos:{not:ge((function(e){var input=[],t=[],n=l(e.replace(G,"$1"));return n[C]?ge((function(e,t,r,o){for(var c,l=n(e,null,o,[]),i=e.length;i--;)(c=l[i])&&(e[i]=!(t[i]=c))})):function(e,r,o){return input[0]=e,n(input,null,o,t),input[0]=null,!t.pop()}})),has:ge((function(e){return function(t){return fe(e,t).length>0}})),contains:ge((function(text){return text=text.replace(ae,ce),function(e){return(e.textContent||r(e)).indexOf(text)>-1}})),lang:ge((function(e){return Z.test(e||"")||fe.error("unsupported lang: "+e),e=e.replace(ae,ce).toLowerCase(),function(t){var n;do{if(n=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===v},focus:function(e){return e===y.activeElement&&(!y.hasFocus||y.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:be(!1),disabled:be(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return re.test(e.nodeName)},input:function(e){return ne.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:Te((function(){return[0]})),last:Te((function(e,t){return[t-1]})),eq:Te((function(e,t,n){return[n<0?n+t:n]})),even:Te((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:Te((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:Te((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:Te((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[i]=_e(i);for(i in{submit:!0,reset:!0})n.pseudos[i]=we(i);function Ie(){}function Ce(e){for(var i=0,t=e.length,n="";i<t;i++)n+=e[i].value;return n}function Se(e,t,base){var n=t.dir,r=t.next,o=r||n,c=base&&"parentNode"===o,l=O++;return t.first?function(t,r,o){for(;t=t[n];)if(1===t.nodeType||c)return e(t,r,o);return!1}:function(t,h,d){var f,m,y,v=[k,l];if(d){for(;t=t[n];)if((1===t.nodeType||c)&&e(t,h,d))return!0}else for(;t=t[n];)if(1===t.nodeType||c)if(m=(y=t[C]||(t[C]={}))[t.uniqueID]||(y[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((f=m[o])&&f[0]===k&&f[1]===l)return v[2]=f[2];if(m[o]=v,v[2]=e(t,h,d))return!0}return!1}}function ke(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Oe(e,map,filter,t,n){for(var r,o=[],i=0,c=e.length,l=null!=map;i<c;i++)(r=e[i])&&(filter&&!filter(r,t,n)||(o.push(r),l&&map.push(i)));return o}function Ne(e,t,n,r,o,c){return r&&!r[C]&&(r=Ne(r)),o&&!o[C]&&(o=Ne(o,c)),ge((function(c,l,h,d){var f,i,m,y=[],v=[],_=l.length,w=c||function(e,t,n){for(var i=0,r=t.length;i<r;i++)fe(e,t[i],n);return n}(t||"*",h.nodeType?[h]:h,[]),T=!e||!c&&t?w:Oe(w,y,e,h,d),E=n?o||(c?e:_||r)?[]:l:T;if(n&&n(T,E,h,d),r)for(f=Oe(E,v),r(f,[],h,d),i=f.length;i--;)(m=f[i])&&(E[v[i]]=!(T[v[i]]=m));if(c){if(o||e){if(o){for(f=[],i=E.length;i--;)(m=E[i])&&f.push(T[i]=m);o(null,E=[],f,d)}for(i=E.length;i--;)(m=E[i])&&(f=o?V(c,m):y[i])>-1&&(c[f]=!(l[f]=m))}}else E=Oe(E===l?E.splice(_,E.length):E),o?o(null,l,E,d):F.apply(l,E)}))}function Ae(e){for(var t,r,o,c=e.length,l=n.relative[e[0].type],d=l||n.relative[" "],i=l?1:0,f=Se((function(e){return e===t}),d,!0),m=Se((function(e){return V(t,e)>-1}),d,!0),y=[function(e,n,r){var o=!l&&(r||n!==h)||((t=n).nodeType?f(e,n,r):m(e,n,r));return t=null,o}];i<c;i++)if(r=n.relative[e[i].type])y=[Se(ke(y),r)];else{if((r=n.filter[e[i].type].apply(null,e[i].matches))[C]){for(o=++i;o<c&&!n.relative[e[o].type];o++);return Ne(i>1&&ke(y),i>1&&Ce(e.slice(0,i-1).concat({value:" "===e[i-2].type?"*":""})).replace(G,"$1"),r,i<o&&Ae(e.slice(i,o)),o<c&&Ae(e=e.slice(o)),o<c&&Ce(e))}y.push(r)}return ke(y)}return Ie.prototype=n.filters=n.pseudos,n.setFilters=new Ie,c=fe.tokenize=function(e,t){var r,o,c,l,h,d,f,m=A[e+" "];if(m)return t?0:m.slice(0);for(h=e,d=[],f=n.preFilter;h;){for(l in r&&!(o=Q.exec(h))||(o&&(h=h.slice(o[0].length)||h),d.push(c=[])),r=!1,(o=Y.exec(h))&&(r=o.shift(),c.push({value:r,type:o[0].replace(G," ")}),h=h.slice(r.length)),n.filter)!(o=ee[l].exec(h))||f[l]&&!(o=f[l](o))||(r=o.shift(),c.push({value:r,type:l,matches:o}),h=h.slice(r.length));if(!r)break}return t?h.length:h?fe.error(e):A(e,d).slice(0)},l=fe.compile=function(e,t){var i,r=[],o=[],l=x[e+" "];if(!l){for(t||(t=c(e)),i=t.length;i--;)(l=Ae(t[i]))[C]?r.push(l):o.push(l);l=x(e,function(e,t){var r=t.length>0,o=e.length>0,c=function(c,l,d,f,v){var w,T,E,I=0,i="0",C=c&&[],S=[],O=h,N=c||o&&n.find.TAG("*",v),A=k+=null==O?1:Math.random()||.1,x=N.length;for(v&&(h=l==y||l||v);i!==x&&null!=(w=N[i]);i++){if(o&&w){for(T=0,l||w.ownerDocument==y||(m(w),d=!_);E=e[T++];)if(E(w,l||y,d)){f.push(w);break}v&&(k=A)}r&&((w=!E&&w)&&I--,c&&C.push(w))}if(I+=i,r&&i!==I){for(T=0;E=t[T++];)E(C,S,l,d);if(c){if(I>0)for(;i--;)C[i]||S[i]||(S[i]=L.call(f));S=Oe(S)}F.apply(f,S),v&&!c&&S.length>0&&I+t.length>1&&fe.uniqueSort(f)}return v&&(k=A,h=O),C};return r?ge(c):c}(o,r)),l.selector=e}return l},select=fe.select=function(e,t,r,o){var i,h,d,f,m,y="function"==typeof e&&e,v=!o&&c(e=y.selector||e);if(r=r||[],1===v.length){if((h=v[0]=v[0].slice(0)).length>2&&"ID"===(d=h[0]).type&&9===t.nodeType&&_&&n.relative[h[1].type]){if(!(t=(n.find.ID(d.matches[0].replace(ae,ce),t)||[])[0]))return r;y&&(t=t.parentNode),e=e.slice(h.shift().value.length)}for(i=ee.needsContext.test(e)?0:h.length;i--&&(d=h[i],!n.relative[f=d.type]);)if((m=n.find[f])&&(o=m(d.matches[0].replace(ae,ce),oe.test(h[0].type)&&Ee(t.parentNode)||t))){if(h.splice(i,1),!(e=o.length&&Ce(h)))return F.apply(r,o),r;break}}return(y||l(e,v))(o,t,!_,r,!t||oe.test(e)&&Ee(t.parentNode)||t),r},t.sortStable=C.split("").sort(R).join("")===C,t.detectDuplicates=!!f,m(),t.sortDetached=me((function(e){return 1&e.compareDocumentPosition(y.createElement("fieldset"))})),me((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ye("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),t.attributes&&me((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ye("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),me((function(e){return null==e.getAttribute("disabled")}))||ye(B,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),fe}(n);x.find=R,x.expr=R.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=R.uniqueSort,x.text=R.getText,x.isXMLDoc=R.isXML,x.contains=R.contains,x.escapeSelector=R.escape;var P=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&x(e).is(n))break;r.push(e)}return r},j=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},L=x.expr.match.needsContext;function M(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(e,t,n){return I(t)?x.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?x.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?x.grep(e,(function(e){return m.call(t,e)>-1!==n})):x.filter(t,e,n)}x.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,(function(e){return 1===e.nodeType})))},x.fn.extend({find:function(e){var i,t,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(x(e).filter((function(){for(i=0;i<n;i++)if(x.contains(r[i],this))return!0})));for(t=this.pushStack([]),i=0;i<n;i++)x.find(e,r[i],t);return n>1?x.uniqueSort(t):t},filter:function(e){return this.pushStack(U(this,e||[],!1))},not:function(e){return this.pushStack(U(this,e||[],!0))},is:function(e){return!!U(this,"string"==typeof e&&L.test(e)?x(e):e||[],!1).length}});var V,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||V,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:B.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),F.test(r[1])&&x.isPlainObject(t))for(r in t)I(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=S.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):I(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,V=x(S);var W=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function z(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter((function(){for(var i=0;i<n;i++)if(x.contains(this,t[i]))return!0}))},closest:function(e,t){var n,i=0,r=this.length,o=[],c="string"!=typeof e&&x(e);if(!L.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(c?c.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?x.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?m.call(x(e),this[0]):m.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},parentsUntil:function(e,t,n){return P(e,"parentNode",n)},next:function(e){return z(e,"nextSibling")},prev:function(e){return z(e,"previousSibling")},nextAll:function(e){return P(e,"nextSibling")},prevAll:function(e){return P(e,"previousSibling")},nextUntil:function(e,t,n){return P(e,"nextSibling",n)},prevUntil:function(e,t,n){return P(e,"previousSibling",n)},siblings:function(e){return j((e.parentNode||{}).firstChild,e)},children:function(e){return j(e.firstChild)},contents:function(e){return null!=e.contentDocument&&l(e.contentDocument)?e.contentDocument:(M(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},(function(e,t){x.fn[e]=function(n,r){var o=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=x.filter(r,o)),this.length>1&&(H[e]||x.uniqueSort(o),W.test(e)&&o.reverse()),this.pushStack(o)}}));var $=/[^\x20\t\r\n\f]+/g;function K(e){return e}function G(e){throw e}function Q(e,t,n,r){var o;try{e&&I(o=e.promise)?o.call(e).done(t).fail(n):e&&I(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){e="string"==typeof e?function(e){var object={};return x.each(e.match($)||[],(function(e,t){object[t]=!0})),object}(e):x.extend({},e);var t,n,r,o,c=[],l=[],h=-1,d=function(){for(o=o||e.once,r=t=!0;l.length;h=-1)for(n=l.shift();++h<c.length;)!1===c[h].apply(n[0],n[1])&&e.stopOnFalse&&(h=c.length,n=!1);e.memory||(n=!1),t=!1,o&&(c=n?[]:"")},f={add:function(){return c&&(n&&!t&&(h=c.length-1,l.push(n)),function t(n){x.each(n,(function(n,r){I(r)?e.unique&&f.has(r)||c.push(r):r&&r.length&&"string"!==N(r)&&t(r)}))}(arguments),n&&!t&&d()),this},remove:function(){return x.each(arguments,(function(e,t){for(var n;(n=x.inArray(t,c,n))>-1;)c.splice(n,1),n<=h&&h--})),this},has:function(e){return e?x.inArray(e,c)>-1:c.length>0},empty:function(){return c&&(c=[]),this},disable:function(){return o=l=[],c=n="",this},disabled:function(){return!c},lock:function(){return o=l=[],n||t||(c=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],l.push(n),t||d()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},x.extend({Deferred:function(e){var t=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return c.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return x.Deferred((function(n){x.each(t,(function(t,r){var o=I(e[r[4]])&&e[r[4]];c[r[1]]((function(){var e=o&&o.apply(this,arguments);e&&I(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,o){var c=0;function l(e,t,r,o){return function(){var h=this,d=arguments,f=function(){var n,f;if(!(e<c)){if((n=r.apply(h,d))===t.promise())throw new TypeError("Thenable self-resolution");f=n&&("object"==typeof n||"function"==typeof n)&&n.then,I(f)?o?f.call(n,l(c,t,K,o),l(c,t,G,o)):(c++,f.call(n,l(c,t,K,o),l(c,t,G,o),l(c,t,K,t.notifyWith))):(r!==K&&(h=void 0,d=[n]),(o||t.resolveWith)(h,d))}},m=o?f:function(){try{f()}catch(n){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(n,m.stackTrace),e+1>=c&&(r!==G&&(h=void 0,d=[n]),t.rejectWith(h,d))}};e?m():(x.Deferred.getStackHook&&(m.stackTrace=x.Deferred.getStackHook()),n.setTimeout(m))}}return x.Deferred((function(n){t[0][3].add(l(0,n,I(o)?o:K,n.notifyWith)),t[1][3].add(l(0,n,I(e)?e:K)),t[2][3].add(l(0,n,I(r)?r:G))})).promise()},promise:function(e){return null!=e?x.extend(e,o):o}},c={};return x.each(t,(function(i,e){var n=e[2],l=e[5];o[e[1]]=n.add,l&&n.add((function(){r=l}),t[3-i][2].disable,t[3-i][3].disable,t[0][2].lock,t[0][3].lock),n.add(e[3].fire),c[e[0]]=function(){return c[e[0]+"With"](this===c?void 0:this,arguments),this},c[e[0]+"With"]=n.fireWith})),o.promise(c),e&&e.call(c,c),c},when:function(e){var t=arguments.length,i=t,n=Array(i),r=h.call(arguments),o=x.Deferred(),c=function(i){return function(e){n[i]=this,r[i]=arguments.length>1?h.call(arguments):e,--t||o.resolveWith(n,r)}};if(t<=1&&(Q(e,o.done(c(i)).resolve,o.reject,!t),"pending"===o.state()||I(r[i]&&r[i].then)))return o.then();for(;i--;)Q(r[i],c(i),o.reject);return o.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Y.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},x.readyException=function(e){n.setTimeout((function(){throw e}))};var J=x.Deferred();function X(){S.removeEventListener("DOMContentLoaded",X),n.removeEventListener("load",X),x.ready()}x.fn.ready=function(e){return J.then(e).catch((function(e){x.readyException(e)})),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||J.resolveWith(S,[x]))}}),x.ready.then=J.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?n.setTimeout(x.ready):(S.addEventListener("DOMContentLoaded",X),n.addEventListener("load",X));var Z=function(e,t,n,r,o,c,l){var i=0,h=e.length,d=null==n;if("object"===N(n))for(i in o=!0,n)Z(e,t,i,n[i],!0,c,l);else if(void 0!==r&&(o=!0,I(r)||(l=!0),d&&(l?(t.call(e,r),t=null):(d=t,t=function(e,t,n){return d.call(x(e),n)})),t))for(;i<h;i++)t(e[i],n,l?r:r.call(e[i],i,t(e[i],n)));return o?e:d?t.call(e):h?t(e[0],n):c},ee=/^-ms-/,te=/-([a-z])/g;function ne(e,t){return t.toUpperCase()}function re(e){return e.replace(ee,"ms-").replace(te,ne)}var ie=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function se(){this.expando=x.expando+se.uid++}se.uid=1,se.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ie(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,data,t){var n,r=this.cache(e);if("string"==typeof data)r[re(data)]=t;else for(n in data)r[re(n)]=data[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][re(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(re):(t=re(t))in n?[t]:t.match($)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||x.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var oe=new se,ae=new se,ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function le(e,t,data){var n;if(void 0===data&&1===e.nodeType)if(n="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(data=e.getAttribute(n))){try{data=function(data){return"true"===data||"false"!==data&&("null"===data?null:data===+data+""?+data:ce.test(data)?JSON.parse(data):data)}(data)}catch(e){}ae.set(e,t,data)}else data=void 0;return data}x.extend({hasData:function(e){return ae.hasData(e)||oe.hasData(e)},data:function(e,t,data){return ae.access(e,t,data)},removeData:function(e,t){ae.remove(e,t)},_data:function(e,t,data){return oe.access(e,t,data)},_removeData:function(e,t){oe.remove(e,t)}}),x.fn.extend({data:function(e,t){var i,n,data,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(data=ae.get(r),1===r.nodeType&&!oe.get(r,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=re(n.slice(5)),le(r,n,data[n]));oe.set(r,"hasDataAttrs",!0)}return data}return"object"==typeof e?this.each((function(){ae.set(this,e)})):Z(this,(function(t){var data;if(r&&void 0===t)return void 0!==(data=ae.get(r,e))||void 0!==(data=le(r,e))?data:void 0;this.each((function(){ae.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ae.remove(this,e)}))}}),x.extend({queue:function(e,t,data){var n;if(e)return t=(t||"fx")+"queue",n=oe.get(e,t),data&&(!n||Array.isArray(data)?n=oe.access(e,t,x.makeArray(data)):n.push(data)),n||[]},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,o=n.shift(),c=x._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete c.stop,o.call(e,(function(){x.dequeue(e,t)}),c)),!r&&c&&c.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return oe.get(e,n)||oe.access(e,n,{empty:x.Callbacks("once memory").add((function(){oe.remove(e,[t+"queue",n])}))})}}),x.fn.extend({queue:function(e,data){var t=2;return"string"!=typeof e&&(data=e,e="fx",t--),arguments.length<t?x.queue(this[0],e):void 0===data?this:this.each((function(){var t=x.queue(this,e,data);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){x.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=x.Deferred(),c=this,i=this.length,l=function(){--r||o.resolveWith(c,[c])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=oe.get(c[i],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(l));return l(),o.promise(t)}});var he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,de=new RegExp("^(?:([+-])=|)("+he+")([a-z%]*)$","i"),fe=["Top","Right","Bottom","Left"],pe=S.documentElement,ge=function(e){return x.contains(e.ownerDocument,e)},me={composed:!0};pe.getRootNode&&(ge=function(e){return x.contains(e.ownerDocument,e)||e.getRootNode(me)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ge(e)&&"none"===x.css(e,"display")};function ve(e,t,n,r){var o,c,l=20,h=r?function(){return r.cur()}:function(){return x.css(e,t,"")},d=h(),f=n&&n[3]||(x.cssNumber[t]?"":"px"),m=e.nodeType&&(x.cssNumber[t]||"px"!==f&&+d)&&de.exec(x.css(e,t));if(m&&m[3]!==f){for(d/=2,f=f||m[3],m=+d||1;l--;)x.style(e,t,m+f),(1-c)*(1-(c=h()/d||.5))<=0&&(l=0),m/=c;m*=2,x.style(e,t,m+f),n=n||[]}return n&&(m=+m||+d||0,o=n[1]?m+(n[1]+1)*n[2]:+n[2],r&&(r.unit=f,r.start=m,r.end=o)),o}var _e={};function we(e){var t,n=e.ownerDocument,r=e.nodeName,o=_e[r];return o||(t=n.body.appendChild(n.createElement(r)),o=x.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),_e[r]=o,o)}function be(e,t){for(var n,r,o=[],c=0,l=e.length;c<l;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(o[c]=oe.get(r,"display")||null,o[c]||(r.style.display="")),""===r.style.display&&ye(r)&&(o[c]=we(r))):"none"!==n&&(o[c]="none",oe.set(r,"display",n)));for(c=0;c<l;c++)null!=o[c]&&(e[c].style.display=o[c]);return e}x.fn.extend({show:function(){return be(this,!0)},hide:function(){return be(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ye(this)?x(this).show():x(this).hide()}))}});var div,input,Te=/^(?:checkbox|radio)$/i,Ee=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ie=/^$|^module$|\/(?:java|ecma)script/i;div=S.createDocumentFragment().appendChild(S.createElement("div")),(input=S.createElement("input")).setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),E.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",E.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue,div.innerHTML="<option></option>",E.option=!!div.lastChild;var Ce={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Se(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&M(e,t)?x.merge([e],n):n}function ke(e,t){for(var i=0,n=e.length;i<n;i++)oe.set(e[i],"globalEval",!t||oe.get(t[i],"globalEval"))}Ce.tbody=Ce.tfoot=Ce.colgroup=Ce.caption=Ce.thead,Ce.th=Ce.td,E.option||(Ce.optgroup=Ce.option=[1,"<select multiple='multiple'>","</select>"]);var Oe=/<|&#?\w+;/;function Ne(e,t,n,r,o){for(var c,l,h,d,f,m,y=t.createDocumentFragment(),v=[],i=0,_=e.length;i<_;i++)if((c=e[i])||0===c)if("object"===N(c))x.merge(v,c.nodeType?[c]:c);else if(Oe.test(c)){for(l=l||y.appendChild(t.createElement("div")),h=(Ee.exec(c)||["",""])[1].toLowerCase(),d=Ce[h]||Ce._default,l.innerHTML=d[1]+x.htmlPrefilter(c)+d[2],m=d[0];m--;)l=l.lastChild;x.merge(v,l.childNodes),(l=y.firstChild).textContent=""}else v.push(t.createTextNode(c));for(y.textContent="",i=0;c=v[i++];)if(r&&x.inArray(c,r)>-1)o&&o.push(c);else if(f=ge(c),l=Se(y.appendChild(c),"script"),f&&ke(l),n)for(m=0;c=l[m++];)Ie.test(c.type||"")&&n.push(c);return y}var Ae=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function De(){return!1}function Re(e,t){return e===function(){try{return S.activeElement}catch(e){}}()==("focus"===t)}function Pe(e,t,n,data,r,o){var c,l;if("object"==typeof t){for(l in"string"!=typeof n&&(data=data||n,n=void 0),t)Pe(e,l,n,data,t[l],o);return e}if(null==data&&null==r?(r=n,data=n=void 0):null==r&&("string"==typeof n?(r=data,data=void 0):(r=data,data=n,n=void 0)),!1===r)r=De;else if(!r)return e;return 1===o&&(c=r,r=function(e){return x().off(e),c.apply(this,arguments)},r.guid=c.guid||(c.guid=x.guid++)),e.each((function(){x.event.add(this,t,r,data,n)}))}function je(e,t,n){n?(oe.set(e,t,!1),x.event.add(e,t,{namespace:!1,handler:function(e){var r,o,c=oe.get(this,t);if(1&e.isTrigger&&this[t]){if(c.length)(x.event.special[t]||{}).delegateType&&e.stopPropagation();else if(c=h.call(arguments),oe.set(this,t,c),r=n(this,t),this[t](),c!==(o=oe.get(this,t))||r?oe.set(this,t,!1):o={},c!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else c.length&&(oe.set(this,t,{value:x.event.trigger(x.extend(c[0],x.Event.prototype),c.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===oe.get(e,t)&&x.event.add(e,t,xe)}x.event={global:{},add:function(e,t,n,data,r){var o,c,l,h,d,f,m,y,v,_,w,T=oe.get(e);if(ie(e))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&x.find.matchesSelector(pe,r),n.guid||(n.guid=x.guid++),(h=T.events)||(h=T.events=Object.create(null)),(c=T.handle)||(c=T.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),d=(t=(t||"").match($)||[""]).length;d--;)v=w=(l=Ae.exec(t[d])||[])[1],_=(l[2]||"").split(".").sort(),v&&(m=x.event.special[v]||{},v=(r?m.delegateType:m.bindType)||v,m=x.event.special[v]||{},f=x.extend({type:v,origType:w,data:data,handler:n,guid:n.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:_.join(".")},o),(y=h[v])||((y=h[v]=[]).delegateCount=0,m.setup&&!1!==m.setup.call(e,data,_,c)||e.addEventListener&&e.addEventListener(v,c)),m.add&&(m.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),r?y.splice(y.delegateCount++,0,f):y.push(f),x.event.global[v]=!0)},remove:function(e,t,n,r,o){var c,l,h,d,f,m,y,v,_,w,T,E=oe.hasData(e)&&oe.get(e);if(E&&(d=E.events)){for(f=(t=(t||"").match($)||[""]).length;f--;)if(_=T=(h=Ae.exec(t[f])||[])[1],w=(h[2]||"").split(".").sort(),_){for(y=x.event.special[_]||{},v=d[_=(r?y.delegateType:y.bindType)||_]||[],h=h[2]&&new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=c=v.length;c--;)m=v[c],!o&&T!==m.origType||n&&n.guid!==m.guid||h&&!h.test(m.namespace)||r&&r!==m.selector&&("**"!==r||!m.selector)||(v.splice(c,1),m.selector&&v.delegateCount--,y.remove&&y.remove.call(e,m));l&&!v.length&&(y.teardown&&!1!==y.teardown.call(e,w,E.handle)||x.removeEvent(e,_,E.handle),delete d[_])}else for(_ in d)x.event.remove(e,_+t[f],n,r,!0);x.isEmptyObject(d)&&oe.remove(e,"handle events")}},dispatch:function(e){var i,t,n,r,o,c,l=new Array(arguments.length),h=x.event.fix(e),d=(oe.get(this,"events")||Object.create(null))[h.type]||[],f=x.event.special[h.type]||{};for(l[0]=h,i=1;i<arguments.length;i++)l[i]=arguments[i];if(h.delegateTarget=this,!f.preDispatch||!1!==f.preDispatch.call(this,h)){for(c=x.event.handlers.call(this,h,d),i=0;(r=c[i++])&&!h.isPropagationStopped();)for(h.currentTarget=r.elem,t=0;(o=r.handlers[t++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!1!==o.namespace&&!h.rnamespace.test(o.namespace)||(h.handleObj=o,h.data=o.data,void 0!==(n=((x.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(h.result=n)&&(h.preventDefault(),h.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,h),h.result}},handlers:function(e,t){var i,n,r,o,c,l=[],h=t.delegateCount,d=e.target;if(h&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(o=[],c={},i=0;i<h;i++)void 0===c[r=(n=t[i]).selector+" "]&&(c[r]=n.needsContext?x(r,this).index(d)>-1:x.find(r,this,null,[d]).length),c[r]&&o.push(n);o.length&&l.push({elem:d,handlers:o})}return d=this,h<t.length&&l.push({elem:d,handlers:t.slice(h)}),l},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:I(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},click:{setup:function(data){var e=this||data;return Te.test(e.type)&&e.click&&M(e,"input")&&je(e,"click",xe),!1},trigger:function(data){var e=this||data;return Te.test(e.type)&&e.click&&M(e,"input")&&je(e,"click"),!0},_default:function(e){var t=e.target;return Te.test(t.type)&&t.click&&M(t,"input")&&oe.get(t,"click")||M(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:De,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:De,isPropagationStopped:De,isImmediatePropagationStopped:De,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},(function(e,t){x.event.special[e]={setup:function(){return je(this,e,Re),!1},trigger:function(){return je(this,e),!0},_default:function(){return!0},delegateType:t}})),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,c=e.handleObj;return o&&(o===r||x.contains(r,o))||(e.type=c.origType,n=c.handler.apply(this,arguments),e.type=t),n}}})),x.fn.extend({on:function(e,t,data,n){return Pe(this,e,t,data,n)},one:function(e,t,data,n){return Pe(this,e,t,data,n,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=De),this.each((function(){x.event.remove(this,e,n,t)}))}});var Le=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function qe(e,content){return M(e,"table")&&M(11!==content.nodeType?content:content.firstChild,"tr")&&x(e).children("tbody")[0]||e}function Ue(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ve(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Be(e,t){var i,n,r,o,c,l;if(1===t.nodeType){if(oe.hasData(e)&&(l=oe.get(e).events))for(r in oe.remove(t,"handle events"),l)for(i=0,n=l[r].length;i<n;i++)x.event.add(t,r,l[r][i]);ae.hasData(e)&&(o=ae.access(e),c=x.extend({},o),ae.set(t,c))}}function We(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Te.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function He(e,t,n,r){t=d(t);var o,c,l,h,f,m,i=0,y=e.length,v=y-1,_=t[0],w=I(_);if(w||y>1&&"string"==typeof _&&!E.checkClone&&Me.test(_))return e.each((function(o){var c=e.eq(o);w&&(t[0]=_.call(this,o,c.html())),He(c,t,n,r)}));if(y&&(c=(o=Ne(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=c),c||r)){for(h=(l=x.map(Se(o,"script"),Ue)).length;i<y;i++)f=o,i!==v&&(f=x.clone(f,!0,!0),h&&x.merge(l,Se(f,"script"))),n.call(e[i],f,i);if(h)for(m=l[l.length-1].ownerDocument,x.map(l,Ve),i=0;i<h;i++)f=l[i],Ie.test(f.type||"")&&!oe.access(f,"globalEval")&&x.contains(m,f)&&(f.src&&"module"!==(f.type||"").toLowerCase()?x._evalUrl&&!f.noModule&&x._evalUrl(f.src,{nonce:f.nonce||f.getAttribute("nonce")},m):O(f.textContent.replace(Fe,""),f,m))}return e}function ze(e,t,n){for(var r,o=t?x.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||x.cleanData(Se(r)),r.parentNode&&(n&&ge(r)&&ke(Se(r,"script")),r.parentNode.removeChild(r));return e}x.extend({htmlPrefilter:function(html){return html},clone:function(e,t,n){var i,r,o,c,l=e.cloneNode(!0),h=ge(e);if(!(E.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(c=Se(l),i=0,r=(o=Se(e)).length;i<r;i++)We(o[i],c[i]);if(t)if(n)for(o=o||Se(e),c=c||Se(l),i=0,r=o.length;i<r;i++)Be(o[i],c[i]);else Be(e,l);return(c=Se(l,"script")).length>0&&ke(c,!h&&Se(e,"script")),l},cleanData:function(e){for(var data,t,n,r=x.event.special,i=0;void 0!==(t=e[i]);i++)if(ie(t)){if(data=t[oe.expando]){if(data.events)for(n in data.events)r[n]?x.event.remove(t,n):x.removeEvent(t,n,data.handle);t[oe.expando]=void 0}t[ae.expando]&&(t[ae.expando]=void 0)}}}),x.fn.extend({detach:function(e){return ze(this,e,!0)},remove:function(e){return ze(this,e)},text:function(e){return Z(this,(function(e){return void 0===e?x.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return He(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)}))},prepend:function(){return He(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return He(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return He(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,i=0;null!=(e=this[i]);i++)1===e.nodeType&&(x.cleanData(Se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return x.clone(this,e,t)}))},html:function(e){return Z(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!Ce[(Ee.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(x.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return He(this,arguments,(function(t){var n=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(Se(this)),n&&n.replaceChild(t,this))}),e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){x.fn[e]=function(e){for(var n,r=[],o=x(e),c=o.length-1,i=0;i<=c;i++)n=i===c?this:this.clone(!0),x(o[i])[t](n),f.apply(r,n.get());return this.pushStack(r)}}));var $e=new RegExp("^("+he+")(?!px)[a-z%]+$","i"),Ke=function(e){var view=e.ownerDocument.defaultView;return view&&view.opener||(view=n),view.getComputedStyle(e)},Ge=function(e,t,n){var r,o,c={};for(o in t)c[o]=e.style[o],e.style[o]=t[o];for(o in r=n.call(e),t)e.style[o]=c[o];return r},Qe=new RegExp(fe.join("|"),"i");function Ye(e,t,n){var r,o,c,l,style=e.style;return(n=n||Ke(e))&&(""!==(l=n.getPropertyValue(t)||n[t])||ge(e)||(l=x.style(e,t)),!E.pixelBoxStyles()&&$e.test(l)&&Qe.test(t)&&(r=style.width,o=style.minWidth,c=style.maxWidth,style.minWidth=style.maxWidth=style.width=l,l=n.width,style.width=r,style.minWidth=o,style.maxWidth=c)),void 0!==l?l+"":l}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(div){f.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",div.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pe.appendChild(f).appendChild(div);var e=n.getComputedStyle(div);r="1%"!==e.top,d=12===t(e.marginLeft),div.style.right="60%",l=36===t(e.right),o=36===t(e.width),div.style.position="absolute",c=12===t(div.offsetWidth/3),pe.removeChild(f),div=null}}function t(e){return Math.round(parseFloat(e))}var r,o,c,l,h,d,f=S.createElement("div"),div=S.createElement("div");div.style&&(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",E.clearCloneStyle="content-box"===div.style.backgroundClip,x.extend(E,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),l},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),d},scrollboxSize:function(){return e(),c},reliableTrDimensions:function(){var table,tr,e,t;return null==h&&(table=S.createElement("table"),tr=S.createElement("tr"),e=S.createElement("div"),table.style.cssText="position:absolute;left:-11111px;border-collapse:separate",tr.style.cssText="border:1px solid",tr.style.height="1px",e.style.height="9px",e.style.display="block",pe.appendChild(table).appendChild(tr).appendChild(e),t=n.getComputedStyle(tr),h=parseInt(t.height,10)+parseInt(t.borderTopWidth,10)+parseInt(t.borderBottomWidth,10)===tr.offsetHeight,pe.removeChild(table)),h}}))}();var Xe=["Webkit","Moz","ms"],Ze=S.createElement("div").style,et={};function tt(e){var t=x.cssProps[e]||et[e];return t||(e in Ze?e:et[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=Xe.length;i--;)if((e=Xe[i]+t)in Ze)return e}(e)||e)}var nt=/^(none|table(?!-c[ea]).+)/,it=/^--/,st={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"};function at(e,t,n){var r=de.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ct(e,t,n,r,o,c){var i="width"===t?1:0,l=0,h=0;if(n===(r?"border":"content"))return 0;for(;i<4;i+=2)"margin"===n&&(h+=x.css(e,n+fe[i],!0,o)),r?("content"===n&&(h-=x.css(e,"padding"+fe[i],!0,o)),"margin"!==n&&(h-=x.css(e,"border"+fe[i]+"Width",!0,o))):(h+=x.css(e,"padding"+fe[i],!0,o),"padding"!==n?h+=x.css(e,"border"+fe[i]+"Width",!0,o):l+=x.css(e,"border"+fe[i]+"Width",!0,o));return!r&&c>=0&&(h+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-c-h-l-.5))||0),h}function ut(e,t,n){var r=Ke(e),o=(!E.boxSizingReliable()||n)&&"border-box"===x.css(e,"boxSizing",!1,r),c=o,l=Ye(e,t,r),h="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(l)){if(!n)return l;l="auto"}return(!E.boxSizingReliable()&&o||!E.reliableTrDimensions()&&M(e,"tr")||"auto"===l||!parseFloat(l)&&"inline"===x.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===x.css(e,"boxSizing",!1,r),(c=h in e)&&(l=e[h])),(l=parseFloat(l)||0)+ct(e,t,n||(o?"border":"content"),c,r,l)+"px"}function lt(e,t,n,r,o){return new lt.prototype.init(e,t,n,r,o)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ye(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,c,l,h=re(t),d=it.test(t),style=e.style;if(d||(t=tt(h)),l=x.cssHooks[t]||x.cssHooks[h],void 0===n)return l&&"get"in l&&void 0!==(o=l.get(e,!1,r))?o:style[t];"string"===(c=typeof n)&&(o=de.exec(n))&&o[1]&&(n=ve(e,t,o),c="number"),null!=n&&n==n&&("number"!==c||d||(n+=o&&o[3]||(x.cssNumber[h]?"":"px")),E.clearCloneStyle||""!==n||0!==t.indexOf("background")||(style[t]="inherit"),l&&"set"in l&&void 0===(n=l.set(e,n,r))||(d?style.setProperty(t,n):style[t]=n))}},css:function(e,t,n,r){var o,c,l,h=re(t);return it.test(t)||(t=tt(h)),(l=x.cssHooks[t]||x.cssHooks[h])&&"get"in l&&(o=l.get(e,!0,n)),void 0===o&&(o=Ye(e,t,r)),"normal"===o&&t in ot&&(o=ot[t]),""===n||n?(c=parseFloat(o),!0===n||isFinite(c)?c||0:o):o}}),x.each(["height","width"],(function(e,t){x.cssHooks[t]={get:function(e,n,r){if(n)return!nt.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,r):Ge(e,st,(function(){return ut(e,t,r)}))},set:function(e,n,r){var o,c=Ke(e),l=!E.scrollboxSize()&&"absolute"===c.position,h=(l||r)&&"border-box"===x.css(e,"boxSizing",!1,c),d=r?ct(e,t,r,h,c):0;return h&&l&&(d-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(c[t])-ct(e,t,"border",!1,c)-.5)),d&&(o=de.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),at(0,n,d)}}})),x.cssHooks.marginLeft=Je(E.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ye(e,"marginLeft"))||e.getBoundingClientRect().left-Ge(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),x.each({margin:"",padding:"",border:"Width"},(function(e,t){x.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+fe[i]+t]=o[i]||o[i-2]||o[0];return r}},"margin"!==e&&(x.cssHooks[e+t].set=at)})),x.fn.extend({css:function(e,t){return Z(this,(function(e,t,n){var r,o,map={},i=0;if(Array.isArray(t)){for(r=Ke(e),o=t.length;i<o;i++)map[t[i]]=x.css(e,t[i],!1,r);return map}return void 0!==n?x.style(e,t,n):x.css(e,t)}),e,t,arguments.length>1)}}),x.Tween=lt,lt.prototype={constructor:lt,init:function(e,t,n,r,o,c){this.elem=e,this.prop=n,this.easing=o||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=c||(x.cssNumber[n]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return e&&e.get?e.get(this):lt.propHooks._default.get(this)},run:function(e){var t,n=lt.propHooks[this.prop];return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):lt.propHooks._default.set(this),this}},lt.prototype.init.prototype=lt.prototype,lt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||!x.cssHooks[e.prop]&&null==e.elem.style[tt(e.prop)]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}},lt.propHooks.scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"},x.fx=lt.prototype.init,x.fx.step={};var ht,ft,pt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;function mt(){ft&&(!1===S.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(mt):n.setTimeout(mt,x.fx.interval),x.fx.tick())}function yt(){return n.setTimeout((function(){ht=void 0})),ht=Date.now()}function vt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=fe[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function _t(e,t,n){for(var r,o=(wt.tweeners[t]||[]).concat(wt.tweeners["*"]),c=0,l=o.length;c<l;c++)if(r=o[c].call(n,t,e))return r}function wt(e,t,n){var r,o,c=0,l=wt.prefilters.length,h=x.Deferred().always((function(){delete d.elem})),d=function(){if(o)return!1;for(var t=ht||yt(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),c=0,l=f.tweens.length;c<l;c++)f.tweens[c].run(r);return h.notifyWith(e,[f,r,n]),r<1&&l?n:(l||h.notifyWith(e,[f,1,0]),h.resolveWith(e,[f]),!1)},f=h.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:ht||yt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)f.tweens[n].run(1);return t?(h.notifyWith(e,[f,1,0]),h.resolveWith(e,[f,t])):h.rejectWith(e,[f,t]),this}}),m=f.props;for(!function(e,t){var n,r,o,c,l;for(n in e)if(o=t[r=re(n)],c=e[n],Array.isArray(c)&&(o=c[1],c=e[n]=c[0]),n!==r&&(e[r]=c,delete e[n]),(l=x.cssHooks[r])&&"expand"in l)for(n in c=l.expand(c),delete e[r],c)n in e||(e[n]=c[n],t[n]=o);else t[r]=o}(m,f.opts.specialEasing);c<l;c++)if(r=wt.prefilters[c].call(f,e,m,f.opts))return I(r.stop)&&(x._queueHooks(f.elem,f.opts.queue).stop=r.stop.bind(r)),r;return x.map(m,_t,f),I(f.opts.start)&&f.opts.start.call(e,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),x.fx.timer(x.extend(d,{elem:e,anim:f,queue:f.opts.queue})),f}x.Animation=x.extend(wt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ve(n.elem,e,de.exec(t),n),n}]},tweener:function(e,t){I(e)?(t=e,e=["*"]):e=e.match($);for(var n,r=0,o=e.length;r<o;r++)n=e[r],wt.tweeners[n]=wt.tweeners[n]||[],wt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,c,l,h,d,f,m,y="width"in t||"height"in t,v=this,_={},style=e.style,w=e.nodeType&&ye(e),T=oe.get(e,"fxshow");for(r in n.queue||(null==(l=x._queueHooks(e,"fx")).unqueued&&(l.unqueued=0,h=l.empty.fire,l.empty.fire=function(){l.unqueued||h()}),l.unqueued++,v.always((function(){v.always((function(){l.unqueued--,x.queue(e,"fx").length||l.empty.fire()}))}))),t)if(o=t[r],pt.test(o)){if(delete t[r],c=c||"toggle"===o,o===(w?"hide":"show")){if("show"!==o||!T||void 0===T[r])continue;w=!0}_[r]=T&&T[r]||x.style(e,r)}if((d=!x.isEmptyObject(t))||!x.isEmptyObject(_))for(r in y&&1===e.nodeType&&(n.overflow=[style.overflow,style.overflowX,style.overflowY],null==(f=T&&T.display)&&(f=oe.get(e,"display")),"none"===(m=x.css(e,"display"))&&(f?m=f:(be([e],!0),f=e.style.display||f,m=x.css(e,"display"),be([e]))),("inline"===m||"inline-block"===m&&null!=f)&&"none"===x.css(e,"float")&&(d||(v.done((function(){style.display=f})),null==f&&(m=style.display,f="none"===m?"":m)),style.display="inline-block")),n.overflow&&(style.overflow="hidden",v.always((function(){style.overflow=n.overflow[0],style.overflowX=n.overflow[1],style.overflowY=n.overflow[2]}))),d=!1,_)d||(T?"hidden"in T&&(w=T.hidden):T=oe.access(e,"fxshow",{display:f}),c&&(T.hidden=!w),w&&be([e],!0),v.done((function(){for(r in w||be([e]),oe.remove(e,"fxshow"),_)x.style(e,r,_[r])}))),d=_t(w?T[r]:0,r,v),r in T||(T[r]=d.start,w&&(d.end=d.start,d.start=0))}],prefilter:function(e,t){t?wt.prefilters.unshift(e):wt.prefilters.push(e)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||I(e)&&e,duration:e,easing:n&&t||t&&!I(t)&&t};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in x.fx.speeds?r.duration=x.fx.speeds[r.duration]:r.duration=x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){I(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=x.isEmptyObject(e),c=x.speed(t,n,r),l=function(){var t=wt(this,x.extend({},e),c);(o||oe.get(this,"finish"))&&t.stop(!0)};return l.finish=l,o||!1===c.queue?this.each(l):this.queue(c.queue,l)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",c=x.timers,data=oe.get(this);if(o)data[o]&&data[o].stop&&r(data[o]);else for(o in data)data[o]&&data[o].stop&&gt.test(o)&&r(data[o]);for(o=c.length;o--;)c[o].elem!==this||null!=e&&c[o].queue!==e||(c[o].anim.stop(n),t=!1,c.splice(o,1));!t&&n||x.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,data=oe.get(this),n=data[e+"queue"],r=data[e+"queueHooks"],o=x.timers,c=n?n.length:0;for(data.finish=!0,x.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<c;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete data.finish}))}}),x.each(["toggle","show","hide"],(function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(vt(t,!0),e,r,o)}})),x.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),x.timers=[],x.fx.tick=function(){var e,i=0,t=x.timers;for(ht=Date.now();i<t.length;i++)(e=t[i])()||t[i]!==e||t.splice(i--,1);t.length||x.fx.stop(),ht=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){ft||(ft=!0,mt())},x.fx.stop=function(){ft=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(time,e){return time=x.fx&&x.fx.speeds[time]||time,e=e||"fx",this.queue(e,(function(e,t){var r=n.setTimeout(e,time);t.stop=function(){n.clearTimeout(r)}}))},function(){var input=S.createElement("input"),e=S.createElement("select").appendChild(S.createElement("option"));input.type="checkbox",E.checkOn=""!==input.value,E.optSelected=e.selected,(input=S.createElement("input")).value="t",input.type="radio",E.radioValue="t"===input.value}();var bt,Tt=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return Z(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){x.removeAttr(this,e)}))}}),x.extend({attr:function(e,t,n){var r,o,c=e.nodeType;if(3!==c&&8!==c&&2!==c)return void 0===e.getAttribute?x.prop(e,t,n):(1===c&&x.isXMLDoc(e)||(o=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?bt:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=x.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!E.radioValue&&"radio"===t&&M(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match($);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),bt={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=Tt[t]||x.find.attr;Tt[t]=function(e,t,r){var o,c,l=t.toLowerCase();return r||(c=Tt[l],Tt[l]=o,o=null!=n(e,t,r)?l:null,Tt[l]=c),o}}));var Et=/^(?:input|select|textarea|button)$/i,It=/^(?:a|area)$/i;function Ct(e){return(e.match($)||[]).join(" ")}function St(e){return e.getAttribute&&e.getAttribute("class")||""}function kt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match($)||[]}x.fn.extend({prop:function(e,t){return Z(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[x.propFix[e]||e]}))}}),x.extend({prop:function(e,t,n){var r,o,c=e.nodeType;if(3!==c&&8!==c&&2!==c)return 1===c&&x.isXMLDoc(e)||(t=x.propFix[t]||t,o=x.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||It.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),E.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){x.propFix[this.toLowerCase()]=this})),x.fn.extend({addClass:function(e){var t,n,r,o,c,l,h,i=0;if(I(e))return this.each((function(t){x(this).addClass(e.call(this,t,St(this)))}));if((t=kt(e)).length)for(;n=this[i++];)if(o=St(n),r=1===n.nodeType&&" "+Ct(o)+" "){for(l=0;c=t[l++];)r.indexOf(" "+c+" ")<0&&(r+=c+" ");o!==(h=Ct(r))&&n.setAttribute("class",h)}return this},removeClass:function(e){var t,n,r,o,c,l,h,i=0;if(I(e))return this.each((function(t){x(this).removeClass(e.call(this,t,St(this)))}));if(!arguments.length)return this.attr("class","");if((t=kt(e)).length)for(;n=this[i++];)if(o=St(n),r=1===n.nodeType&&" "+Ct(o)+" "){for(l=0;c=t[l++];)for(;r.indexOf(" "+c+" ")>-1;)r=r.replace(" "+c+" "," ");o!==(h=Ct(r))&&n.setAttribute("class",h)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):I(e)?this.each((function(i){x(this).toggleClass(e.call(this,i,St(this),t),t)})):this.each((function(){var t,i,o,c;if(r)for(i=0,o=x(this),c=kt(e);t=c[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=St(this))&&oe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":oe.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+Ct(St(n))+" ").indexOf(t)>-1)return!0;return!1}});var Ot=/\r/g;x.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=I(e),this.each((function(i){var n;1===this.nodeType&&(null==(n=r?e.call(this,i,x(this).val()):e)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=x.map(n,(function(e){return null==e?"":e+""}))),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):o?(t=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(Ot,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:Ct(x.text(e))}},select:{get:function(e){var t,option,i,n=e.options,r=e.selectedIndex,o="select-one"===e.type,c=o?null:[],l=o?r+1:n.length;for(i=r<0?l:o?r:0;i<l;i++)if(((option=n[i]).selected||i===r)&&!option.disabled&&(!option.parentNode.disabled||!M(option.parentNode,"optgroup"))){if(t=x(option).val(),o)return t;c.push(t)}return c},set:function(e,t){for(var n,option,r=e.options,o=x.makeArray(t),i=r.length;i--;)((option=r[i]).selected=x.inArray(x.valHooks.option.get(option),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],(function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=x.inArray(x(e).val(),t)>-1}},E.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),E.focusin="onfocusin"in n;var Nt=/^(?:focusinfocus|focusoutblur)$/,At=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(e,data,t,r){var i,o,c,l,h,d,f,m,y=[t||S],v=_.call(e,"type")?e.type:e,w=_.call(e,"namespace")?e.namespace.split("."):[];if(o=m=c=t=t||S,3!==t.nodeType&&8!==t.nodeType&&!Nt.test(v+x.event.triggered)&&(v.indexOf(".")>-1&&(w=v.split("."),v=w.shift(),w.sort()),h=v.indexOf(":")<0&&"on"+v,(e=e[x.expando]?e:new x.Event(v,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=w.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=t),data=null==data?[e]:x.makeArray(data,[e]),f=x.event.special[v]||{},r||!f.trigger||!1!==f.trigger.apply(t,data))){if(!r&&!f.noBubble&&!C(t)){for(l=f.delegateType||v,Nt.test(l+v)||(o=o.parentNode);o;o=o.parentNode)y.push(o),c=o;c===(t.ownerDocument||S)&&y.push(c.defaultView||c.parentWindow||n)}for(i=0;(o=y[i++])&&!e.isPropagationStopped();)m=o,e.type=i>1?l:f.bindType||v,(d=(oe.get(o,"events")||Object.create(null))[e.type]&&oe.get(o,"handle"))&&d.apply(o,data),(d=h&&o[h])&&d.apply&&ie(o)&&(e.result=d.apply(o,data),!1===e.result&&e.preventDefault());return e.type=v,r||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(y.pop(),data)||!ie(t)||h&&I(t[v])&&!C(t)&&((c=t[h])&&(t[h]=null),x.event.triggered=v,e.isPropagationStopped()&&m.addEventListener(v,At),t[v](),e.isPropagationStopped()&&m.removeEventListener(v,At),x.event.triggered=void 0,c&&(t[h]=c)),e.result}},simulate:function(e,t,n){var r=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(r,null,t)}}),x.fn.extend({trigger:function(e,data){return this.each((function(){x.event.trigger(e,data,this)}))},triggerHandler:function(e,data){var t=this[0];if(t)return x.event.trigger(e,data,t,!0)}}),E.focusin||x.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,o=oe.access(r,t);o||r.addEventListener(e,n,!0),oe.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=oe.access(r,t)-1;o?oe.access(r,t,o):(r.removeEventListener(e,n,!0),oe.remove(r,t))}}}));var xt=n.location,Dt={guid:Date.now()},Rt=/\?/;x.parseXML=function(data){var e,t;if(!data||"string"!=typeof data)return null;try{e=(new n.DOMParser).parseFromString(data,"text/xml")}catch(e){}return t=e&&e.getElementsByTagName("parsererror")[0],e&&!t||x.error("Invalid XML: "+(t?x.map(t.childNodes,(function(e){return e.textContent})).join("\n"):data)),e};var Pt=/\[\]$/,jt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;function Ft(e,t,n,r){var o;if(Array.isArray(t))x.each(t,(function(i,t){n||Pt.test(e)?r(e,t):Ft(e+"["+("object"==typeof t&&null!=t?i:"")+"]",t,n,r)}));else if(n||"object"!==N(t))r(e,t);else for(o in t)Ft(e+"["+o+"]",t[o],n,r)}x.param=function(a,e){var t,s=[],n=function(e,t){var n=I(t)?t():t;s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==a)return"";if(Array.isArray(a)||a.jquery&&!x.isPlainObject(a))x.each(a,(function(){n(this.name,this.value)}));else for(t in a)Ft(t,a[t],e,n);return s.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&Mt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!Te.test(e))})).map((function(e,t){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,(function(e){return{name:t.name,value:e.replace(jt,"\r\n")}})):{name:t.name,value:n.replace(jt,"\r\n")}})).get()}});var qt=/%20/g,Ut=/#.*$/,Vt=/([?&])_=[^&]*/,Bt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Wt=/^(?:GET|HEAD)$/,Ht=/^\/\//,zt={},$t={},Kt="*/".concat("*"),Gt=S.createElement("a");function Qt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match($)||[];if(I(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Yt(e,t,n,r){var o={},c=e===$t;function l(h){var d;return o[h]=!0,x.each(e[h]||[],(function(e,h){var f=h(t,n,r);return"string"!=typeof f||c||o[f]?c?!(d=f):void 0:(t.dataTypes.unshift(f),l(f),!1)})),d}return l(t.dataTypes[0])||!o["*"]&&l("*")}function Jt(e,t){var n,r,o=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}Gt.href=xt.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jt(Jt(e,x.ajaxSettings),t):Jt(x.ajaxSettings,e)},ajaxPrefilter:Qt(zt),ajaxTransport:Qt($t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,c,l,h,d,f,m,i,y,s=x.ajaxSetup({},t),v=s.context||s,_=s.context&&(v.nodeType||v.jquery)?x(v):x.event,w=x.Deferred(),T=x.Callbacks("once memory"),E=s.statusCode||{},I={},C={},k="canceled",O={readyState:0,getResponseHeader:function(e){var t;if(f){if(!l)for(l={};t=Bt.exec(c);)l[t[1].toLowerCase()+" "]=(l[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=l[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return f?c:null},setRequestHeader:function(e,t){return null==f&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,I[e]=t),this},overrideMimeType:function(e){return null==f&&(s.mimeType=e),this},statusCode:function(map){var code;if(map)if(f)O.always(map[O.status]);else for(code in map)E[code]=[E[code],map[code]];return this},abort:function(e){var t=e||k;return r&&r.abort(t),N(0,t),this}};if(w.promise(O),s.url=((e||s.url||xt.href)+"").replace(Ht,xt.protocol+"//"),s.type=t.method||t.type||s.method||s.type,s.dataTypes=(s.dataType||"*").toLowerCase().match($)||[""],null==s.crossDomain){d=S.createElement("a");try{d.href=s.url,d.href=d.href,s.crossDomain=Gt.protocol+"//"+Gt.host!=d.protocol+"//"+d.host}catch(e){s.crossDomain=!0}}if(s.data&&s.processData&&"string"!=typeof s.data&&(s.data=x.param(s.data,s.traditional)),Yt(zt,s,t,O),f)return O;for(i in(m=x.event&&s.global)&&0==x.active++&&x.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!Wt.test(s.type),o=s.url.replace(Ut,""),s.hasContent?s.data&&s.processData&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&(s.data=s.data.replace(qt,"+")):(y=s.url.slice(o.length),s.data&&(s.processData||"string"==typeof s.data)&&(o+=(Rt.test(o)?"&":"?")+s.data,delete s.data),!1===s.cache&&(o=o.replace(Vt,"$1"),y=(Rt.test(o)?"&":"?")+"_="+Dt.guid+++y),s.url=o+y),s.ifModified&&(x.lastModified[o]&&O.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&O.setRequestHeader("If-None-Match",x.etag[o])),(s.data&&s.hasContent&&!1!==s.contentType||t.contentType)&&O.setRequestHeader("Content-Type",s.contentType),O.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+Kt+"; q=0.01":""):s.accepts["*"]),s.headers)O.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(v,O,s)||f))return O.abort();if(k="abort",T.add(s.complete),O.done(s.success),O.fail(s.error),r=Yt($t,s,t,O)){if(O.readyState=1,m&&_.trigger("ajaxSend",[O,s]),f)return O;s.async&&s.timeout>0&&(h=n.setTimeout((function(){O.abort("timeout")}),s.timeout));try{f=!1,r.send(I,N)}catch(e){if(f)throw e;N(-1,e)}}else N(-1,"No Transport");function N(e,t,l,d){var y,I,C,S,k,N=t;f||(f=!0,h&&n.clearTimeout(h),r=void 0,c=d||"",O.readyState=e>0?4:0,y=e>=200&&e<300||304===e,l&&(S=function(s,e,t){for(var n,r,o,c,l=s.contents,h=s.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=s.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in l)if(l[r]&&l[r].test(n)){h.unshift(r);break}if(h[0]in t)o=h[0];else{for(r in t){if(!h[0]||s.converters[r+" "+h[0]]){o=r;break}c||(c=r)}o=o||c}if(o)return o!==h[0]&&h.unshift(o),t[o]}(s,O,l)),!y&&x.inArray("script",s.dataTypes)>-1&&x.inArray("json",s.dataTypes)<0&&(s.converters["text script"]=function(){}),S=function(s,e,t,n){var r,o,c,l,h,d={},f=s.dataTypes.slice();if(f[1])for(c in s.converters)d[c.toLowerCase()]=s.converters[c];for(o=f.shift();o;)if(s.responseFields[o]&&(t[s.responseFields[o]]=e),!h&&n&&s.dataFilter&&(e=s.dataFilter(e,s.dataType)),h=o,o=f.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(!(c=d[h+" "+o]||d["* "+o]))for(r in d)if((l=r.split(" "))[1]===o&&(c=d[h+" "+l[0]]||d["* "+l[0]])){!0===c?c=d[r]:!0!==d[r]&&(o=l[0],f.unshift(l[1]));break}if(!0!==c)if(c&&s.throws)e=c(e);else try{e=c(e)}catch(e){return{state:"parsererror",error:c?e:"No conversion from "+h+" to "+o}}}return{state:"success",data:e}}(s,S,O,y),y?(s.ifModified&&((k=O.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=k),(k=O.getResponseHeader("etag"))&&(x.etag[o]=k)),204===e||"HEAD"===s.type?N="nocontent":304===e?N="notmodified":(N=S.state,I=S.data,y=!(C=S.error))):(C=N,!e&&N||(N="error",e<0&&(e=0))),O.status=e,O.statusText=(t||N)+"",y?w.resolveWith(v,[I,N,O]):w.rejectWith(v,[O,N,C]),O.statusCode(E),E=void 0,m&&_.trigger(y?"ajaxSuccess":"ajaxError",[O,s,y?I:C]),T.fireWith(v,[O,N]),m&&(_.trigger("ajaxComplete",[O,s]),--x.active||x.event.trigger("ajaxStop")))}return O},getJSON:function(e,data,t){return x.get(e,data,t,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],(function(e,t){x[t]=function(e,data,n,r){return I(data)&&(r=r||n,n=data,data=void 0),x.ajax(x.extend({url:e,type:t,dataType:r,data:data,success:n},x.isPlainObject(e)&&e))}})),x.ajaxPrefilter((function(s){var i;for(i in s.headers)"content-type"===i.toLowerCase()&&(s.contentType=s.headers[i]||"")})),x._evalUrl=function(e,t,n){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){x.globalEval(e,t,n)}})},x.fn.extend({wrapAll:function(html){var e;return this[0]&&(I(html)&&(html=html.call(this[0])),e=x(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(html){return I(html)?this.each((function(i){x(this).wrapInner(html.call(this,i))})):this.each((function(){var e=x(this),t=e.contents();t.length?t.wrapAll(html):e.append(html)}))},wrap:function(html){var e=I(html);return this.each((function(i){x(this).wrapAll(e?html.call(this,i):html)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){x(this).replaceWith(this.childNodes)})),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},Zt=x.ajaxSettings.xhr();E.cors=!!Zt&&"withCredentials"in Zt,E.ajax=Zt=!!Zt,x.ajaxTransport((function(e){var t,r;if(E.cors||Zt&&!e.crossDomain)return{send:function(o,c){var i,l=e.xhr();if(l.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)l[i]=e.xhrFields[i];for(i in e.mimeType&&l.overrideMimeType&&l.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)l.setRequestHeader(i,o[i]);t=function(e){return function(){t&&(t=r=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?c(0,"error"):c(l.status,l.statusText):c(Xt[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=t(),r=l.onerror=l.ontimeout=t("error"),void 0!==l.onabort?l.onabort=r:l.onreadystatechange=function(){4===l.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{l.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),x.ajaxPrefilter((function(s){s.crossDomain&&(s.contents.script=!1)})),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){return x.globalEval(text),text}}}),x.ajaxPrefilter("script",(function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET")})),x.ajaxTransport("script",(function(s){var script,e;if(s.crossDomain||s.scriptAttrs)return{send:function(t,n){script=x("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",e=function(t){script.remove(),e=null,t&&n("error"===t.type?404:200,t.type)}),S.head.appendChild(script[0])},abort:function(){e&&e()}}}));var body,en=[],tn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||x.expando+"_"+Dt.guid++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",(function(s,e,t){var r,o,c,l=!1!==s.jsonp&&(tn.test(s.url)?"url":"string"==typeof s.data&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(s.data)&&"data");if(l||"jsonp"===s.dataTypes[0])return r=s.jsonpCallback=I(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,l?s[l]=s[l].replace(tn,"$1"+r):!1!==s.jsonp&&(s.url+=(Rt.test(s.url)?"&":"?")+s.jsonp+"="+r),s.converters["script json"]=function(){return c||x.error(r+" was not called"),c[0]},s.dataTypes[0]="json",o=n[r],n[r]=function(){c=arguments},t.always((function(){void 0===o?x(n).removeProp(r):n[r]=o,s[r]&&(s.jsonpCallback=e.jsonpCallback,en.push(r)),c&&I(o)&&o(c[0]),c=o=void 0})),"script"})),E.createHTMLDocument=((body=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===body.childNodes.length),x.parseHTML=function(data,e,t){return"string"!=typeof data?[]:("boolean"==typeof e&&(t=e,e=!1),e||(E.createHTMLDocument?((base=(e=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,e.head.appendChild(base)):e=S),r=!t&&[],(n=F.exec(data))?[e.createElement(n[1])]:(n=Ne([data],e,r),r&&r.length&&x(r).remove(),x.merge([],n.childNodes)));var base,n,r},x.fn.load=function(e,t,n){var r,o,c,l=this,h=e.indexOf(" ");return h>-1&&(r=Ct(e.slice(h)),e=e.slice(0,h)),I(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),l.length>0&&x.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){c=arguments,l.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)})).always(n&&function(e,t){l.each((function(){n.apply(this,c||[e.responseText,t,e])}))}),this},x.expr.pseudos.animated=function(e){return x.grep(x.timers,(function(t){return e===t.elem})).length},x.offset={setOffset:function(e,t,i){var n,r,o,c,l,h,d=x.css(e,"position"),f=x(e),m={};"static"===d&&(e.style.position="relative"),l=f.offset(),o=x.css(e,"top"),h=x.css(e,"left"),("absolute"===d||"fixed"===d)&&(o+h).indexOf("auto")>-1?(c=(n=f.position()).top,r=n.left):(c=parseFloat(o)||0,r=parseFloat(h)||0),I(t)&&(t=t.call(e,i,x.extend({},l))),null!=t.top&&(m.top=t.top-l.top+c),null!=t.left&&(m.left=t.left-l.left+r),"using"in t?t.using.call(e,m):f.css(m)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(i){x.offset.setOffset(this,e,i)}));var rect,t,n=this[0];return n?n.getClientRects().length?(rect=n.getBoundingClientRect(),t=n.ownerDocument.defaultView,{top:rect.top+t.pageYOffset,left:rect.left+t.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===x.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),o.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-x.css(r,"marginTop",!0),left:t.left-o.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||pe}))}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;x.fn[e]=function(r){return Z(this,(function(e,r,o){var c;if(C(e)?c=e:9===e.nodeType&&(c=e.defaultView),void 0===o)return c?c[t]:e[r];c?c.scrollTo(n?c.pageXOffset:o,n?o:c.pageYOffset):e[r]=o}),e,r,arguments.length)}})),x.each(["top","left"],(function(e,t){x.cssHooks[t]=Je(E.pixelPosition,(function(e,n){if(n)return n=Ye(e,t),$e.test(n)?x(e).position()[t]+"px":n}))})),x.each({Height:"height",Width:"width"},(function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){x.fn[r]=function(o,c){var l=arguments.length&&(n||"boolean"!=typeof o),h=n||(!0===o||!0===c?"margin":"border");return Z(this,(function(t,n,o){var c;return C(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(c=t.documentElement,Math.max(t.body["scroll"+e],c["scroll"+e],t.body["offset"+e],c["offset"+e],c["client"+e])):void 0===o?x.css(t,n,h):x.style(t,n,o,h)}),t,l?o:void 0,l)}}))})),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){x.fn[t]=function(e){return this.on(t,e)}})),x.fn.extend({bind:function(e,data,t){return this.on(e,null,data,t)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,data,n){return this.on(t,e,data,n)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){x.fn[t]=function(data,e){return arguments.length>0?this.on(t,null,data,e):this.trigger(t)}}));var nn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;x.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),I(e))return r=h.call(arguments,2),o=function(){return e.apply(t||this,r.concat(h.call(arguments)))},o.guid=e.guid=e.guid||x.guid++,o},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=M,x.isFunction=I,x.isWindow=C,x.camelCase=re,x.type=N,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},x.trim=function(text){return null==text?"":(text+"").replace(nn,"")},void 0===(r=function(){return x}.apply(t,[]))||(e.exports=r);var rn=n.jQuery,sn=n.$;return x.noConflict=function(e){return n.$===x&&(n.$=sn),e&&n.jQuery===x&&(n.jQuery=rn),x},void 0===o&&(n.jQuery=n.$=x),x}))},272:function(e,t,n){"use strict";n.r(t),function(e){var n="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,r=function(){for(var e=["Edge","Trident","Firefox"],i=0;i<e.length;i+=1)if(n&&navigator.userAgent.indexOf(e[i])>=0)return 1;return 0}();var o=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),r))}};function c(e){return e&&"[object Function]"==={}.toString.call(e)}function l(element,e){if(1!==element.nodeType)return[];var t=element.ownerDocument.defaultView.getComputedStyle(element,null);return e?t[e]:t}function h(element){return"HTML"===element.nodeName?element:element.parentNode||element.host}function d(element){if(!element)return document.body;switch(element.nodeName){case"HTML":case"BODY":return element.ownerDocument.body;case"#document":return element.body}var e=l(element),t=e.overflow,n=e.overflowX,r=e.overflowY;return/(auto|scroll|overlay)/.test(t+r+n)?element:d(h(element))}function f(e){return e&&e.referenceNode?e.referenceNode:e}var m=n&&!(!window.MSInputMethodContext||!document.documentMode),y=n&&/MSIE 10/.test(navigator.userAgent);function v(e){return 11===e?m:10===e?y:m||y}function _(element){if(!element)return document.documentElement;for(var e=v(10)?document.body:null,t=element.offsetParent||null;t===e&&element.nextElementSibling;)t=(element=element.nextElementSibling).offsetParent;var n=t&&t.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===l(t,"position")?_(t):t:element?element.ownerDocument.documentElement:document.documentElement}function w(e){return null!==e.parentNode?w(e.parentNode):e}function T(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,o=n?t:e,c=document.createRange();c.setStart(r,0),c.setEnd(o,0);var element,l,h=c.commonAncestorContainer;if(e!==h&&t!==h||r.contains(o))return"BODY"===(l=(element=h).nodeName)||"HTML"!==l&&_(element.firstElementChild)!==element?_(h):h;var d=w(e);return d.host?T(d.host,t):T(e,w(t).host)}function E(element){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",t="top"===e?"scrollTop":"scrollLeft",n=element.nodeName;if("BODY"===n||"HTML"===n){var html=element.ownerDocument.documentElement,r=element.ownerDocument.scrollingElement||html;return r[t]}return element[t]}function I(rect,element){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=E(element,"top"),n=E(element,"left"),r=e?-1:1;return rect.top+=t*r,rect.bottom+=t*r,rect.left+=n*r,rect.right+=n*r,rect}function C(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+r+"Width"])}function S(e,body,html,t){return Math.max(body["offset"+e],body["scroll"+e],html["client"+e],html["offset"+e],html["scroll"+e],v(10)?parseInt(html["offset"+e])+parseInt(t["margin"+("Height"===e?"Top":"Left")])+parseInt(t["margin"+("Height"===e?"Bottom":"Right")]):0)}function k(e){var body=e.body,html=e.documentElement,t=v(10)&&getComputedStyle(html);return{height:S("Height",body,html,t),width:S("Width",body,html,t)}}var O=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},N=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},x=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};function D(e){return x({},e,{right:e.left+e.width,bottom:e.top+e.height})}function R(element){var rect={};try{if(v(10)){rect=element.getBoundingClientRect();var e=E(element,"top"),t=E(element,"left");rect.top+=e,rect.left+=t,rect.bottom+=e,rect.right+=t}else rect=element.getBoundingClientRect()}catch(e){}var n={left:rect.left,top:rect.top,width:rect.right-rect.left,height:rect.bottom-rect.top},r="HTML"===element.nodeName?k(element.ownerDocument):{},o=r.width||element.clientWidth||n.width,c=r.height||element.clientHeight||n.height,h=element.offsetWidth-o,d=element.offsetHeight-c;if(h||d){var f=l(element);h-=C(f,"x"),d-=C(f,"y"),n.width-=h,n.height-=d}return D(n)}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=v(10),o="HTML"===t.nodeName,c=R(e),h=R(t),f=d(e),m=l(t),y=parseFloat(m.borderTopWidth),_=parseFloat(m.borderLeftWidth);n&&o&&(h.top=Math.max(h.top,0),h.left=Math.max(h.left,0));var w=D({top:c.top-h.top-y,left:c.left-h.left-_,width:c.width,height:c.height});if(w.marginTop=0,w.marginLeft=0,!r&&o){var T=parseFloat(m.marginTop),E=parseFloat(m.marginLeft);w.top-=y-T,w.bottom-=y-T,w.left-=_-E,w.right-=_-E,w.marginTop=T,w.marginLeft=E}return(r&&!n?t.contains(f):t===f&&"BODY"!==f.nodeName)&&(w=I(w,t)),w}function j(element){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],html=element.ownerDocument.documentElement,t=P(element,html),n=Math.max(html.clientWidth,window.innerWidth||0),r=Math.max(html.clientHeight,window.innerHeight||0),o=e?0:E(html),c=e?0:E(html,"left"),l={top:o-t.top+t.marginTop,left:c-t.left+t.marginLeft,width:n,height:r};return D(l)}function L(element){var e=element.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===l(element,"position"))return!0;var t=h(element);return!!t&&L(t)}function M(element){if(!element||!element.parentElement||v())return document.documentElement;for(var e=element.parentElement;e&&"none"===l(e,"transform");)e=e.parentElement;return e||document.documentElement}function F(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c={top:0,left:0},l=o?M(e):T(e,f(t));if("viewport"===r)c=j(l,o);else{var m=void 0;"scrollParent"===r?"BODY"===(m=d(h(t))).nodeName&&(m=e.ownerDocument.documentElement):m="window"===r?e.ownerDocument.documentElement:r;var y=P(m,l,o);if("HTML"!==m.nodeName||L(l))c=y;else{var v=k(e.ownerDocument),_=v.height,w=v.width;c.top+=y.top-y.marginTop,c.bottom=_+y.top,c.left+=y.left-y.marginLeft,c.right=w+y.left}}var E="number"==typeof(n=n||0);return c.left+=E?n:n.left||0,c.top+=E?n:n.top||0,c.right-=E?n:n.right||0,c.bottom-=E?n:n.bottom||0,c}function U(e){return e.width*e.height}function V(e,t,n,r,o){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var l=F(n,r,c,o),h={top:{width:l.width,height:t.top-l.top},right:{width:l.right-t.right,height:l.height},bottom:{width:l.width,height:l.bottom-t.bottom},left:{width:t.left-l.left,height:l.height}},d=Object.keys(h).map((function(e){return x({key:e},h[e],{area:U(h[e])})})).sort((function(a,b){return b.area-a.area})),f=d.filter((function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight})),m=f.length>0?f[0].key:d[0].key,y=e.split("-")[1];return m+(y?"-"+y:"")}function B(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=r?M(t):T(t,f(n));return P(n,o,r)}function W(element){var e=element.ownerDocument.defaultView.getComputedStyle(element),t=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),n=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:element.offsetWidth+n,height:element.offsetHeight+t}}function H(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function z(e,t,n){n=n.split("-")[0];var r=W(e),o={width:r.width,height:r.height},c=-1!==["right","left"].indexOf(n),l=c?"top":"left",h=c?"left":"top",d=c?"height":"width",f=c?"width":"height";return o[l]=t[l]+t[d]/2-r[d]/2,o[h]=n===h?t[h]-r[f]:t[H(h)],o}function $(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function K(e,data,t){return(void 0===t?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===n}));var r=$(e,(function(e){return e[t]===n}));return e.indexOf(r)}(e,"name",t))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var t=e.function||e.fn;e.enabled&&c(t)&&(data.offsets.popper=D(data.offsets.popper),data.offsets.reference=D(data.offsets.reference),data=t(data,e))})),data}function G(){if(!this.state.isDestroyed){var data={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};data.offsets.reference=B(this.state,this.popper,this.reference,this.options.positionFixed),data.placement=V(this.options.placement,data.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),data.originalPlacement=data.placement,data.positionFixed=this.options.positionFixed,data.offsets.popper=z(this.popper,data.offsets.reference,data.placement),data.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",data=K(this.modifiers,data),this.state.isCreated?this.options.onUpdate(data):(this.state.isCreated=!0,this.options.onCreate(data))}}function Q(e,t){return e.some((function(e){var n=e.name;return e.enabled&&n===t}))}function Y(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var r=t[i],o=r?""+r+n:e;if(void 0!==document.body.style[o])return o}return null}function J(){return this.state.isDestroyed=!0,Q(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Y("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function X(element){var e=element.ownerDocument;return e?e.defaultView:window}function Z(e,t,n,r){var o="BODY"===e.nodeName,c=o?e.ownerDocument.defaultView:e;c.addEventListener(t,n,{passive:!0}),o||Z(d(c.parentNode),t,n,r),r.push(c)}function ee(e,t,n,r){n.updateBound=r,X(e).addEventListener("resize",n.updateBound,{passive:!0});var o=d(e);return Z(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}function te(){this.state.eventsEnabled||(this.state=ee(this.reference,this.options,this.state,this.scheduleUpdate))}function ne(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,X(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function re(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function ie(element,e){Object.keys(e).forEach((function(t){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&re(e[t])&&(n="px"),element.style[t]=e[t]+n}))}var se=n&&/Firefox/i.test(navigator.userAgent);function oe(e,t,n){var r=$(e,(function(e){return e.name===t})),o=!!r&&e.some((function(e){return e.name===n&&e.enabled&&e.order<r.order}));if(!o){var c="`"+t+"`",l="`"+n+"`";console.warn(l+" modifier is required by "+c+" modifier in order to work, be sure to include it before "+c+"!")}return o}var ae=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ce=ae.slice(3);function ue(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ce.indexOf(e),r=ce.slice(n+1).concat(ce.slice(0,n));return t?r.reverse():r}var le="flip",he="clockwise",de="counterclockwise";function fe(e,t,n,r){var o=[0,0],c=-1!==["right","left"].indexOf(r),l=e.split(/(\+|\-)/).map((function(e){return e.trim()})),h=l.indexOf($(l,(function(e){return-1!==e.search(/,|\s/)})));l[h]&&-1===l[h].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var d=/\s*,\s*|\s+/,f=-1!==h?[l.slice(0,h).concat([l[h].split(d)[0]]),[l[h].split(d)[1]].concat(l.slice(h+1))]:[l];return f=f.map((function(e,r){var o=(1===r?!c:c)?"height":"width",l=!1;return e.reduce((function(a,b){return""===a[a.length-1]&&-1!==["+","-"].indexOf(b)?(a[a.length-1]=b,l=!0,a):l?(a[a.length-1]+=b,l=!1,a):a.concat(b)}),[]).map((function(e){return function(e,t,n,r){var o=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),c=+o[1],l=o[2];if(!c)return e;if(0===l.indexOf("%")){return D("%p"===l?n:r)[t]/100*c}if("vh"===l||"vw"===l)return("vh"===l?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*c;return c}(e,o,t,n)}))})),f.forEach((function(e,t){e.forEach((function(n,r){re(n)&&(o[t]+=n*("-"===e[r-1]?-1:1))}))})),o}var pe={shift:{order:100,enabled:!0,fn:function(data){var e=data.placement,t=e.split("-")[0],n=e.split("-")[1];if(n){var r=data.offsets,o=r.reference,c=r.popper,l=-1!==["bottom","top"].indexOf(t),h=l?"left":"top",d=l?"width":"height",f={start:A({},h,o[h]),end:A({},h,o[h]+o[d]-c[d])};data.offsets.popper=x({},c,f[n])}return data}},offset:{order:200,enabled:!0,fn:function(data,e){var t=e.offset,n=data.placement,r=data.offsets,o=r.popper,c=r.reference,l=n.split("-")[0],h=void 0;return h=re(+t)?[+t,0]:fe(t,o,c,l),"left"===l?(o.top+=h[0],o.left-=h[1]):"right"===l?(o.top+=h[0],o.left+=h[1]):"top"===l?(o.left+=h[0],o.top-=h[1]):"bottom"===l&&(o.left+=h[0],o.top+=h[1]),data.popper=o,data},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(data,e){var t=e.boundariesElement||_(data.instance.popper);data.instance.reference===t&&(t=_(t));var n=Y("transform"),r=data.instance.popper.style,o=r.top,c=r.left,l=r[n];r.top="",r.left="",r[n]="";var h=F(data.instance.popper,data.instance.reference,e.padding,t,data.positionFixed);r.top=o,r.left=c,r[n]=l,e.boundaries=h;var d=e.priority,f=data.offsets.popper,m={primary:function(t){var n=f[t];return f[t]<h[t]&&!e.escapeWithReference&&(n=Math.max(f[t],h[t])),A({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=f[n];return f[t]>h[t]&&!e.escapeWithReference&&(r=Math.min(f[n],h[t]-("right"===t?f.width:f.height))),A({},n,r)}};return d.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";f=x({},f,m[t](e))})),data.offsets.popper=f,data},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(data){var e=data.offsets,t=e.popper,n=e.reference,r=data.placement.split("-")[0],o=Math.floor,c=-1!==["top","bottom"].indexOf(r),l=c?"right":"bottom",h=c?"left":"top",d=c?"width":"height";return t[l]<o(n[h])&&(data.offsets.popper[h]=o(n[h])-t[d]),t[h]>o(n[l])&&(data.offsets.popper[h]=o(n[l])),data}},arrow:{order:500,enabled:!0,fn:function(data,e){var t;if(!oe(data.instance.modifiers,"arrow","keepTogether"))return data;var n=e.element;if("string"==typeof n){if(!(n=data.instance.popper.querySelector(n)))return data}else if(!data.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),data;var r=data.placement.split("-")[0],o=data.offsets,c=o.popper,h=o.reference,d=-1!==["left","right"].indexOf(r),f=d?"height":"width",m=d?"Top":"Left",y=m.toLowerCase(),v=d?"left":"top",_=d?"bottom":"right",w=W(n)[f];h[_]-w<c[y]&&(data.offsets.popper[y]-=c[y]-(h[_]-w)),h[y]+w>c[_]&&(data.offsets.popper[y]+=h[y]+w-c[_]),data.offsets.popper=D(data.offsets.popper);var T=h[y]+h[f]/2-w/2,E=l(data.instance.popper),I=parseFloat(E["margin"+m]),C=parseFloat(E["border"+m+"Width"]),S=T-data.offsets.popper[y]-I-C;return S=Math.max(Math.min(c[f]-w,S),0),data.arrowElement=n,data.offsets.arrow=(A(t={},y,Math.round(S)),A(t,v,""),t),data},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(data,e){if(Q(data.instance.modifiers,"inner"))return data;if(data.flipped&&data.placement===data.originalPlacement)return data;var t=F(data.instance.popper,data.instance.reference,e.padding,e.boundariesElement,data.positionFixed),n=data.placement.split("-")[0],r=H(n),o=data.placement.split("-")[1]||"",c=[];switch(e.behavior){case le:c=[n,r];break;case he:c=ue(n);break;case de:c=ue(n,!0);break;default:c=e.behavior}return c.forEach((function(l,h){if(n!==l||c.length===h+1)return data;n=data.placement.split("-")[0],r=H(n);var d=data.offsets.popper,f=data.offsets.reference,m=Math.floor,y="left"===n&&m(d.right)>m(f.left)||"right"===n&&m(d.left)<m(f.right)||"top"===n&&m(d.bottom)>m(f.top)||"bottom"===n&&m(d.top)<m(f.bottom),v=m(d.left)<m(t.left),_=m(d.right)>m(t.right),w=m(d.top)<m(t.top),T=m(d.bottom)>m(t.bottom),E="left"===n&&v||"right"===n&&_||"top"===n&&w||"bottom"===n&&T,I=-1!==["top","bottom"].indexOf(n),C=!!e.flipVariations&&(I&&"start"===o&&v||I&&"end"===o&&_||!I&&"start"===o&&w||!I&&"end"===o&&T),S=!!e.flipVariationsByContent&&(I&&"start"===o&&_||I&&"end"===o&&v||!I&&"start"===o&&T||!I&&"end"===o&&w),k=C||S;(y||E||k)&&(data.flipped=!0,(y||E)&&(n=c[h+1]),k&&(o=function(e){return"end"===e?"start":"start"===e?"end":e}(o)),data.placement=n+(o?"-"+o:""),data.offsets.popper=x({},data.offsets.popper,z(data.instance.popper,data.offsets.reference,data.placement)),data=K(data.instance.modifiers,data,"flip"))})),data},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(data){var e=data.placement,t=e.split("-")[0],n=data.offsets,r=n.popper,o=n.reference,c=-1!==["left","right"].indexOf(t),l=-1===["top","left"].indexOf(t);return r[c?"left":"top"]=o[t]-(l?r[c?"width":"height"]:0),data.placement=H(e),data.offsets.popper=D(r),data}},hide:{order:800,enabled:!0,fn:function(data){if(!oe(data.instance.modifiers,"hide","preventOverflow"))return data;var e=data.offsets.reference,t=$(data.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(e.bottom<t.top||e.left>t.right||e.top>t.bottom||e.right<t.left){if(!0===data.hide)return data;data.hide=!0,data.attributes["x-out-of-boundaries"]=""}else{if(!1===data.hide)return data;data.hide=!1,data.attributes["x-out-of-boundaries"]=!1}return data}},computeStyle:{order:850,enabled:!0,fn:function(data,e){var t=e.x,n=e.y,r=data.offsets.popper,o=$(data.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var c=void 0!==o?o:e.gpuAcceleration,l=_(data.instance.popper),h=R(l),d={position:r.position},f=function(data,e){var t=data.offsets,n=t.popper,r=t.reference,o=Math.round,c=Math.floor,l=function(e){return e},h=o(r.width),d=o(n.width),f=-1!==["left","right"].indexOf(data.placement),m=-1!==data.placement.indexOf("-"),y=e?f||m||h%2==d%2?o:c:l,v=e?o:l;return{left:y(h%2==1&&d%2==1&&!m&&e?n.left-1:n.left),top:v(n.top),bottom:v(n.bottom),right:y(n.right)}}(data,window.devicePixelRatio<2||!se),m="bottom"===t?"top":"bottom",y="right"===n?"left":"right",v=Y("transform"),w=void 0,T=void 0;if(T="bottom"===m?"HTML"===l.nodeName?-l.clientHeight+f.bottom:-h.height+f.bottom:f.top,w="right"===y?"HTML"===l.nodeName?-l.clientWidth+f.right:-h.width+f.right:f.left,c&&v)d[v]="translate3d("+w+"px, "+T+"px, 0)",d[m]=0,d[y]=0,d.willChange="transform";else{var E="bottom"===m?-1:1,I="right"===y?-1:1;d[m]=T*E,d[y]=w*I,d.willChange=m+", "+y}var C={"x-placement":data.placement};return data.attributes=x({},C,data.attributes),data.styles=x({},d,data.styles),data.arrowStyles=x({},data.offsets.arrow,data.arrowStyles),data},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(data){var element,e;return ie(data.instance.popper,data.styles),element=data.instance.popper,e=data.attributes,Object.keys(e).forEach((function(t){!1!==e[t]?element.setAttribute(t,e[t]):element.removeAttribute(t)})),data.arrowElement&&Object.keys(data.arrowStyles).length&&ie(data.arrowElement,data.arrowStyles),data},onLoad:function(e,t,n,r,o){var c=B(o,t,e,n.positionFixed),l=V(n.placement,c,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",l),ie(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}},ge={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:pe},me=function(){function e(t,n){var r=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};O(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=o(this.update.bind(this)),this.options=x({},e.Defaults,l),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(x({},e.Defaults.modifiers,l.modifiers)).forEach((function(t){r.options.modifiers[t]=x({},e.Defaults.modifiers[t]||{},l.modifiers?l.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return x({name:e},r.options.modifiers[e])})).sort((function(a,b){return a.order-b.order})),this.modifiers.forEach((function(e){e.enabled&&c(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)})),this.update();var h=this.options.eventsEnabled;h&&this.enableEventListeners(),this.state.eventsEnabled=h}return N(e,[{key:"update",value:function(){return G.call(this)}},{key:"destroy",value:function(){return J.call(this)}},{key:"enableEventListeners",value:function(){return te.call(this)}},{key:"disableEventListeners",value:function(){return ne.call(this)}}]),e}();me.Utils=("undefined"!=typeof window?window:e).PopperUtils,me.placements=ae,me.Defaults=ge,t.default=me}.call(this,n(30))},273:function(e,t,n){"use strict";var r=n(28),o=n(2),c=n(0),l=n(13);function h(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new o.g("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function d(){if("undefined"==typeof Uint8Array)throw new o.g("unimplemented","Uint8Arrays are not available in this environment.")}function f(){if(!Object(o.r)())throw new o.g("unimplemented","Blobs are unavailable in Firestore in this environment.")}class m{constructor(e){this._delegate=e}static fromBase64String(e){return f(),new m(o.b.fromBase64String(e))}static fromUint8Array(e){return d(),new m(o.b.fromUint8Array(e))}toBase64(){return f(),this._delegate.toBase64()}toUint8Array(){return d(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function y(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const object=e;for(const e of t)if(e in object&&"function"==typeof object[e])return!0;return!1}(e,["next","error","complete"])}class v{enableIndexedDbPersistence(e,t){return Object(o.F)(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Object(o.G)(e._delegate)}clearIndexedDbPersistence(e){return Object(o.x)(e._delegate)}}class _{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof o.m||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Object(o.s)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){Object(o.A)(this._delegate,e,t,n)}enableNetwork(){return Object(o.H)(this._delegate)}disableNetwork(){return Object(o.D)(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Object(o.t)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Object(o.lb)(this._delegate)}onSnapshotsInSync(e){return Object(o.Y)(this._delegate,e)}get app(){if(!this._appCompat)throw new o.g("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new P(this,Object(o.y)(this._delegate,e))}catch(e){throw S(e,"collection()","Firestore.collection()")}}doc(e){try{return new C(this,Object(o.E)(this._delegate,e))}catch(e){throw S(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new x(this,Object(o.z)(this._delegate,e))}catch(e){throw S(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Object(o.db)(this._delegate,(t=>e(new T(this,t))))}batch(){return Object(o.K)(this._delegate),new E(new o.l(this._delegate,(e=>Object(o.L)(this._delegate,e))))}loadBundle(e){return Object(o.V)(this._delegate,e)}namedQuery(e){return Object(o.W)(this._delegate,e).then((e=>e?new x(this,e):null))}}class w extends o.a{constructor(e){super(),this.firestore=e}convertBytes(e){return new m(new o.b(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return C.forKey(t,this.firestore,null)}}class T{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new w(e)}get(e){const t=j(e);return this._delegate.get(t).then((e=>new N(this._firestore,new o.e(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,data,t){const n=j(e);return t?(h("Transaction.set",t),this._delegate.set(n,data,t)):this._delegate.set(n,data),this}update(e,t,n,...r){const o=j(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...r),this}delete(e){const t=j(e);return this._delegate.delete(t),this}}class E{constructor(e){this._delegate=e}set(e,data,t){const n=j(e);return t?(h("WriteBatch.set",t),this._delegate.set(n,data,t)):this._delegate.set(n,data),this}update(e,t,n,...r){const o=j(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...r),this}delete(e){const t=j(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class I{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new o.i(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new A(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=I.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let o=r.get(t);return o||(o=new I(e,new w(e),t),r.set(t,o)),o}}I.INSTANCES=new WeakMap;class C{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new w(e)}static forPath(path,e,t){if(path.length%2!=0)throw new o.g("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${path.canonicalString()} has ${path.length}`);return new C(e,new o.d(e._delegate,t,new o.n(path)))}static forKey(e,t,n){return new C(t,new o.d(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new P(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new P(this.firestore,Object(o.y)(this._delegate,e))}catch(e){throw S(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Object(c.r)(e))instanceof o.d&&Object(o.cb)(this._delegate,e)}set(e,t){t=h("DocumentReference.set",t);try{return t?Object(o.fb)(this._delegate,e,t):Object(o.fb)(this._delegate,e)}catch(e){throw S(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?Object(o.kb)(this._delegate,e):Object(o.kb)(this._delegate,e,t,...n)}catch(e){throw S(e,"updateDoc()","DocumentReference.update()")}}delete(){return Object(o.B)(this._delegate)}onSnapshot(...e){const t=k(e),n=O(e,(e=>new N(this.firestore,new o.e(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Object(o.X)(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?Object(o.N)(this._delegate):"server"===(null==e?void 0:e.source)?Object(o.O)(this._delegate):Object(o.M)(this._delegate),t.then((e=>new N(this.firestore,new o.e(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new C(this.firestore,e?this._delegate.withConverter(I.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function S(e,t,n){return e.message=e.message.replace(t,n),e}function k(e){for(const t of e)if("object"==typeof t&&!y(t))return t;return{}}function O(e,t){var n,r;let o;return o=y(e[0])?e[0]:y(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{o.next&&o.next(t(e))},error:null===(n=o.error)||void 0===n?void 0:n.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class N{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new C(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Object(o.hb)(this._delegate,e._delegate)}}class A extends N{data(e){const data=this._delegate.data(e);return Object(o.q)(void 0!==data,"Document in a QueryDocumentSnapshot should exist"),data}}class x{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new w(e)}where(e,t,n){try{return new x(this.firestore,Object(o.ab)(this._delegate,Object(o.mb)(e,t,n)))}catch(e){throw S(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new x(this.firestore,Object(o.ab)(this._delegate,Object(o.Z)(e,t)))}catch(e){throw S(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new x(this.firestore,Object(o.ab)(this._delegate,Object(o.T)(e)))}catch(e){throw S(e,"limit()","Query.limit()")}}limitToLast(e){try{return new x(this.firestore,Object(o.ab)(this._delegate,Object(o.U)(e)))}catch(e){throw S(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new x(this.firestore,Object(o.ab)(this._delegate,Object(o.jb)(...e)))}catch(e){throw S(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new x(this.firestore,Object(o.ab)(this._delegate,Object(o.ib)(...e)))}catch(e){throw S(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new x(this.firestore,Object(o.ab)(this._delegate,Object(o.J)(...e)))}catch(e){throw S(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new x(this.firestore,Object(o.ab)(this._delegate,Object(o.I)(...e)))}catch(e){throw S(e,"endAt()","Query.endAt()")}}isEqual(e){return Object(o.bb)(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?Object(o.Q)(this._delegate):"server"===(null==e?void 0:e.source)?Object(o.R)(this._delegate):Object(o.P)(this._delegate),t.then((e=>new R(this.firestore,new o.j(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=k(e),n=O(e,(e=>new R(this.firestore,new o.j(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Object(o.X)(this._delegate,t,n)}withConverter(e){return new x(this.firestore,e?this._delegate.withConverter(I.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class D{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new A(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class R{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new x(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new A(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new D(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new A(this._firestore,n))}))}isEqual(e){return Object(o.hb)(this._delegate,e._delegate)}}class P extends x{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new C(this.firestore,e):null}doc(e){try{return new C(this.firestore,void 0===e?Object(o.E)(this._delegate):Object(o.E)(this._delegate,e))}catch(e){throw S(e,"doc()","CollectionReference.doc()")}}add(data){return Object(o.u)(this._delegate,data).then((e=>new C(this.firestore,e)))}isEqual(e){return Object(o.cb)(this._delegate,e._delegate)}withConverter(e){return new P(this.firestore,e?this._delegate.withConverter(I.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function j(e){return Object(o.p)(e,o.d)}class L{constructor(...e){this._delegate=new o.f(...e)}static documentId(){return new L(o.o.keyField().canonicalString())}isEqual(e){return(e=Object(c.r)(e))instanceof o.f&&this._delegate._internalPath.isEqual(e._internalPath)}}class M{constructor(e){this._delegate=e}static serverTimestamp(){const e=Object(o.eb)();return e._methodName="FieldValue.serverTimestamp",new M(e)}static delete(){const e=Object(o.C)();return e._methodName="FieldValue.delete",new M(e)}static arrayUnion(...e){const t=Object(o.w)(...e);return t._methodName="FieldValue.arrayUnion",new M(t)}static arrayRemove(...e){const t=Object(o.v)(...e);return t._methodName="FieldValue.arrayRemove",new M(t)}static increment(e){const t=Object(o.S)(e);return t._methodName="FieldValue.increment",new M(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const F={Firestore:_,GeoPoint:o.h,Timestamp:o.k,Blob:m,Transaction:T,WriteBatch:E,DocumentReference:C,DocumentSnapshot:N,Query:x,QueryDocumentSnapshot:A,QuerySnapshot:R,CollectionReference:P,FieldPath:L,FieldValue:M,setLogLevel:function(e){Object(o.gb)(e)},CACHE_SIZE_UNLIMITED:o.c};var U,V;U=r.a,V=(e,t)=>new _(e,t,new v),U.INTERNAL.registerComponent(new l.a("firestore-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return V(t,n)}),"PUBLIC").setServiceProps(Object.assign({},F))),U.registerVersion("@firebase/firestore-compat","0.1.13")},274:function(e,t,n){"use strict";var r=n(28),o=n(13),c=n(3),l=n(0),h=n(14);const d=new h.b("@firebase/database-compat"),f=function(e){const t="FIREBASE WARNING: "+e;d.warn(t)};class m{constructor(e){this._delegate=e}cancel(e){Object(l.P)("OnDisconnect.cancel",0,1,arguments.length),Object(l.Q)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){Object(l.P)("OnDisconnect.remove",0,1,arguments.length),Object(l.Q)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){Object(l.P)("OnDisconnect.set",1,2,arguments.length),Object(l.Q)("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){Object(l.P)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(l.Q)("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(Object(l.P)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let i=0;i<e.length;++i)t[""+i]=e[i];e=t,f("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(l.Q)("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class y{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Object(l.P)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class v{constructor(e,t){this._database=e,this._delegate=t}val(){return Object(l.P)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Object(l.P)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Object(l.P)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Object(l.P)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(path){return Object(l.P)("DataSnapshot.child",0,1,arguments.length),path=String(path),Object(c.g)("DataSnapshot.child","path",path,!1),new v(this._database,this._delegate.child(path))}hasChild(path){return Object(l.P)("DataSnapshot.hasChild",1,1,arguments.length),Object(c.g)("DataSnapshot.hasChild","path",path,!1),this._delegate.hasChild(path)}getPriority(){return Object(l.P)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Object(l.P)("DataSnapshot.forEach",1,1,arguments.length),Object(l.Q)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new v(this._database,t))))}hasChildren(){return Object(l.P)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Object(l.P)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Object(l.P)("DataSnapshot.ref",0,0,arguments.length),new w(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class _{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var o;Object(l.P)("Query.on",2,4,arguments.length),Object(l.Q)("Query.on","callback",t,!1);const h=_.getCancelAndContextArgs_("Query.on",n,r),d=(e,n)=>{t.call(h.context,new v(this.database,e),n)};d.userCallback=t,d.context=h.context;const f=null===(o=h.cancel)||void 0===o?void 0:o.bind(h.context);switch(e){case"value":return Object(c.z)(this._delegate,d,f),t;case"child_added":return Object(c.v)(this._delegate,d,f),t;case"child_removed":return Object(c.y)(this._delegate,d,f),t;case"child_changed":return Object(c.w)(this._delegate,d,f),t;case"child_moved":return Object(c.x)(this._delegate,d,f),t;default:throw new Error(Object(l.p)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(Object(l.P)("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(l.p)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Object(l.Q)("Query.off","callback",t,!0),Object(l.R)("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,Object(c.u)(this._delegate,e,r)}else Object(c.u)(this._delegate,e)}get(){return Object(c.o)(this._delegate).then((e=>new v(this.database,e)))}once(e,t,n,r){Object(l.P)("Query.once",1,4,arguments.length),Object(l.Q)("Query.once","callback",t,!0);const o=_.getCancelAndContextArgs_("Query.once",n,r),h=new l.a,d=(e,n)=>{const r=new v(this.database,e);t&&t.call(o.context,r,n),h.resolve(r)};d.userCallback=t,d.context=o.context;const f=e=>{o.cancel&&o.cancel.call(o.context,e),h.reject(e)};switch(e){case"value":Object(c.z)(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":Object(c.v)(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":Object(c.y)(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":Object(c.w)(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":Object(c.x)(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error(Object(l.p)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return h.promise}limitToFirst(e){return Object(l.P)("Query.limitToFirst",1,1,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.s)(e)))}limitToLast(e){return Object(l.P)("Query.limitToLast",1,1,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.t)(e)))}orderByChild(path){return Object(l.P)("Query.orderByChild",1,1,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.A)(path)))}orderByKey(){return Object(l.P)("Query.orderByKey",0,0,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.B)()))}orderByPriority(){return Object(l.P)("Query.orderByPriority",0,0,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.C)()))}orderByValue(){return Object(l.P)("Query.orderByValue",0,0,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.D)()))}startAt(e=null,t){return Object(l.P)("Query.startAt",0,2,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.P)(e,t)))}startAfter(e=null,t){return Object(l.P)("Query.startAfter",0,2,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.O)(e,t)))}endAt(e=null,t){return Object(l.P)("Query.endAt",0,2,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.l)(e,t)))}endBefore(e=null,t){return Object(l.P)("Query.endBefore",0,2,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.m)(e,t)))}equalTo(e,t){return Object(l.P)("Query.equalTo",1,2,arguments.length),new _(this.database,Object(c.F)(this._delegate,Object(c.n)(e,t)))}toString(){return Object(l.P)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Object(l.P)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Object(l.P)("Query.isEqual",1,1,arguments.length),!(e instanceof _)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Object(l.Q)(e,"cancel",r.cancel,!0),r.context=n,Object(l.R)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(Object(l.p)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new w(this.database,new c.d(this._delegate._repo,this._delegate._path))}}class w extends _{constructor(e,t){super(e,new c.b(t._repo,t._path,new c.c,!1)),this.database=e,this._delegate=t}getKey(){return Object(l.P)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Object(l.P)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new w(this.database,Object(c.i)(this._delegate,e))}getParent(){Object(l.P)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new w(this.database,e):null}getRoot(){return Object(l.P)("Reference.root",0,0,arguments.length),new w(this.database,this._delegate.root)}set(e,t){Object(l.P)("Reference.set",1,2,arguments.length),Object(l.Q)("Reference.set","onComplete",t,!0);const n=Object(c.L)(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(Object(l.P)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let i=0;i<e.length;++i)t[""+i]=e[i];e=t,f("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(c.h)("Reference.update",this._delegate._path),Object(l.Q)("Reference.update","onComplete",t,!0);const n=Object(c.Q)(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){Object(l.P)("Reference.setWithPriority",2,3,arguments.length),Object(l.Q)("Reference.setWithPriority","onComplete",n,!0);const r=Object(c.N)(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){Object(l.P)("Reference.remove",0,1,arguments.length),Object(l.Q)("Reference.remove","onComplete",e,!0);const t=Object(c.I)(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){Object(l.P)("Reference.transaction",1,3,arguments.length),Object(l.Q)("Reference.transaction","transactionUpdate",e,!1),Object(l.Q)("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(l.p)(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=Object(c.J)(this._delegate,e,{applyLocally:n}).then((e=>new y(e.committed,new v(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){Object(l.P)("Reference.setPriority",1,2,arguments.length),Object(l.Q)("Reference.setPriority","onComplete",t,!0);const n=Object(c.M)(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){Object(l.P)("Reference.push",0,2,arguments.length),Object(l.Q)("Reference.push","onComplete",t,!0);const n=Object(c.E)(this._delegate,e),r=n.then((e=>new w(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const o=new w(this.database,n);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return Object(c.h)("Reference.onDisconnect",this._delegate._path),new m(new c.a(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class T{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,n={}){Object(c.j)(this._delegate,e,t,n)}ref(path){if(Object(l.P)("database.ref",0,1,arguments.length),path instanceof w){const e=Object(c.H)(this._delegate,path.toString());return new w(this,e)}{const e=Object(c.G)(this._delegate,path);return new w(this,e)}}refFromURL(e){Object(l.P)("database.refFromURL",1,1,arguments.length);const t=Object(c.H)(this._delegate,e);return new w(this,t)}goOffline(){return Object(l.P)("database.goOffline",0,0,arguments.length),Object(c.p)(this._delegate)}goOnline(){return Object(l.P)("database.goOnline",0,0,arguments.length),Object(c.q)(this._delegate)}}T.ServerValue={TIMESTAMP:Object(c.K)(),increment:e=>Object(c.r)(e)};var E=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:r,namespace:l,nodeAdmin:h=!1}){Object(c.f)(n);const d=new o.c("auth-internal",new o.b("database-standalone"));return d.setComponent(new o.a("auth-internal",(()=>r),"PRIVATE")),{instance:new T(Object(c.e)(e,d,void 0,t,h),e),namespace:l}}});const I=T.ServerValue;var C;(C=r.a).INTERNAL.registerComponent(new o.a("database-compat",((e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new T(r,n)}),"PUBLIC").setServiceProps({Reference:w,Query:_,Database:T,DataSnapshot:v,enableLogging:c.k,INTERNAL:E,ServerValue:I}).setMultipleInstances(!0)),C.registerVersion("@firebase/database-compat","0.1.5")},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(0),o=n(13),c=n(7),l=n(14);class h{constructor(e,t){this._delegate=e,this.firebase=t,Object(c._addComponent)(e,new o.a("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Object(c.deleteApp)(this._delegate))))}_getService(e,t=c._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=c._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(component){Object(c._addComponent)(this._delegate,component)}_addOrOverwriteComponent(component){Object(c._addOrOverwriteComponent)(this._delegate,component)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const d={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},f=new r.b("app-compat","Firebase",d);const m=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(o,l={}){const h=c.initializeApp(o,l);if(Object(r.j)(t,h.name))return t[h.name];const d=new e(h,n);return t[h.name]=d,d},app:o,registerVersion:c.registerVersion,setLogLevel:c.setLogLevel,onLog:c.onLog,apps:null,SDK_VERSION:c.SDK_VERSION,INTERNAL:{registerComponent:function(component){const t=component.name,l=t.replace("-compat","");if(c._registerComponent(component)&&"PUBLIC"===component.type){const c=(e=o())=>{if("function"!=typeof e[l])throw f.create("invalid-app-argument",{appName:t});return e[l]()};void 0!==component.serviceProps&&Object(r.o)(c,component.serviceProps),n[l]=c,e.prototype[l]=function(...e){return this._getService.bind(this,t).apply(this,component.multipleInstances?e:[])}}return"PUBLIC"===component.type?n[l]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:c}};function o(e){if(e=e||c._DEFAULT_ENTRY_NAME,!Object(r.j)(t,e))throw f.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),o.App=e,n}(h);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(r.o)(t,e)},createSubscribe:r.l,ErrorFactory:r.b,deepExtend:r.o}),t}(),y=new l.b("@firebase/app-compat");if(Object(r.u)()&&void 0!==self.firebase){y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const v=m;var _;Object(c.registerVersion)("@firebase/app-compat","0.1.17",_)},3:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return zi})),n.d(t,"b",(function(){return $i})),n.d(t,"c",(function(){return xt})),n.d(t,"d",(function(){return Yi})),n.d(t,"e",(function(){return Ws})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return si})),n.d(t,"h",(function(){return oi})),n.d(t,"i",(function(){return es})),n.d(t,"j",(function(){return zs})),n.d(t,"k",(function(){return Gs})),n.d(t,"l",(function(){return _s})),n.d(t,"m",(function(){return bs})),n.d(t,"n",(function(){return qs})),n.d(t,"o",(function(){return as})),n.d(t,"p",(function(){return $s})),n.d(t,"q",(function(){return Ks})),n.d(t,"r",(function(){return Js})),n.d(t,"s",(function(){return ks})),n.d(t,"t",(function(){return Ns})),n.d(t,"u",(function(){return ms})),n.d(t,"v",(function(){return ds})),n.d(t,"w",(function(){return fs})),n.d(t,"x",(function(){return ps})),n.d(t,"y",(function(){return gs})),n.d(t,"z",(function(){return hs})),n.d(t,"A",(function(){return xs})),n.d(t,"B",(function(){return Rs})),n.d(t,"C",(function(){return js})),n.d(t,"D",(function(){return Ms})),n.d(t,"E",(function(){return ts})),n.d(t,"F",(function(){return Us})),n.d(t,"G",(function(){return Xi})),n.d(t,"H",(function(){return Zi})),n.d(t,"I",(function(){return ns})),n.d(t,"J",(function(){return Zs})),n.d(t,"K",(function(){return Ys})),n.d(t,"L",(function(){return rs})),n.d(t,"M",(function(){return is})),n.d(t,"N",(function(){return ss})),n.d(t,"O",(function(){return Cs})),n.d(t,"P",(function(){return Es})),n.d(t,"Q",(function(){return os}));var r=n(7),o=n(13),c=n(0),l=n(14);const h="@firebase/database",d="0.12.5";let f="";function m(e){f=e}class y{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Object(c.O)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Object(c.H)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class v{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Object(c.j)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const _=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new y(t)}}catch(e){}return new v},w=_("localStorage"),T=_("sessionStorage"),E=new l.b("@firebase/database"),I=function(){let e=1;return function(){return e++}}(),C=function(e){const t=Object(c.N)(e),n=new c.d;n.update(t);const r=n.digest();return c.g.encodeByteArray(r)},S=function(...e){let t="";for(let i=0;i<e.length;i++){const n=e[i];Array.isArray(n)||n&&"object"==typeof n&&"number"==typeof n.length?t+=S.apply(null,n):t+="object"==typeof n?Object(c.O)(n):n,t+=" "}return t};let k=null,O=!0;const N=function(e,t){Object(c.e)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(E.logLevel=l.a.VERBOSE,k=E.log.bind(E),t&&T.set("logging_enabled",!0)):"function"==typeof e?k=e:(k=null,T.remove("logging_enabled"))},A=function(...e){if(!0===O&&(O=!1,null===k&&!0===T.get("logging_enabled")&&N(!0)),k){const t=S.apply(null,e);k(t)}},x=function(e){return function(...t){A(e,...t)}},D=function(...e){const t="FIREBASE INTERNAL ERROR: "+S(...e);E.error(t)},R=function(...e){const t=`FIREBASE FATAL ERROR: ${S(...e)}`;throw E.error(t),new Error(t)},P=function(...e){const t="FIREBASE WARNING: "+S(...e);E.warn(t)},j=function(data){return"number"==typeof data&&(data!=data||data===Number.POSITIVE_INFINITY||data===Number.NEGATIVE_INFINITY)},L="[MIN_NAME]",M="[MAX_NAME]",F=function(a,b){if(a===b)return 0;if(a===L||b===M)return-1;if(b===L||a===M)return 1;{const e=Q(a),t=Q(b);return null!==e?null!==t?e-t==0?a.length-b.length:e-t:-1:null!==t?1:a<b?-1:1}},U=function(a,b){return a===b?0:a<b?-1:1},V=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Object(c.O)(t))},B=function(e){if("object"!=typeof e||null===e)return Object(c.O)(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=Object(c.O)(t[i]),n+=":",n+=B(e[t[i]]);return n+="}",n},W=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let o=0;o<n;o+=t)o+t>n?r.push(e.substring(o,n)):r.push(e.substring(o,o+t));return r};function H(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const z=function(e){Object(c.e)(!j(e),"Invalid JSON number");const t=1023;let s,n,r,o,i;0===e?(n=0,r=0,s=1/e==-1/0?1:0):(s=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),n=o+t,r=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));const l=[];for(i=52;i;i-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(i=11;i;i-=1)l.push(n%2?1:0),n=Math.floor(n/2);l.push(s?1:0),l.reverse();const h=l.join("");let d="";for(i=0;i<64;i+=8){let e=parseInt(h.substr(i,8),2).toString(16);1===e.length&&(e="0"+e),d+=e}return d.toLowerCase()};const $=new RegExp("^-?(0*)\\d{1,10}$"),K=-2147483648,G=2147483647,Q=function(e){if($.test(e)){const t=Number(e);if(t>=K&&t<=G)return t}return null},Y=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw P("Exception was thrown by user callback.",t),e}),Math.floor(0))}},J=function(e,time){const t=setTimeout(e,time);return"object"==typeof t&&t.unref&&t.unref(),t};class X{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){P(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Z{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(A("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',P(e)}}class ee{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ee.OWNER="owner";const te="5",ne=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,re="websocket",ie="long_polling";class se{constructor(e,t,n,r,o=!1,c="",l=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=w.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&w.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function oe(e,t,n){let r;if(Object(c.e)("string"==typeof t,"typeof type must == string"),Object(c.e)("object"==typeof n,"typeof params must == object"),t===re)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ie)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const o=[];return H(n,((e,t)=>{o.push(e+"="+t)})),r+o.join("&")}class ae{constructor(){this.counters_={}}incrementCounter(e,t=1){Object(c.j)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Object(c.m)(this.counters_)}}const ce={},ue={};function le(e){const t=e.toString();return ce[t]||(ce[t]=new ae),ce[t]}class he{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,data){for(this.pendingResponses[e]=data;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<e.length;++i)e[i]&&Y((()=>{this.onMessage_(e[i])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const de="start";class fe{constructor(e,t,n,r,o,c,l){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.transportSessionId=c,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=x(e),this.stats_=le(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),oe(t,ie,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new he(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Object(c.C)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new pe(((...e)=>{const[t,n,r,o,c]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===de)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,data]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,data)}),(()=>{this.onClosed_()}),this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=te,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ne.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fe.forceAllow_=!0}static forceDisallow(){fe.forceDisallow_=!0}static isAvailable(){return!Object(c.C)()&&(!!fe.forceAllow_||!(fe.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(data){const e=Object(c.O)(data);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const t=Object(c.i)(e),n=W(t,1840);for(let i=0;i<n.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Object(c.C)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Object(c.O)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class pe{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(c.C)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=I(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=pe.createIFrame_();let script="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){script='<script>document.domain="'+document.domain+'";<\/script>'}const n="<html><body>"+script+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(n),this.myIFrame.doc.close()}catch(e){A("frame writing exception"),e.stack&&A(e.stack),A(e)}}}static createIFrame_(){const iframe=document.createElement("iframe");if(iframe.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(iframe);try{iframe.contentWindow.document||A("No IE domain setting required")}catch(e){const t=document.domain;iframe.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return iframe.contentDocument?iframe.doc=iframe.contentDocument:iframe.contentWindow?iframe.doc=iframe.contentWindow.document:iframe.document&&(iframe.doc=iframe.document),iframe}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,data){this.pendingSegs.push({seg:e,ts:t,d:data}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Object(c.C)()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{A("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let ge=null;"undefined"!=typeof MozWebSocket?ge=MozWebSocket:"undefined"!=typeof WebSocket&&(ge=WebSocket);class me{constructor(e,t,n,r,o,c,l){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=x(this.connId),this.stats_=le(t),this.connURL=me.connectionURL_(t,c,l,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r){const o={};return o.v=te,!Object(c.C)()&&"undefined"!=typeof location&&location.hostname&&ne.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o.ac=r),oe(e,re,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,w.set("previous_websocket_failure",!0);try{if(Object(c.C)()){const t=this.nodeAdmin?"AdminNode":"Node",n={headers:{"User-Agent":`Firebase/5/${f}/${e.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(n.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(n.headers["X-Firebase-AppCheck"]=this.appCheckToken);const r=e.env,o=0===this.connURL.indexOf("wss://")?r.HTTPS_PROXY||r.https_proxy:r.HTTP_PROXY||r.http_proxy;o&&(n.proxy={origin:o}),this.mySock=new ge(this.connURL,[],n)}else{const e={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new ge(this.connURL,[],e)}}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){me.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ge&&!me.forceDisallow_}static previouslyFailed(){return w.isInMemoryStorage||!0===w.get("previous_websocket_failure")}markConnectionHealthy(){w.remove("previous_websocket_failure")}appendFrame_(data){if(this.frames.push(data),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Object(c.H)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(data){if(Object(c.e)(null===this.frames,"We already have a frame buffer"),data.length<=6){const e=Number(data);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),data}handleIncomingFrame(e){if(null===this.mySock)return;const data=e.data;if(this.bytesReceived+=data.length,this.stats_.incrementCounter("bytes_received",data.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(data);else{const e=this.extractFrameCount_(data);null!==e&&this.appendFrame_(e)}}send(data){this.resetKeepAlive();const e=Object(c.O)(data);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const t=W(e,16384);t.length>1&&this.sendString_(String(t.length));for(let i=0;i<t.length;i++)this.sendString_(t[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}me.responsesRequiredToBeHealthy=2,me.healthyTimeout=3e4;class ye{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[fe,me]}initTransports_(e){const t=me&&me.isAvailable();let n=t&&!me.previouslyFailed();if(e.webSocketOnly&&(t||P("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[me];else{const e=this.transports_=[];for(const t of ye.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class ve{constructor(e,t,n,r,o,c,l,h,d,f){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=c,this.onReady_=l,this.onDisconnect_=h,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=x("c:"+this.id+":"),this.transportManager_=new ye(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=J((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=V("t",e),data=V("d",e);if("c"===t)this.onSecondaryControl_(data);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(data)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=V("t",e),data=V("d",e);"c"===t?this.onControl_(data):"d"===t&&this.onDataMessage_(data)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=V("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?D("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):D("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),te!==n&&P("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),J((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):J((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(w.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(data){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(data)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _e{put(e,data,t,n){}merge(e,data,t,n){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,data,t){}onDisconnectMerge(e,data,t){}onDisconnectCancel(e,t){}reportStats(e){}}class we{constructor(e){this.allowedEvents_=e,this.listeners_={},Object(c.e)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let i=0;i<n.length;i++)n[i].callback.apply(n[i].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Object(c.e)(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class be extends we{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(c.A)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new be}getInitialEvent(e){return Object(c.e)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Te{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[t]=this.pieces_[i],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)""!==this.pieces_[i]&&(e+="/"+this.pieces_[i]);return e||"/"}}function Ee(){return new Te("")}function Ie(path){return path.pieceNum_>=path.pieces_.length?null:path.pieces_[path.pieceNum_]}function Ce(path){return path.pieces_.length-path.pieceNum_}function Se(path){let e=path.pieceNum_;return e<path.pieces_.length&&e++,new Te(path.pieces_,e)}function ke(path){return path.pieceNum_<path.pieces_.length?path.pieces_[path.pieces_.length-1]:null}function Oe(path,e=0){return path.pieces_.slice(path.pieceNum_+e)}function Ne(path){if(path.pieceNum_>=path.pieces_.length)return null;const e=[];for(let i=path.pieceNum_;i<path.pieces_.length-1;i++)e.push(path.pieces_[i]);return new Te(e,0)}function Ae(path,e){const t=[];for(let i=path.pieceNum_;i<path.pieces_.length;i++)t.push(path.pieces_[i]);if(e instanceof Te)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const n=e.split("/");for(let i=0;i<n.length;i++)n[i].length>0&&t.push(n[i])}return new Te(t,0)}function xe(path){return path.pieceNum_>=path.pieces_.length}function De(e,t){const n=Ie(e),r=Ie(t);if(null===n)return t;if(n===r)return De(Se(e),Se(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Re(e,t){const n=Oe(e,0),r=Oe(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=F(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Pe(path,e){if(Ce(path)!==Ce(e))return!1;for(let i=path.pieceNum_,t=e.pieceNum_;i<=path.pieces_.length;i++,t++)if(path.pieces_[i]!==e.pieces_[t])return!1;return!0}function je(path,e){let i=path.pieceNum_,t=e.pieceNum_;if(Ce(path)>Ce(e))return!1;for(;i<path.pieces_.length;){if(path.pieces_[i]!==e.pieces_[t])return!1;++i,++t}return!0}class Le{constructor(path,e){this.errorPrefix_=e,this.parts_=Oe(path,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Object(c.M)(this.parts_[i]);Me(this)}}function Me(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Fe(e))}function Fe(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class qe extends we{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new qe}getInitialEvent(e){return Object(c.e)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ue=1e3;class Ve extends _e{constructor(e,t,n,r,o,l,h,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=h,this.authOverride_=d,this.id=Ve.nextPersistentConnectionId_++,this.log_=x("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ue,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!Object(c.C)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");qe.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&be.getInstance().on("online",this.onOnline_,this)}sendRequest(e,body,t){const n=++this.requestNumber_,r={r:n,a:e,b:body};this.log_(Object(c.O)(r)),Object(c.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),t&&(this.requestCBHash_[n]=t)}get(e){this.initConnection_();const t=new c.a,n={p:e._path.toString(),q:e._queryObject},r={action:"g",request:n,onComplete:e=>{const r=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,r,!1,null),t.resolve(r)):t.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const e=this.outstandingGets_[o];void 0!==e&&r===e&&(delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+o+" timed out on connection"),t.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),t.promise}listen(e,t,n,r){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),Object(c.e)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(c.e)(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const h={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(l).set(o,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const o={p:n};e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(o=>{const c=o.d,l=o.s;Ve.warnOnListenWarnings_(c,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",o),"ok"!==l&&this.removeListen_(n,r),e.onComplete&&e.onComplete(l,c))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&Object(c.j)(e,"w")){const n=Object(c.L)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();P(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||Object(c.t)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=Object(c.G)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,data=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,data))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,data=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,data)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(c.e)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const o={p:e};r&&(o.q=n,o.t=r),this.sendRequest("n",o)}onDisconnectPut(e,data,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,data,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:data,onComplete:t})}onDisconnectMerge(e,data,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,data,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:data,onComplete:t})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,data,n){const r={p:t,d:data};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{n&&setTimeout((()=>{n(e.s,e.d)}),Math.floor(0))}))}put(e,data,t,n){this.putInternal("p",e,data,t,n)}merge(e,data,t,n){this.putInternal("m",e,data,t,n)}putInternal(e,t,data,n,r){this.initConnection_();const o={p:t,d:data};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:n}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Object(c.O)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,body){this.log_("handleServerMessage",e,body),"d"===e?this.onDataUpdate_(body.p,body.d,!1,body.t):"m"===e?this.onDataUpdate_(body.p,body.d,!0,body.t):"c"===e?this.onListenRevoked_(body.p,body.q):"ac"===e?this.onAuthRevoked_(body.s,body.d):"apc"===e?this.onAppCheckRevoked_(body.s,body.d):"sd"===e?this.onSecurityDebugPacket_(body):D("Unrecognized action received from server: "+Object(c.O)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Object(c.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ue,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ue,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ue),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ve.nextConnectionId_++,o=this.lastSessionId;let l=!1,h=null;const d=function(){h?h.close():(l=!0,n())},f=function(e){Object(c.e)(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(e)};this.realtime_={close:d,sendRequest:f};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,d]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?A("getToken() completed but was canceled"):(A("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=d&&d.token,h=new ve(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{P(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),o))}catch(e){this.log_("Failed to get token: "+e),l||(this.repoInfo_.nodeAdmin&&P(e),d())}}}interrupt(e){A("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){A("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Object(c.x)(this.interruptReasons_)&&(this.reconnectDelay_=Ue,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let i=0;i<this.outstandingPuts_.length;i++){const e=this.outstandingPuts_[i];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((q=>B(q))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Te(e).toString();let r;if(this.listens.has(n)){const map=this.listens.get(n);r=map.get(t),map.delete(t),0===map.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){A("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){A("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(body){this.securityDebugCallback_?this.securityDebugCallback_(body):"msg"in body&&console.log("FIREBASE: "+body.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)}sendConnectStats_(){const e={};let t="js";Object(c.C)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+f.replace(/\./g,"-")]=1,Object(c.A)()?e["framework.cordova"]=1:Object(c.D)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=be.getInstance().currentlyOnline();return Object(c.x)(this.interruptReasons_)&&e}}Ve.nextPersistentConnectionId_=0,Ve.nextConnectionId_=0;class Be{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Be(e,t)}}class We{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Be(L,e),r=new Be(L,t);return 0!==this.compare(n,r)}minPost(){return Be.MIN}}let He;class ze extends We{static get __EMPTY_NODE(){return He}static set __EMPTY_NODE(e){He=e}compare(a,b){return F(a.name,b.name)}isDefinedOn(e){throw Object(c.f)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Be.MIN}maxPost(){return new Be(M,He)}makePost(e,t){return Object(c.e)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Be(e,He)}toString(){return".key"}}const $e=new ze;class Ke{constructor(e,t,n,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?n(e.key,t):1,r&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ge{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=null!=n?n:Ge.RED,this.left=null!=r?r:Qe.EMPTY_NODE,this.right=null!=o?o:Qe.EMPTY_NODE}copy(e,t,n,r,o){return new Ge(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qe.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Qe.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ge.RED=!0,Ge.BLACK=!1;class Qe{constructor(e,t=Qe.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Qe(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ge.BLACK,null,null))}remove(e){return new Qe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ge.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ke(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ke(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ke(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ke(this.root_,null,this.comparator_,!0,e)}}function Ye(e,t){return F(e.name,t.name)}function Je(e,t){return F(e,t)}let Xe;Qe.EMPTY_NODE=new class{copy(e,t,n,r,o){return this}insert(e,t,n){return new Ge(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ze=function(e){return"number"==typeof e?"number:"+z(e):"string:"+e},et=function(e){if(e.isLeafNode()){const t=e.val();Object(c.e)("string"==typeof t||"number"==typeof t||"object"==typeof t&&Object(c.j)(t,".sv"),"Priority must be a string or number.")}else Object(c.e)(e===Xe||e.isEmpty(),"priority of unexpected type.");Object(c.e)(e===Xe||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let tt,nt,it;class st{constructor(e,t=st.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Object(c.e)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),et(this.priorityNode_)}static set __childrenNodeConstructor(e){tt=e}static get __childrenNodeConstructor(){return tt}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new st(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:st.__childrenNodeConstructor.EMPTY_NODE}getChild(path){return xe(path)?this:".priority"===Ie(path)?this.priorityNode_:st.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:st.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(path,e){const t=Ie(path);return null===t?e:e.isEmpty()&&".priority"!==t?this:(Object(c.e)(".priority"!==t||1===Ce(path),".priority must be the last token in a path"),this.updateImmediateChild(t,st.__childrenNodeConstructor.EMPTY_NODE.updateChild(Se(path),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ze(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?z(this.value_):this.value_,this.lazyHash_=C(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===st.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof st.__childrenNodeConstructor?-1:(Object(c.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=st.VALUE_TYPE_ORDER.indexOf(t),o=st.VALUE_TYPE_ORDER.indexOf(n);return Object(c.e)(r>=0,"Unknown leaf type: "+t),Object(c.e)(o>=0,"Unknown leaf type: "+n),r===o?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}st.VALUE_TYPE_ORDER=["object","boolean","number","string"];const ot=new class extends We{compare(a,b){const e=a.node.getPriority(),t=b.node.getPriority(),n=e.compareTo(t);return 0===n?F(a.name,b.name):n}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Be.MIN}maxPost(){return new Be(M,new st("[PRIORITY-POST]",it))}makePost(e,t){const n=nt(e);return new Be(t,new st("[PRIORITY-POST]",n))}toString(){return".priority"}},at=Math.log(2);class ct{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/at,10)),this.current_=this.count-1;const mask=(n=this.count,parseInt(Array(n+1).join("1"),2));var n;this.bits_=e+1&mask}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ut=function(e,t,n,r){e.sort(t);const o=function(t,r){const c=r-t;let l,h;if(0===c)return null;if(1===c)return l=e[t],h=n?n(l):l,new Ge(h,l.node,Ge.BLACK,null,null);{const d=parseInt(c/2,10)+t,f=o(t,d),m=o(d+1,r);return l=e[d],h=n?n(l):l,new Ge(h,l.node,Ge.BLACK,f,m)}},c=function(t){let r=null,c=null,l=e.length;const h=function(t,r){const c=l-t,h=l;l-=t;const f=o(c+1,h),m=e[c],y=n?n(m):m;d(new Ge(y,m.node,r,null,f))},d=function(e){r?(r.left=e,r=e):(c=e,r=e)};for(let i=0;i<t.count;++i){const e=t.nextBitIsOne(),n=Math.pow(2,t.count-(i+1));e?h(n,Ge.BLACK):(h(n,Ge.BLACK),h(n,Ge.RED))}return c}(new ct(e.length));return new Qe(r||t,c)};let lt;const ht={};class ft{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Object(c.e)(ht&&ot,"ChildrenNode.ts has not been loaded"),lt=lt||new ft({".priority":ht},{".priority":ot}),lt}get(e){const t=Object(c.L)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Qe?t:null}hasIndex(e){return Object(c.j)(this.indexSet_,e.toString())}addIndex(e,t){Object(c.e)(e!==$e,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const o=t.getIterator(Be.Wrap);let l,h=o.getNext();for(;h;)r=r||e.isDefinedOn(h.node),n.push(h),h=o.getNext();l=r?ut(n,e.getCompare()):ht;const d=e.toString(),f=Object.assign({},this.indexSet_);f[d]=e;const m=Object.assign({},this.indexes_);return m[d]=l,new ft(m,f)}addToIndexes(e,t){const n=Object(c.I)(this.indexes_,((n,r)=>{const o=Object(c.L)(this.indexSet_,r);if(Object(c.e)(o,"Missing index implementation for "+r),n===ht){if(o.isDefinedOn(e.node)){const n=[],r=t.getIterator(Be.Wrap);let c=r.getNext();for(;c;)c.name!==e.name&&n.push(c),c=r.getNext();return n.push(e),ut(n,o.getCompare())}return ht}{const r=t.get(e.name);let o=n;return r&&(o=o.remove(new Be(e.name,r))),o.insert(e,e.node)}}));return new ft(n,this.indexSet_)}removeFromIndexes(e,t){const n=Object(c.I)(this.indexes_,(n=>{if(n===ht)return n;{const r=t.get(e.name);return r?n.remove(new Be(e.name,r)):n}}));return new ft(n,this.indexSet_)}}let pt;class gt{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&et(this.priorityNode_),this.children_.isEmpty()&&Object(c.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pt||(pt=new gt(new Qe(Je),null,ft.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pt}updatePriority(e){return this.children_.isEmpty()?this:new gt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?pt:t}}getChild(path){const e=Ie(path);return null===e?this:this.getImmediateChild(e).getChild(Se(path))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Object(c.e)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Be(e,t);let r,o;t.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(n,this.children_));const c=r.isEmpty()?pt:this.priorityNode_;return new gt(r,c,o)}}updateChild(path,e){const t=Ie(path);if(null===t)return e;{Object(c.e)(".priority"!==Ie(path)||1===Ce(path),".priority must be the last token in a path");const n=this.getImmediateChild(t).updateChild(Se(path),e);return this.updateImmediateChild(t,n)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,o=!0;if(this.forEachChild(ot,((c,l)=>{t[c]=l.val(e),n++,o&&gt.INTEGER_REGEXP_.test(c)?r=Math.max(r,Number(c)):o=!1})),!e&&o&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ze(this.getPriority().val())+":"),this.forEachChild(ot,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":C(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Be(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Be(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Be(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Be.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Be.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mt?-1:0}withIndex(e){if(e===$e||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new gt(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===$e||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(ot),n=t.getIterator(ot);let r=e.getNext(),o=n.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=e.getNext(),o=n.getNext()}return null===r&&null===o}return!1}return!1}}resolveIndex_(e){return e===$e?null:this.indexMap_.get(e.toString())}}gt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const mt=new class extends gt{constructor(){super(new Qe(Je),gt.EMPTY_NODE,ft.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return gt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Be,{MIN:{value:new Be(L,gt.EMPTY_NODE)},MAX:{value:new Be(M,mt)}}),ze.__EMPTY_NODE=gt.EMPTY_NODE,st.__childrenNodeConstructor=gt,Xe=mt,function(e){it=e}(mt);function yt(e,t=null){if(null===e)return gt.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),Object(c.e)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){return new st(e,yt(t))}if(e instanceof Array){let n=gt.EMPTY_NODE;return H(e,((t,r)=>{if(Object(c.j)(e,t)&&"."!==t.substring(0,1)){const e=yt(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(yt(t))}{const n=[];let r=!1;if(H(e,((e,t)=>{if("."!==e.substring(0,1)){const o=yt(t);o.isEmpty()||(r=r||!o.getPriority().isEmpty(),n.push(new Be(e,o)))}})),0===n.length)return gt.EMPTY_NODE;const o=ut(n,Ye,(e=>e.name),Je);if(r){const e=ut(n,ot.getCompare());return new gt(o,yt(t),new ft({".priority":e},{".priority":ot}))}return new gt(o,yt(t),ft.Default)}}!function(e){nt=e}(yt);class vt extends We{constructor(e){super(),this.indexPath_=e,Object(c.e)(!xe(e)&&".priority"!==Ie(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(a,b){const e=this.extractChild(a.node),t=this.extractChild(b.node),n=e.compareTo(t);return 0===n?F(a.name,b.name):n}makePost(e,t){const n=yt(e),r=gt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Be(t,r)}maxPost(){const e=gt.EMPTY_NODE.updateChild(this.indexPath_,mt);return new Be(M,e)}toString(){return Oe(this.indexPath_,0).join("/")}}const _t=new class extends We{compare(a,b){const e=a.node.compareTo(b.node);return 0===e?F(a.name,b.name):e}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Be.MIN}maxPost(){return Be.MAX}makePost(e,t){const n=yt(e);return new Be(t,n)}toString(){return".value"}},wt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bt=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=wt.charAt(n%64),n=Math.floor(n/64);Object(c.e)(0===n,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=wt.charAt(t[i]);return Object(c.e)(20===l.length,"nextPushId: Length should be 20."),l}}(),Tt=function(e){if("2147483647"===e)return"-";const t=Q(e);if(null!=t)return""+(t+1);const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e.charAt(i);if(n.length<786)return n.push("-"),n.join("");let i=n.length-1;for(;i>=0&&"z"===n[i];)i--;if(-1===i)return M;const source=n[i],r=wt.charAt(wt.indexOf(source)+1);return n[i]=r,n.slice(0,i+1).join("")},Et=function(e){if("-2147483648"===e)return L;const t=Q(e);if(null!=t)return""+(t-1);const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e.charAt(i);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=wt.charAt(wt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function It(e){return{type:"value",snapshotNode:e}}function Ct(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function St(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function kt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Ot{constructor(e){this.index_=e}updateChild(e,t,n,r,source,o){Object(c.e)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(t);return l.getChild(r).equals(n.getChild(r))&&l.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(St(t,l)):Object(c.e)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Ct(t,n)):o.trackChildChange(kt(t,n,l))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ot,((e,r)=>{t.hasChild(e)||n.trackChildChange(St(e,r))})),t.isLeafNode()||t.forEachChild(ot,((t,r)=>{if(e.hasChild(t)){const o=e.getImmediateChild(t);o.equals(r)||n.trackChildChange(kt(t,r,o))}else n.trackChildChange(Ct(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?gt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Nt{constructor(e){this.indexedFilter_=new Ot(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Nt.getStartPost_(e),this.endPost_=Nt.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,r,source,o){return this.matches(new Be(t,n))||(n=gt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,source,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=gt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(gt.EMPTY_NODE);const o=this;return t.forEachChild(ot,((e,t)=>{o.matches(new Be(e,t))||(r=r.updateImmediateChild(e,gt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class At{constructor(e){this.rangedFilter_=new Nt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,r,source,o){return this.rangedFilter_.matches(new Be(t,n))||(n=gt.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,source,o):this.fullLimitUpdateChild_(e,t,n,source,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=gt.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let o;if(o=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!o)break;r=r.updateImmediateChild(t.name,t.node),n++}}else{let e,n,o,c;if(r=t.withIndex(this.index_),r=r.updatePriority(gt.EMPTY_NODE),this.reverse_){c=r.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();o=(a,b)=>t(b,a)}else c=r.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),o=this.index_.getCompare();let l=0,h=!1;for(;c.hasNext();){const t=c.getNext();!h&&o(e,t)<=0&&(h=!0);h&&l<this.limit_&&o(t,n)<=0?l++:r=r.updateImmediateChild(t.name,gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,source,r){let o;if(this.reverse_){const e=this.index_.getCompare();o=(a,b)=>e(b,a)}else o=this.index_.getCompare();const l=e;Object(c.e)(l.numChildren()===this.limit_,"");const h=new Be(t,n),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(h);if(l.hasChild(t)){const e=l.getImmediateChild(t);let c=source.getChildAfterChild(this.index_,d,this.reverse_);for(;null!=c&&(c.name===t||l.hasChild(c.name));)c=source.getChildAfterChild(this.index_,c,this.reverse_);const m=null==c?1:o(c,h);if(f&&!n.isEmpty()&&m>=0)return null!=r&&r.trackChildChange(kt(t,n,e)),l.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(St(t,e));const n=l.updateImmediateChild(t,gt.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=r&&r.trackChildChange(Ct(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?e:f&&o(d,h)>=0?(null!=r&&(r.trackChildChange(St(d.name,d.node)),r.trackChildChange(Ct(t,n))),l.updateImmediateChild(t,n).updateImmediateChild(d.name,gt.EMPTY_NODE)):e}}class xt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ot}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Object(c.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Object(c.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:L}hasEnd(){return this.endSet_}getIndexEndValue(){return Object(c.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Object(c.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:M}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Object(c.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ot}copy(){const e=new xt;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Dt(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Rt(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Pt(e,t){const n=e.copy();return n.index_=t,n}function jt(e){const t={};if(e.isDefault())return t;let n;return e.index_===ot?n="$priority":e.index_===_t?n="$value":e.index_===$e?n="$key":(Object(c.e)(e.index_ instanceof vt,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Object(c.O)(n),e.startSet_&&(t.startAt=Object(c.O)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Object(c.O)(e.indexStartName_))),e.endSet_&&(t.endAt=Object(c.O)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Object(c.O)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Lt(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ot&&(t.i=e.index_.toString()),t}class Mt extends _e{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=x("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Object(c.e)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Mt.getListenId_(e,n),h={};this.listens_[l]=h;const d=jt(e._queryParams);this.restRequest_(o+".json",d,((e,t)=>{let data=t;if(404===e&&(data=null,e=null),null===e&&this.onDataUpdate_(o,data,!1,n),Object(c.L)(this.listens_,l)===h){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Mt.getListenId_(e,t);delete this.listens_[n]}get(e){const t=jt(e._queryParams),n=e._path.toString(),r=new c.a;return this.restRequest_(n+".json",t,((e,t)=>{let data=t;404===e&&(data=null,e=null),null===e?(this.onDataUpdate_(n,data,!1,null),r.resolve(data)):r.reject(new Error(data))})),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Object(c.J)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(n&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let e=null;if(h.status>=200&&h.status<300){try{e=Object(c.H)(h.responseText)}catch(e){P("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,e)}else 401!==h.status&&404!==h.status&&P("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))}}class Ft{constructor(){this.rootNode_=gt.EMPTY_NODE}getNode(path){return this.rootNode_.getChild(path)}updateSnapshot(path,e){this.rootNode_=this.rootNode_.updateChild(path,e)}}function qt(){return{value:null,children:new Map}}function Ut(e,path,data){if(xe(path))e.value=data,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(path,data);else{const t=Ie(path);e.children.has(t)||e.children.set(t,qt());Ut(e.children.get(t),path=Se(path),data)}}function Vt(e,path){if(xe(path))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const t=e.value;return e.value=null,t.forEachChild(ot,((t,n)=>{Ut(e,new Te(t),n)})),Vt(e,path)}}if(e.children.size>0){const t=Ie(path);if(path=Se(path),e.children.has(t)){Vt(e.children.get(t),path)&&e.children.delete(t)}return 0===e.children.size}return!0}function Bt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Bt(r,new Te(t.toString()+"/"+e),n)}))}class Wt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&H(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Ht{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Wt(e);const n=1e4+2e4*Math.random();J(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;H(e,((e,r)=>{r>0&&Object(c.j)(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),J(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zt;function $t(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(zt||(zt={}));class Kt{constructor(path,e,t){this.path=path,this.affectedTree=e,this.revert=t,this.type=zt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(xe(this.path)){if(null!=this.affectedTree.value)return Object(c.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Te(e));return new Kt(Ee(),t,this.revert)}}return Object(c.e)(Ie(this.path)===e,"operationForChild called for unrelated child."),new Kt(Se(this.path),this.affectedTree,this.revert)}}class Gt{constructor(source,path){this.source=source,this.path=path,this.type=zt.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new Gt(this.source,Ee()):new Gt(this.source,Se(this.path))}}class Qt{constructor(source,path,e){this.source=source,this.path=path,this.snap=e,this.type=zt.OVERWRITE}operationForChild(e){return xe(this.path)?new Qt(this.source,Ee(),this.snap.getImmediateChild(e)):new Qt(this.source,Se(this.path),this.snap)}}class Yt{constructor(source,path,e){this.source=source,this.path=path,this.children=e,this.type=zt.MERGE}operationForChild(e){if(xe(this.path)){const t=this.children.subtree(new Te(e));return t.isEmpty()?null:t.value?new Qt(this.source,Ee(),t.value):new Yt(this.source,Ee(),t)}return Object(c.e)(Ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Yt(this.source,Se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Jt{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(path){if(xe(path))return this.isFullyInitialized()&&!this.filtered_;const e=Ie(path);return this.isCompleteForChild(e)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Xt{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Zt(e,t,n,r,o,l){const h=r.filter((e=>e.type===n));h.sort(((a,b)=>function(e,a,b){if(null==a.childName||null==b.childName)throw Object(c.f)("Should only compare child_ events.");const t=new Be(a.childName,a.snapshotNode),n=new Be(b.childName,b.snapshotNode);return e.index_.compare(t,n)}(e,a,b))),h.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,l);o.forEach((o=>{o.respondsTo(n.type)&&t.push(o.createEvent(r,e.query_))}))}))}function en(e,t){return{eventCache:e,serverCache:t}}function tn(e,t,n,r){return en(new Jt(t,n,r),e.serverCache)}function nn(e,t,n,r){return en(e.eventCache,new Jt(t,n,r))}function rn(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function sn(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let on;class an{constructor(e,t=(()=>(on||(on=new Qe(U)),on))()){this.value=e,this.children=t}static fromObject(e){let t=new an(null);return H(e,((e,n)=>{t=t.set(new Te(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ee(),value:this.value};if(xe(e))return null;{const n=Ie(e),r=this.children.get(n);if(null!==r){const o=r.findRootMostMatchingPathAndValue(Se(e),t);if(null!=o){return{path:Ae(new Te(n),o.path),value:o.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(xe(e))return this;{const t=Ie(e),n=this.children.get(t);return null!==n?n.subtree(Se(e)):new an(null)}}set(e,t){if(xe(e))return new an(t,this.children);{const n=Ie(e),r=(this.children.get(n)||new an(null)).set(Se(e),t),o=this.children.insert(n,r);return new an(this.value,o)}}remove(e){if(xe(e))return this.children.isEmpty()?new an(null):new an(null,this.children);{const t=Ie(e),n=this.children.get(t);if(n){const r=n.remove(Se(e));let o;return o=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&o.isEmpty()?new an(null):new an(this.value,o)}return this}}get(e){if(xe(e))return this.value;{const t=Ie(e),n=this.children.get(t);return n?n.get(Se(e)):null}}setTree(e,t){if(xe(e))return t;{const n=Ie(e),r=(this.children.get(n)||new an(null)).setTree(Se(e),t);let o;return o=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new an(this.value,o)}}fold(e){return this.fold_(Ee(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,o)=>{n[r]=o.fold_(Ae(e,r),t)})),t(e,this.value,n)}findOnPath(path,e){return this.findOnPath_(path,Ee(),e)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(xe(e))return null;{const r=Ie(e),o=this.children.get(r);return o?o.findOnPath_(Se(e),Ae(t,r),n):null}}foreachOnPath(path,e){return this.foreachOnPath_(path,Ee(),e)}foreachOnPath_(e,t,n){if(xe(e))return this;{this.value&&n(t,this.value);const r=Ie(e),o=this.children.get(r);return o?o.foreachOnPath_(Se(e),Ae(t,r),n):new an(null)}}foreach(e){this.foreach_(Ee(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Ae(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class cn{constructor(e){this.writeTree_=e}static empty(){return new cn(new an(null))}}function un(e,path,t){if(xe(path))return new cn(new an(t));{const n=e.writeTree_.findRootMostValueAndPath(path);if(null!=n){const r=n.path;let o=n.value;const c=De(r,path);return o=o.updateChild(c,t),new cn(e.writeTree_.set(r,o))}{const n=new an(t),r=e.writeTree_.setTree(path,n);return new cn(r)}}}function ln(e,path,t){let n=e;return H(t,((e,t)=>{n=un(n,Ae(path,e),t)})),n}function hn(e,path){if(xe(path))return cn.empty();{const t=e.writeTree_.setTree(path,new an(null));return new cn(t)}}function dn(e,path){return null!=fn(e,path)}function fn(e,path){const t=e.writeTree_.findRootMostValueAndPath(path);return null!=t?e.writeTree_.get(t.path).getChild(De(t.path,path)):null}function pn(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ot,((e,n)=>{t.push(new Be(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Be(e,n.value))})),t}function gn(e,path){if(xe(path))return e;{const t=fn(e,path);return new cn(null!=t?new an(t):e.writeTree_.subtree(path))}}function mn(e){return e.writeTree_.isEmpty()}function yn(e,t){return vn(Ee(),e.writeTree_,t)}function vn(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,o)=>{".priority"===t?(Object(c.e)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=vn(Ae(e,t),o,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Ae(e,".priority"),r)),n}}function _n(e,path){return Dn(path,e)}function wn(e,t){const n=e.allWrites.findIndex((s=>s.writeId===t));Object(c.e)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let o=r.visible,l=!1,i=e.allWrites.length-1;for(;o&&i>=0;){const t=e.allWrites[i];t.visible&&(i>=n&&bn(t,r.path)?o=!1:je(r.path,t.path)&&(l=!0)),i--}if(o){if(l)return function(e){e.visibleWrites=En(e.allWrites,Tn,Ee()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=hn(e.visibleWrites,r.path);else{H(r.children,(t=>{e.visibleWrites=hn(e.visibleWrites,Ae(r.path,t))}))}return!0}return!1}function bn(e,path){if(e.snap)return je(e.path,path);for(const t in e.children)if(e.children.hasOwnProperty(t)&&je(Ae(e.path,t),path))return!0;return!1}function Tn(e){return e.visible}function En(e,filter,t){let n=cn.empty();for(let i=0;i<e.length;++i){const r=e[i];if(filter(r)){const e=r.path;let o;if(r.snap)je(t,e)?(o=De(t,e),n=un(n,o,r.snap)):je(e,t)&&(o=De(e,t),n=un(n,Ee(),r.snap.getChild(o)));else{if(!r.children)throw Object(c.f)("WriteRecord should have .snap or .children");if(je(t,e))o=De(t,e),n=ln(n,o,r.children);else if(je(e,t))if(o=De(e,t),xe(o))n=ln(n,Ee(),r.children);else{const e=Object(c.L)(r.children,Ie(o));if(e){const t=e.getChild(Se(o));n=un(n,Ee(),t)}}}}}return n}function In(e,t,n,r,o){if(r||o){const c=gn(e.visibleWrites,t);if(!o&&mn(c))return n;if(o||null!=n||dn(c,Ee())){const filter=function(e){return(e.visible||o)&&(!r||!~r.indexOf(e.writeId))&&(je(e.path,t)||je(t,e.path))};return yn(En(e.allWrites,filter,t),n||gt.EMPTY_NODE)}return null}{const r=fn(e.visibleWrites,t);if(null!=r)return r;{const r=gn(e.visibleWrites,t);if(mn(r))return n;if(null!=n||dn(r,Ee())){return yn(r,n||gt.EMPTY_NODE)}return null}}}function Cn(e,t,n,r){return In(e.writeTree,e.treePath,t,n,r)}function Sn(e,t){return function(e,t,n){let r=gt.EMPTY_NODE;const o=fn(e.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(ot,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const o=gn(e.visibleWrites,t);return n.forEachChild(ot,((e,t)=>{const n=yn(gn(o,new Te(e)),t);r=r.updateImmediateChild(e,n)})),pn(o).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return pn(gn(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function kn(e,path,t,n){return function(e,t,n,r,o){Object(c.e)(r||o,"Either existingEventSnap or existingServerSnap must exist");const path=Ae(t,n);if(dn(e.visibleWrites,path))return null;{const t=gn(e.visibleWrites,path);return mn(t)?o.getChild(n):yn(t,o.getChild(n))}}(e.writeTree,e.treePath,path,t,n)}function On(e,path){return function(e,path){return fn(e.visibleWrites,path)}(e.writeTree,Ae(e.treePath,path))}function Nn(e,t,n,r,o,c){return function(e,t,n,r,o,c,l){let h;const d=gn(e.visibleWrites,t),f=fn(d,Ee());if(null!=f)h=f;else{if(null==n)return[];h=yn(d,n)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const e=[],t=l.getCompare(),n=c?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let d=n.getNext();for(;d&&e.length<o;)0!==t(d,r)&&e.push(d),d=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,o,c)}function An(e,t,n){return function(e,t,n,r){const path=Ae(t,n),o=fn(e.visibleWrites,path);if(null!=o)return o;if(r.isCompleteForChild(n))return yn(gn(e.visibleWrites,path),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function xn(e,t){return Dn(Ae(e.treePath,t),e.writeTree)}function Dn(path,e){return{treePath:path,writeTree:e}}class Rn{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Object(c.e)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Object(c.e)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const o=r.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(n,kt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(n,St(n,r.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(n,Ct(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw Object(c.f)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,kt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Pn=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class jn{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Jt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return An(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sn(this.viewCache_),o=Nn(this.writes_,r,t,1,n,e);return 0===o.length?null:o[0]}}function Ln(e,t,n,r,o){const l=new Rn;let h,d;if(n.type===zt.OVERWRITE){const f=n;f.source.fromUser?h=qn(e,t,f.path,f.snap,r,o,l):(Object(c.e)(f.source.fromServer,"Unknown source."),d=f.source.tagged||t.serverCache.isFiltered()&&!xe(f.path),h=Fn(e,t,f.path,f.snap,r,o,d,l))}else if(n.type===zt.MERGE){const f=n;f.source.fromUser?h=function(e,t,path,n,r,o,c){let l=t;return n.foreach(((n,h)=>{const d=Ae(path,n);Un(t,Ie(d))&&(l=qn(e,l,d,h,r,o,c))})),n.foreach(((n,h)=>{const d=Ae(path,n);Un(t,Ie(d))||(l=qn(e,l,d,h,r,o,c))})),l}(e,t,f.path,f.children,r,o,l):(Object(c.e)(f.source.fromServer,"Unknown source."),d=f.source.tagged||t.serverCache.isFiltered(),h=Bn(e,t,f.path,f.children,r,o,d,l))}else if(n.type===zt.ACK_USER_WRITE){const d=n;h=d.revert?function(e,t,path,n,r,o){let l;if(null!=On(n,path))return t;{const source=new jn(n,t,r),h=t.eventCache.getNode();let d;if(xe(path)||".priority"===Ie(path)){let r;if(t.serverCache.isFullyInitialized())r=Cn(n,sn(t));else{const e=t.serverCache.getNode();Object(c.e)(e instanceof gt,"serverChildren would be complete if leaf node"),r=Sn(n,e)}r=r,d=e.filter.updateFullNode(h,r,o)}else{const r=Ie(path);let c=An(n,r,t.serverCache);null==c&&t.serverCache.isCompleteForChild(r)&&(c=h.getImmediateChild(r)),d=null!=c?e.filter.updateChild(h,r,c,Se(path),source,o):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(h,r,gt.EMPTY_NODE,Se(path),source,o):h,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=Cn(n,sn(t)),l.isLeafNode()&&(d=e.filter.updateFullNode(d,l,o)))}return l=t.serverCache.isFullyInitialized()||null!=On(n,Ee()),tn(t,d,l,e.filter.filtersNodes())}}(e,t,d.path,r,o,l):function(e,t,n,r,o,c,l){if(null!=On(o,n))return t;const h=t.serverCache.isFiltered(),d=t.serverCache;if(null!=r.value){if(xe(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return Fn(e,t,n,d.getNode().getChild(n),o,c,h,l);if(xe(n)){let r=new an(null);return d.getNode().forEachChild($e,((e,t)=>{r=r.set(new Te(e),t)})),Bn(e,t,n,r,o,c,h,l)}return t}{let f=new an(null);return r.foreach(((e,t)=>{const r=Ae(n,e);d.isCompleteForPath(r)&&(f=f.set(e,d.getNode().getChild(r)))})),Bn(e,t,n,f,o,c,h,l)}}(e,t,d.path,d.affectedTree,r,o,l)}else{if(n.type!==zt.LISTEN_COMPLETE)throw Object(c.f)("Unknown operation type: "+n.type);h=function(e,t,path,n,r){const o=t.serverCache,c=nn(t,o.getNode(),o.isFullyInitialized()||xe(path),o.isFiltered());return Mn(e,c,path,n,Pn,r)}(e,t,n.path,r,l)}const f=l.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),c=rn(e);(n.length>0||!e.eventCache.isFullyInitialized()||o&&!r.getNode().equals(c)||!r.getNode().getPriority().equals(c.getPriority()))&&n.push(It(rn(t)))}}(t,h,f),{viewCache:h,changes:f}}function Mn(e,t,n,r,source,o){const l=t.eventCache;if(null!=On(r,n))return t;{let h,d;if(xe(n))if(Object(c.e)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=sn(t),c=Sn(r,n instanceof gt?n:gt.EMPTY_NODE);h=e.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{const n=Cn(r,sn(t));h=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const f=Ie(n);if(".priority"===f){Object(c.e)(1===Ce(n),"Can't have a priority with additional path components");const o=l.getNode();d=t.serverCache.getNode();const f=kn(r,n,o,d);h=null!=f?e.filter.updatePriority(o,f):l.getNode()}else{const c=Se(n);let m;if(l.isCompleteForChild(f)){d=t.serverCache.getNode();const e=kn(r,n,l.getNode(),d);m=null!=e?l.getNode().getImmediateChild(f).updateChild(c,e):l.getNode().getImmediateChild(f)}else m=An(r,f,t.serverCache);h=null!=m?e.filter.updateChild(l.getNode(),f,m,c,source,o):l.getNode()}}return tn(t,h,l.isFullyInitialized()||xe(n),e.filter.filtersNodes())}}function Fn(e,t,n,r,o,c,l,h){const d=t.serverCache;let f;const m=l?e.filter:e.filter.getIndexedFilter();if(xe(n))f=m.updateFullNode(d.getNode(),r,null);else if(m.filtersNodes()&&!d.isFiltered()){const e=d.getNode().updateChild(n,r);f=m.updateFullNode(d.getNode(),e,null)}else{const e=Ie(n);if(!d.isCompleteForPath(n)&&Ce(n)>1)return t;const o=Se(n),c=d.getNode().getImmediateChild(e).updateChild(o,r);f=".priority"===e?m.updatePriority(d.getNode(),c):m.updateChild(d.getNode(),e,c,o,Pn,null)}const y=nn(t,f,d.isFullyInitialized()||xe(n),m.filtersNodes());return Mn(e,y,n,o,new jn(o,y,c),h)}function qn(e,t,n,r,o,c,l){const h=t.eventCache;let d,f;const source=new jn(o,t,c);if(xe(n))f=e.filter.updateFullNode(t.eventCache.getNode(),r,l),d=tn(t,f,!0,e.filter.filtersNodes());else{const o=Ie(n);if(".priority"===o)f=e.filter.updatePriority(t.eventCache.getNode(),r),d=tn(t,f,h.isFullyInitialized(),h.isFiltered());else{const c=Se(n),f=h.getNode().getImmediateChild(o);let m;if(xe(c))m=r;else{const e=source.getCompleteChild(o);m=null!=e?".priority"===ke(c)&&e.getChild(Ne(c)).isEmpty()?e:e.updateChild(c,r):gt.EMPTY_NODE}if(f.equals(m))d=t;else{d=tn(t,e.filter.updateChild(h.getNode(),o,m,c,source,l),h.isFullyInitialized(),e.filter.filtersNodes())}}}return d}function Un(e,t){return e.eventCache.isCompleteForChild(t)}function Vn(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Bn(e,t,path,n,r,o,c,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let h,d=t;h=xe(path)?n:new an(null).setTree(path,n);const f=t.serverCache.getNode();return h.children.inorderTraversal(((n,h)=>{if(f.hasChild(n)){const f=Vn(0,t.serverCache.getNode().getImmediateChild(n),h);d=Fn(e,d,new Te(n),f,r,o,c,l)}})),h.children.inorderTraversal(((n,h)=>{const m=!t.serverCache.isCompleteForChild(n)&&void 0===h.value;if(!f.hasChild(n)&&!m){const f=Vn(0,t.serverCache.getNode().getImmediateChild(n),h);d=Fn(e,d,new Te(n),f,r,o,c,l)}})),d}class Wn{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Ot(n.getIndex()),filter=(o=n).loadsAllData()?new Ot(o.getIndex()):o.hasLimit()?new At(o):new Nt(o);var o;this.processor_=function(filter){return{filter:filter}}(filter);const c=t.serverCache,l=t.eventCache,h=r.updateFullNode(gt.EMPTY_NODE,c.getNode(),null),d=filter.updateFullNode(gt.EMPTY_NODE,l.getNode(),null),f=new Jt(h,c.isFullyInitialized(),r.filtersNodes()),m=new Jt(d,l.isFullyInitialized(),filter.filtersNodes());this.viewCache_=en(m,f),this.eventGenerator_=new Xt(this.query_)}get query(){return this.query_}}function Hn(view,path){const e=sn(view.viewCache_);return e&&(view.query._queryParams.loadsAllData()||!xe(path)&&!e.getImmediateChild(Ie(path)).isEmpty())?e.getChild(path):null}function zn(view){return 0===view.eventRegistrations_.length}function $n(view,e,t){const n=[];if(t){Object(c.e)(null==e,"A cancel should cancel all event registrations.");const path=view.query._path;view.eventRegistrations_.forEach((e=>{const r=e.createCancelEvent(t,path);r&&n.push(r)}))}if(e){let t=[];for(let i=0;i<view.eventRegistrations_.length;++i){const n=view.eventRegistrations_[i];if(n.matches(e)){if(e.hasAnyCallback()){t=t.concat(view.eventRegistrations_.slice(i+1));break}}else t.push(n)}view.eventRegistrations_=t}else view.eventRegistrations_=[];return n}function Kn(view,e,t,n){e.type===zt.MERGE&&null!==e.source.queryId&&(Object(c.e)(sn(view.viewCache_),"We should always have a full cache before handling merges"),Object(c.e)(rn(view.viewCache_),"Missing event cache, even though we have a server cache"));const r=view.viewCache_,o=Ln(view.processor_,r,e,t,n);var l,h;return l=view.processor_,h=o.viewCache,Object(c.e)(h.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),Object(c.e)(h.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed"),Object(c.e)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),view.viewCache_=o.viewCache,Gn(view,o.changes,o.viewCache.eventCache.getNode(),null)}function Gn(view,e,t,n){const r=n?[n]:view.eventRegistrations_;return function(e,t,n,r){const o=[],c=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&c.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Zt(e,o,"child_removed",t,r,n),Zt(e,o,"child_added",t,r,n),Zt(e,o,"child_moved",c,r,n),Zt(e,o,"child_changed",t,r,n),Zt(e,o,"value",t,r,n),o}(view.eventGenerator_,e,t,r)}let Qn,Yn;class Jn{constructor(){this.views=new Map}}function Xn(e,t,n,r){const o=t.source.queryId;if(null!==o){const view=e.views.get(o);return Object(c.e)(null!=view,"SyncTree gave us an op for an invalid query."),Kn(view,t,n,r)}{let o=[];for(const view of e.views.values())o=o.concat(Kn(view,t,n,r));return o}}function Zn(e,t,n,r,o){const c=t._queryIdentifier,view=e.views.get(c);if(!view){let e=Cn(n,o?r:null),c=!1;e?c=!0:r instanceof gt?(e=Sn(n,r),c=!1):(e=gt.EMPTY_NODE,c=!1);const l=en(new Jt(e,c,!1),new Jt(r,o,!1));return new Wn(t,l)}return view}function er(e,t,n,r,o,c){const view=Zn(e,t,r,o,c);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,view),function(view,e){view.eventRegistrations_.push(e)}(view,n),function(view,e){const t=view.viewCache_.eventCache,n=[];t.getNode().isLeafNode()||t.getNode().forEachChild(ot,((e,t)=>{n.push(Ct(e,t))}));return t.isFullyInitialized()&&n.push(It(t.getNode())),Gn(view,n,t.getNode(),e)}(view,n)}function nr(e,t,n,r){const o=t._queryIdentifier,l=[];let h=[];const d=ar(e);if("default"===o)for(const[t,view]of e.views.entries())h=h.concat($n(view,n,r)),zn(view)&&(e.views.delete(t),view.query._queryParams.loadsAllData()||l.push(view.query));else{const view=e.views.get(o);view&&(h=h.concat($n(view,n,r)),zn(view)&&(e.views.delete(o),view.query._queryParams.loadsAllData()||l.push(view.query)))}return d&&!ar(e)&&l.push(new(Object(c.e)(Qn,"Reference.ts has not been loaded"),Qn)(t._repo,t._path)),{removed:l,events:h}}function rr(e){const t=[];for(const view of e.views.values())view.query._queryParams.loadsAllData()||t.push(view);return t}function ir(e,path){let t=null;for(const view of e.views.values())t=t||Hn(view,path);return t}function sr(e,t){if(t._queryParams.loadsAllData())return cr(e);{const n=t._queryIdentifier;return e.views.get(n)}}function or(e,t){return null!=sr(e,t)}function ar(e){return null!=cr(e)}function cr(e){for(const view of e.views.values())if(view.query._queryParams.loadsAllData())return view;return null}let ur=1;class lr{constructor(e){this.listenProvider_=e,this.syncPointTree_=new an(null),this.pendingWriteTree_={visibleWrites:cn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dr(e,path,t,n,r){return function(e,path,t,n,r){Object(c.e)(n>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:path,snap:t,writeId:n,visible:r}),r&&(e.visibleWrites=un(e.visibleWrites,path,t)),e.lastWriteId=n}(e.pendingWriteTree_,path,t,n,r),r?wr(e,new Qt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},path,t)):[]}function fr(e,path,t,n){!function(e,path,t,n){Object(c.e)(n>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:path,children:t,writeId:n,visible:!0}),e.visibleWrites=ln(e.visibleWrites,path,t),e.lastWriteId=n}(e.pendingWriteTree_,path,t,n);const r=an.fromObject(t);return wr(e,new Yt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},path,r))}function pr(e,t,n=!1){const r=function(e,t){for(let i=0;i<e.allWrites.length;i++){const n=e.allWrites[i];if(n.writeId===t)return n}return null}(e.pendingWriteTree_,t);if(wn(e.pendingWriteTree_,t)){let t=new an(null);return null!=r.snap?t=t.set(Ee(),!0):H(r.children,(e=>{t=t.set(new Te(e),!0)})),wr(e,new Kt(r.path,t,n))}return[]}function gr(e,path,t){return wr(e,new Qt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},path,t))}function mr(e,t,n,r){const path=t._path,o=e.syncPointTree_.get(path);let c=[];if(o&&("default"===t._queryIdentifier||or(o,t))){const l=nr(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(path));const h=l.removed;c=l.events;const d=-1!==h.findIndex((e=>e._queryParams.loadsAllData())),f=e.syncPointTree_.findOnPath(path,((e,t)=>ar(t)));if(d&&!f){const t=e.syncPointTree_.subtree(path);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&ar(t)){return[cr(t)]}{let e=[];return t&&(e=rr(t)),H(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let i=0;i<n.length;++i){const view=n[i],t=view.query,r=Ir(e,view);e.listenProvider_.startListening(Ar(t),Cr(e,t),r.hashFn,r.onComplete)}}}if(!f&&h.length>0&&!r)if(d){const n=null;e.listenProvider_.stopListening(Ar(t),n)}else h.forEach((t=>{const n=e.queryToTagMap.get(Sr(t));e.listenProvider_.stopListening(Ar(t),n)}));!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=Sr(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,h)}return c}function yr(e,t,n){const path=t._path;let r=null,o=!1;e.syncPointTree_.foreachOnPath(path,((e,t)=>{const n=De(e,path);r=r||ir(t,n),o=o||ar(t)}));let l,h=e.syncPointTree_.get(path);if(h?(o=o||ar(h),r=r||ir(h,Ee())):(h=new Jn,e.syncPointTree_=e.syncPointTree_.set(path,h)),null!=r)l=!0;else{l=!1,r=gt.EMPTY_NODE;e.syncPointTree_.subtree(path).foreachChild(((e,t)=>{const n=ir(t,Ee());n&&(r=r.updateImmediateChild(e,n))}))}const d=or(h,t);if(!d&&!t._queryParams.loadsAllData()){const n=Sr(t);Object(c.e)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=ur++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let f=er(h,t,n,_n(e.pendingWriteTree_,path),r,l);if(!d&&!o){const view=sr(h,t);f=f.concat(function(e,t,view){const path=t._path,n=Cr(e,t),r=Ir(e,view),o=e.listenProvider_.startListening(Ar(t),n,r.hashFn,r.onComplete),l=e.syncPointTree_.subtree(path);if(n)Object(c.e)(!ar(l.value),"If we're adding a query, it shouldn't be shadowed");else{const t=l.fold(((e,t,n)=>{if(!xe(e)&&t&&ar(t))return[cr(t).query];{let e=[];return t&&(e=e.concat(rr(t).map((view=>view.query)))),H(n,((t,n)=>{e=e.concat(n)})),e}}));for(let i=0;i<t.length;++i){const n=t[i];e.listenProvider_.stopListening(Ar(n),Cr(e,n))}}return o}(e,t,view))}return f}function vr(e,path,t){const n=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(path,((e,t)=>{const n=ir(t,De(e,path));if(n)return n}));return In(n,path,r,t,!0)}function _r(e,t){const path=t._path;let n=null;e.syncPointTree_.foreachOnPath(path,((e,t)=>{const r=De(e,path);n=n||ir(t,r)}));let r=e.syncPointTree_.get(path);r?n=n||ir(r,Ee()):(r=new Jn,e.syncPointTree_=e.syncPointTree_.set(path,r));const o=null!=n,c=o?new Jt(n,!0,!1):null;return function(view){return rn(view.viewCache_)}(Zn(r,t,_n(e.pendingWriteTree_,t._path),o?c.getNode():gt.EMPTY_NODE,o))}function wr(e,t){return Tr(t,e.syncPointTree_,null,_n(e.pendingWriteTree_,Ee()))}function Tr(e,t,n,r){if(xe(e.path))return Er(e,t,n,r);{const o=t.get(Ee());null==n&&null!=o&&(n=ir(o,Ee()));let c=[];const l=Ie(e.path),h=e.operationForChild(l),d=t.children.get(l);if(d&&h){const e=n?n.getImmediateChild(l):null,t=xn(r,l);c=c.concat(Tr(h,d,e,t))}return o&&(c=c.concat(Xn(o,e,r,n))),c}}function Er(e,t,n,r){const o=t.get(Ee());null==n&&null!=o&&(n=ir(o,Ee()));let c=[];return t.children.inorderTraversal(((t,o)=>{const l=n?n.getImmediateChild(t):null,h=xn(r,t),d=e.operationForChild(t);d&&(c=c.concat(Er(d,o,l,h)))})),o&&(c=c.concat(Xn(o,e,r,n))),c}function Ir(e,view){const t=view.query,n=Cr(e,t);return{hashFn:()=>{const e=function(view){return view.viewCache_.serverCache.getNode()}(view)||gt.EMPTY_NODE;return e.hash()},onComplete:r=>{if("ok"===r)return n?function(e,path,t){const n=kr(e,t);if(n){const t=Or(n),r=t.path,o=t.queryId,c=De(r,path);return Nr(e,r,new Gt($t(o),c))}return[]}(e,t._path,n):function(e,path){return wr(e,new Gt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},path))}(e,t._path);{const n=function(code,e){let t="Unknown Error";"too_big"===code?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===code?t="Client doesn't have permission to access the desired data.":"unavailable"===code&&(t="The service is unavailable");const n=new Error(code+" at "+e._path.toString()+": "+t);return n.code=code.toUpperCase(),n}(r,t);return mr(e,t,null,n)}}}}function Cr(e,t){const n=Sr(t);return e.queryToTagMap.get(n)}function Sr(e){return e._path.toString()+"$"+e._queryIdentifier}function kr(e,t){return e.tagToQueryMap.get(t)}function Or(e){const t=e.indexOf("$");return Object(c.e)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Te(e.substr(0,t))}}function Nr(e,t,n){const r=e.syncPointTree_.get(t);Object(c.e)(r,"Missing sync point for query tag that we're tracking");return Xn(r,n,_n(e.pendingWriteTree_,t),null)}function Ar(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Object(c.e)(Yn,"Reference.ts has not been loaded"),Yn)(e._repo,e._path):e}class xr{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new xr(t)}node(){return this.node_}}class Dr{constructor(e,path){this.syncTree_=e,this.path_=path}getImmediateChild(e){const t=Ae(this.path_,e);return new Dr(this.syncTree_,t)}node(){return vr(this.syncTree_,this.path_)}}const Rr=function(e,t,n){return e&&"object"==typeof e?(Object(c.e)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Pr(e[".sv"],t,n):"object"==typeof e[".sv"]?jr(e[".sv"],t):void Object(c.e)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Pr=function(e,t,n){if("timestamp"===e)return n.timestamp;Object(c.e)(!1,"Unexpected server value: "+e)},jr=function(e,t,n){e.hasOwnProperty("increment")||Object(c.e)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&Object(c.e)(!1,"Unexpected increment value: "+r);const o=t.node();if(Object(c.e)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const l=o.getValue();return"number"!=typeof l?r:l+r},Lr=function(path,e,t,n){return Fr(e,new Dr(t,path),n)},Mr=function(e,t,n){return Fr(e,new xr(t),n)};function Fr(e,t,n){const r=e.getPriority().val(),o=Rr(r,t.getImmediateChild(".priority"),n);let c;if(e.isLeafNode()){const r=e,c=Rr(r.getValue(),t,n);return c!==r.getValue()||o!==r.getPriority().val()?new st(c,yt(o)):e}{const r=e;return c=r,o!==r.getPriority().val()&&(c=c.updatePriority(new st(o))),r.forEachChild(ot,((e,r)=>{const o=Fr(r,t.getImmediateChild(e),n);o!==r&&(c=c.updateImmediateChild(e,o))})),c}}class qr{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Ur(e,t){let path=t instanceof Te?t:new Te(t),n=e,r=Ie(path);for(;null!==r;){const e=Object(c.L)(n.node.children,r)||{children:{},childCount:0};n=new qr(r,n,e),path=Se(path),r=Ie(path)}return n}function Vr(e){return e.node.value}function Br(e,t){e.node.value=t,Kr(e)}function Wr(e){return e.node.childCount>0}function Hr(e,t){H(e.node.children,((n,r)=>{t(new qr(n,e,r))}))}function zr(e,t,n,r){n&&!r&&t(e),Hr(e,(e=>{zr(e,t,!0,r)})),n&&r&&t(e)}function $r(e){return new Te(null===e.parent?e.name:$r(e.parent)+"/"+e.name)}function Kr(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Vr(e)&&!Wr(e)}(n),o=Object(c.j)(e.node.children,t);r&&o?(delete e.node.children[t],e.node.childCount--,Kr(e)):r||o||(e.node.children[t]=n.node,e.node.childCount++,Kr(e))}(e.parent,e.name,e)}const Gr=/[\[\].#$\/\u0000-\u001F\u007F]/,Qr=/[\[\].#$\u0000-\u001F\u007F]/,Yr=10485760,Jr=function(e){return"string"==typeof e&&0!==e.length&&!Gr.test(e)},Xr=function(e){return"string"==typeof e&&0!==e.length&&!Qr.test(e)},Zr=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!j(e)||e&&"object"==typeof e&&Object(c.j)(e,".sv")},ei=function(e,t,path,n){n&&void 0===t||ti(Object(c.p)(e,"value"),t,path)},ti=function(e,data,t){const path=t instanceof Te?new Le(t,e):t;if(void 0===data)throw new Error(e+"contains undefined "+Fe(path));if("function"==typeof data)throw new Error(e+"contains a function "+Fe(path)+" with contents = "+data.toString());if(j(data))throw new Error(e+"contains "+data.toString()+" "+Fe(path));if("string"==typeof data&&data.length>Yr/3&&Object(c.M)(data)>Yr)throw new Error(e+"contains a string greater than "+"10485760 utf8 bytes "+Fe(path)+" ('"+data.substring(0,50)+"...')");if(data&&"object"==typeof data){let t=!1,n=!1;if(H(data,((r,o)=>{if(".value"===r)t=!0;else if(".priority"!==r&&".sv"!==r&&(n=!0,!Jr(r)))throw new Error(e+" contains an invalid key ("+r+") "+Fe(path)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Object(c.M)(t),Me(e)}(path,r),ti(e,o,path),function(e){const t=e.parts_.pop();e.byteLength_-=Object(c.M)(t),e.parts_.length>0&&(e.byteLength_-=1)}(path)})),t&&n)throw new Error(e+' contains ".value" child '+Fe(path)+" in addition to actual children.")}},ni=function(e,data,path,t){if(t&&void 0===data)return;const n=Object(c.p)(e,"values");if(!data||"object"!=typeof data||Array.isArray(data))throw new Error(n+" must be an object containing the children to replace.");const r=[];H(data,((e,t)=>{const o=new Te(e);if(ti(n,t,Ae(path,o)),".priority"===ke(o)&&!Zr(t))throw new Error(n+"contains an invalid value for '"+o.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(o)})),function(e,t){let i,n;for(i=0;i<t.length;i++){n=t[i];const r=Oe(n);for(let t=0;t<r.length;t++)if(".priority"===r[t]&&t===r.length-1);else if(!Jr(r[t]))throw new Error(e+"contains an invalid key ("+r[t]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Re);let r=null;for(i=0;i<t.length;i++){if(n=t[i],null!==r&&je(r,n))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+n.toString());r=n}}(n,r)},ri=function(e,t,n){if(!n||void 0!==t){if(j(t))throw new Error(Object(c.p)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zr(t))throw new Error(Object(c.p)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ii=function(e,t,n,r){if(!(r&&void 0===n||Jr(n)))throw new Error(Object(c.p)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},si=function(e,t,n,r){if(!(r&&void 0===n||Xr(n)))throw new Error(Object(c.p)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},oi=function(e,path){if(".info"===Ie(path))throw new Error(e+" failed = Can't modify data under /.info/")},ai=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Jr(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Xr(e)}(n))throw new Error(Object(c.p)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ci{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ui(e,t){let n=null;for(let i=0;i<t.length;i++){const data=t[i],path=data.getPath();null===n||Pe(path,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:path}),n.events.push(data)}n&&e.eventLists_.push(n)}function hi(e,path,t){ui(e,t),fi(e,(e=>Pe(e,path)))}function di(e,t,n){ui(e,n),fi(e,(e=>je(e,t)||je(t,e)))}function fi(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){t(r.path)?(pi(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function pi(e){for(let i=0;i<e.events.length;i++){const t=e.events[i];if(null!==t){e.events[i]=null;const n=t.getEventRunner();k&&A("event: "+t.toString()),Y(n)}}}const gi="repo_interrupt";class mi{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ci,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qt(),this.transactionQueueTree_=new qr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yi(e,t,n){if(e.stats_=le(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Mt(e.repoInfo_,((t,data,n,r)=>{wi(e,t,data,n,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>bi(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(c.O)(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Ve(e.repoInfo_,t,((t,data,n,r)=>{wi(e,t,data,n,r)}),(t=>{bi(e,t)}),(t=>{!function(e,t){H(t,((t,n)=>{Ti(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return ue[n]||(ue[n]=t()),ue[n]}(e.repoInfo_,(()=>new Ht(e.stats_,e.server_))),e.infoData_=new Ft,e.infoSyncTree_=new lr({startListening:(t,n,r,o)=>{let c=[];const l=e.infoData_.getNode(t._path);return l.isEmpty()||(c=gr(e.infoSyncTree_,t._path,l),setTimeout((()=>{o("ok")}),0)),c},stopListening:()=>{}}),Ti(e,"connected",!1),e.serverSyncTree_=new lr({startListening:(t,n,r,o)=>(e.server_.listen(t,r,n,((n,data)=>{const r=o(n,data);di(e.eventQueue_,t._path,r)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function vi(e){const t=e.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _i(e){return(t=(t={timestamp:vi(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function wi(e,t,data,n,r){e.dataUpdateCount++;const path=new Te(t);data=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,data):data;let o=[];if(r)if(n){const t=Object(c.I)(data,(e=>yt(e)));o=function(e,path,t,n){const r=kr(e,n);if(r){const n=Or(r),o=n.path,c=n.queryId,l=De(o,path),h=an.fromObject(t);return Nr(e,o,new Yt($t(c),l,h))}return[]}(e.serverSyncTree_,path,t,r)}else{const t=yt(data);o=function(e,path,t,n){const r=kr(e,n);if(null!=r){const n=Or(r),o=n.path,c=n.queryId,l=De(o,path);return Nr(e,o,new Qt($t(c),l,t))}return[]}(e.serverSyncTree_,path,t,r)}else if(n){const t=Object(c.I)(data,(e=>yt(e)));o=function(e,path,t){const n=an.fromObject(t);return wr(e,new Yt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},path,n))}(e.serverSyncTree_,path,t)}else{const t=yt(data);o=gr(e.serverSyncTree_,path,t)}let l=path;o.length>0&&(l=Ri(e,path)),di(e.eventQueue_,l,o)}function bi(e,t){Ti(e,"connected",t),!1===t&&function(e){Ni(e,"onDisconnectEvents");const t=_i(e),n=qt();Bt(e.onDisconnect_,Ee(),((path,r)=>{const o=Lr(path,r,e.serverSyncTree_,t);Ut(n,path,o)}));let r=[];Bt(n,Ee(),((path,t)=>{r=r.concat(gr(e.serverSyncTree_,path,t));const n=Fi(e,path);Ri(e,n)})),e.onDisconnect_=qt(),di(e.eventQueue_,Ee(),r)}(e)}function Ti(e,t,n){const path=new Te("/.info/"+t),r=yt(n);e.infoData_.updateSnapshot(path,r);const o=gr(e.infoSyncTree_,path,r);di(e.eventQueue_,path,o)}function Ei(e){return e.nextWriteId_++}function Ii(e,path,t,n,r){Ni(e,"set",{path:path.toString(),value:t,priority:n});const o=_i(e),c=yt(t,n),l=vr(e.serverSyncTree_,path),h=Mr(c,l,o),d=Ei(e),f=dr(e.serverSyncTree_,path,h,d,!0);ui(e.eventQueue_,f),e.server_.put(path.toString(),c.val(!0),((t,n)=>{const o="ok"===t;o||P("set at "+path+" failed: "+t);const c=pr(e.serverSyncTree_,d,!o);di(e.eventQueue_,path,c),Ai(e,r,t,n)}));const m=Fi(e,path);Ri(e,m),di(e.eventQueue_,m,[])}function Ci(e,path,t){e.server_.onDisconnectCancel(path.toString(),((n,r)=>{"ok"===n&&Vt(e.onDisconnect_,path),Ai(e,t,n,r)}))}function Si(e,path,t,n){const r=yt(t);e.server_.onDisconnectPut(path.toString(),r.val(!0),((t,o)=>{"ok"===t&&Ut(e.onDisconnect_,path,r),Ai(e,n,t,o)}))}function ki(e,t,n){let r;r=".info"===Ie(t._path)?mr(e.infoSyncTree_,t,n):mr(e.serverSyncTree_,t,n),hi(e.eventQueue_,t._path,r)}function Oi(e){e.persistentConnection_&&e.persistentConnection_.interrupt(gi)}function Ni(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),A(n,...t)}function Ai(e,t,n,r){t&&Y((()=>{if("ok"===n)t(null);else{const code=(n||"error").toUpperCase();let e=code;r&&(e+=": "+r);const o=new Error(e);o.code=code,t(o)}}))}function xi(e,path,t){return vr(e.serverSyncTree_,path,t)||gt.EMPTY_NODE}function Di(e,t=e.transactionQueueTree_){if(t||Mi(e,t),Vr(t)){const n=ji(e,t);Object(c.e)(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,path,t){const n=t.map((e=>e.currentWriteId)),r=xi(e,path,n);let o=r;const l=r.hash();for(let i=0;i<t.length;i++){const e=t[i];Object(c.e)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const n=De(path,e.path);o=o.updateChild(n,e.currentOutputSnapshotRaw)}const h=o.val(!0),d=path;e.server_.put(d.toString(),h,(n=>{Ni(e,"transaction put response",{path:d.toString(),status:n});let r=[];if("ok"===n){const n=[];for(let i=0;i<t.length;i++)t[i].status=2,r=r.concat(pr(e.serverSyncTree_,t[i].currentWriteId)),t[i].onComplete&&n.push((()=>t[i].onComplete(null,!0,t[i].currentOutputSnapshotResolved))),t[i].unwatcher();Mi(e,Ur(e.transactionQueueTree_,path)),Di(e,e.transactionQueueTree_),di(e.eventQueue_,path,r);for(let i=0;i<n.length;i++)Y(n[i])}else{if("datastale"===n)for(let i=0;i<t.length;i++)3===t[i].status?t[i].status=4:t[i].status=0;else{P("transaction at "+d.toString()+" failed: "+n);for(let i=0;i<t.length;i++)t[i].status=4,t[i].abortReason=n}Ri(e,path)}}),l)}(e,$r(t),n)}else Wr(t)&&Hr(t,(t=>{Di(e,t)}))}function Ri(e,t){const n=Pi(e,t),path=$r(n);return function(e,t,path){if(0===t.length)return;const n=[];let r=[];const o=t.filter((q=>0===q.status)).map((q=>q.currentWriteId));for(let i=0;i<t.length;i++){const h=t[i],d=De(path,h.path);let f,m=!1;if(Object(c.e)(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status)m=!0,f=h.abortReason,r=r.concat(pr(e.serverSyncTree_,h.currentWriteId,!0));else if(0===h.status)if(h.retryCount>=25)m=!0,f="maxretry",r=r.concat(pr(e.serverSyncTree_,h.currentWriteId,!0));else{const n=xi(e,h.path,o);h.currentInputSnapshot=n;const l=t[i].update(n.val());if(void 0!==l){ti("transaction failed: Data returned ",l,h.path);let t=yt(l);"object"==typeof l&&null!=l&&Object(c.j)(l,".priority")||(t=t.updatePriority(n.getPriority()));const d=h.currentWriteId,f=_i(e),m=Mr(t,n,f);h.currentOutputSnapshotRaw=t,h.currentOutputSnapshotResolved=m,h.currentWriteId=Ei(e),o.splice(o.indexOf(d),1),r=r.concat(dr(e.serverSyncTree_,h.path,m,h.currentWriteId,h.applyLocally)),r=r.concat(pr(e.serverSyncTree_,d,!0))}else m=!0,f="nodata",r=r.concat(pr(e.serverSyncTree_,h.currentWriteId,!0))}di(e.eventQueue_,path,r),r=[],m&&(t[i].status=2,l=t[i].unwatcher,setTimeout(l,Math.floor(0)),t[i].onComplete&&("nodata"===f?n.push((()=>t[i].onComplete(null,!1,t[i].currentInputSnapshot))):n.push((()=>t[i].onComplete(new Error(f),!1,null)))))}var l;Mi(e,e.transactionQueueTree_);for(let i=0;i<n.length;i++)Y(n[i]);Di(e,e.transactionQueueTree_)}(e,ji(e,n),path),path}function Pi(e,path){let t,n=e.transactionQueueTree_;for(t=Ie(path);null!==t&&void 0===Vr(n);)n=Ur(n,t),t=Ie(path=Se(path));return n}function ji(e,t){const n=[];return Li(e,t,n),n.sort(((a,b)=>a.order-b.order)),n}function Li(e,t,n){const r=Vr(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Hr(t,(t=>{Li(e,t,n)}))}function Mi(e,t){const n=Vr(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Br(t,n.length>0?n:void 0)}Hr(t,(t=>{Mi(e,t)}))}function Fi(e,path){const t=$r(Pi(e,path)),n=Ur(e.transactionQueueTree_,path);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(n,(t=>{qi(e,t)})),qi(e,n),zr(n,(t=>{qi(e,t)})),t}function qi(e,t){const n=Vr(t);if(n){const r=[];let o=[],l=-1;for(let i=0;i<n.length;i++)3===n[i].status||(1===n[i].status?(Object(c.e)(l===i-1,"All SENT items should be at beginning of queue."),l=i,n[i].status=3,n[i].abortReason="set"):(Object(c.e)(0===n[i].status,"Unexpected transaction status in abort"),n[i].unwatcher(),o=o.concat(pr(e.serverSyncTree_,n[i].currentWriteId,!0)),n[i].onComplete&&r.push(n[i].onComplete.bind(null,new Error("set"),!1,null))));-1===l?Br(t,void 0):n.length=l+1,di(e.eventQueue_,$r(t),o);for(let i=0;i<r.length;i++)Y(r[i])}}const Ui=function(e,t){const n=Vi(e),r=n.namespace;"firebase.com"===n.domain&&R(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||R("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&P("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const o="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new se(n.host,n.secure,r,t,o,"",r!==n.subdomain),path:new Te(n.pathString)}},Vi=function(e){let t="",n="",r="",o="",c="",l=!0,h="https",d=443;if("string"==typeof e){let f=e.indexOf("//");f>=0&&(h=e.substring(0,f-1),e=e.substring(f+2));let m=e.indexOf("/");-1===m&&(m=e.length);let y=e.indexOf("?");-1===y&&(y=e.length),t=e.substring(0,Math.min(m,y)),m<y&&(o=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(e){}t+="/"+e}return t}(e.substring(m,y)));const v=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):P(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,y)));f=t.indexOf(":"),f>=0?(l="https"===h||"wss"===h,d=parseInt(t.substring(f+1),10)):f=t.length;const _=t.slice(0,f);if("localhost"===_.toLowerCase())n="localhost";else if(_.split(".").length<=2)n=_;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),c=r}"ns"in v&&(c=v.ns)}return{host:t,port:d,domain:n,subdomain:r,secure:l,scheme:h,pathString:o,namespace:c}};class Bi{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Object(c.O)(this.snapshot.exportVal())}}class Wi{constructor(e,t,path){this.eventRegistration=e,this.error=t,this.path=path}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Hi{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Object(c.e)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class zi{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new c.a;return Ci(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){oi("OnDisconnect.remove",this._path);const e=new c.a;return Si(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){oi("OnDisconnect.set",this._path),ei("OnDisconnect.set",e,this._path,!1);const t=new c.a;return Si(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){oi("OnDisconnect.setWithPriority",this._path),ei("OnDisconnect.setWithPriority",e,this._path,!1),ri("OnDisconnect.setWithPriority",t,!1);const n=new c.a;return function(e,path,t,n,r){const o=yt(t,n);e.server_.onDisconnectPut(path.toString(),o.val(!0),((t,n)=>{"ok"===t&&Ut(e.onDisconnect_,path,o),Ai(0,r,t,n)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){oi("OnDisconnect.update",this._path),ni("OnDisconnect.update",e,this._path,!1);const t=new c.a;return function(e,path,t,n){if(Object(c.x)(t))return A("onDisconnect().update() called with empty data.  Don't do anything."),void Ai(0,n,"ok",void 0);e.server_.onDisconnectMerge(path.toString(),t,((r,o)=>{"ok"===r&&H(t,((t,n)=>{const r=yt(n);Ut(e.onDisconnect_,Ae(path,t),r)})),Ai(0,n,r,o)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class $i{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return xe(this._path)?null:ke(this._path)}get ref(){return new Yi(this._repo,this._path)}get _queryIdentifier(){const e=Lt(this._queryParams),t=B(e);return"{}"===t?"default":t}get _queryObject(){return Lt(this._queryParams)}isEqual(e){if(!((e=Object(c.r)(e))instanceof $i))return!1;const t=this._repo===e._repo,n=Pe(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(path){let e="";for(let i=path.pieceNum_;i<path.pieces_.length;i++)""!==path.pieces_[i]&&(e+="/"+encodeURIComponent(String(path.pieces_[i])));return e||"/"}(this._path)}}function Ki(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Gi(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===$e){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==L)throw new Error(r);if("string"!=typeof t)throw new Error(o)}if(e.hasEnd()){if(e.getIndexEndName()!==M)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(e.getIndex()===ot){if(null!=t&&!Zr(t)||null!=n&&!Zr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(c.e)(e.getIndex()instanceof vt||e.getIndex()===_t,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qi(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Yi extends $i{constructor(e,path){super(e,path,new xt,!1)}get parent(){const e=Ne(this._path);return null===e?null:new Yi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ji{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(path){const e=new Te(path),t=es(this.ref,path);return new Ji(this._node.getChild(e),t,ot)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Ji(n,es(this.ref,t),ot))))}hasChild(path){const e=new Te(path);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Xi(e,path){return(e=Object(c.r)(e))._checkNotDeleted("ref"),void 0!==path?es(e._root,path):e._root}function Zi(e,t){(e=Object(c.r)(e))._checkNotDeleted("refFromURL");const n=Ui(t,e._repo.repoInfo_.nodeAdmin);ai("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||R("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Xi(e,n.path.toString())}function es(e,path){var t,n,r,o;return null===Ie((e=Object(c.r)(e))._path)?(t="child",n="path",o=!1,(r=path)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),si(t,n,r,o)):si("child","path",path,!1),new Yi(e._repo,Ae(e._path,path))}function ts(e,t){e=Object(c.r)(e),oi("push",e._path),ei("push",t,e._path,!0);const n=vi(e._repo),r=bt(n),o=es(e,r),l=es(e,r);let h;return h=null!=t?rs(l,t).then((()=>l)):Promise.resolve(l),o.then=h.then.bind(h),o.catch=h.then.bind(h,void 0),o}function ns(e){return oi("remove",e._path),rs(e,null)}function rs(e,t){e=Object(c.r)(e),oi("set",e._path),ei("set",t,e._path,!1);const n=new c.a;return Ii(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function is(e,t){e=Object(c.r)(e),oi("setPriority",e._path),ri("setPriority",t,!1);const n=new c.a;return Ii(e._repo,Ae(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}function ss(e,t,n){if(oi("setWithPriority",e._path),ei("setWithPriority",t,e._path,!1),ri("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new c.a;return Ii(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}function os(e,t){ni("update",t,e._path,!1);const n=new c.a;return function(e,path,t,n){Ni(e,"update",{path:path.toString(),value:t});let r=!0;const o=_i(e),c={};if(H(t,((t,n)=>{r=!1,c[t]=Lr(Ae(path,t),yt(n),e.serverSyncTree_,o)})),r)A("update() called with empty data.  Don't do anything."),Ai(0,n,"ok",void 0);else{const r=Ei(e),o=fr(e.serverSyncTree_,path,c,r);ui(e.eventQueue_,o),e.server_.merge(path.toString(),t,((t,o)=>{const c="ok"===t;c||P("update at "+path+" failed: "+t);const l=pr(e.serverSyncTree_,r,!c),h=l.length>0?Ri(e,path):path;di(e.eventQueue_,h,l),Ai(0,n,t,o)})),H(t,(t=>{const n=Fi(e,Ae(path,t));Ri(e,n)})),di(e.eventQueue_,path,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function as(e){return function(e,t){const n=_r(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((n=>{const r=yt(n).withIndex(t._queryParams.getIndex()),o=gr(e.serverSyncTree_,t._path,r);return hi(e.eventQueue_,t._path,o),Promise.resolve(r)}),(n=>(Ni(e,"get for query "+Object(c.O)(t)+" failed: "+n),Promise.reject(new Error(n)))))}((e=Object(c.r)(e))._repo,e).then((t=>new Ji(t,new Yi(e._repo,e._path),e._queryParams.getIndex())))}class cs{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Bi("value",this,new Ji(e.snapshotNode,new Yi(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,path){return this.callbackContext.hasCancelCallback?new Wi(this,e,path):null}matches(e){return e instanceof cs&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class us{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,path){return this.callbackContext.hasCancelCallback?new Wi(this,e,path):null}createEvent(e,t){Object(c.e)(null!=e.childName,"Child events should have a childName.");const n=es(new Yi(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Bi(e.type,this,new Ji(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof us&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function ls(e,t,n,r,o){let c;if("object"==typeof r&&(c=void 0,o=r),"function"==typeof r&&(c=r),o&&o.onlyOnce){const t=n,r=(n,r)=>{ki(e._repo,e,h),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const l=new Hi(n,c||void 0),h="value"===t?new cs(l):new us(t,l);return function(e,t,n){let r;r=".info"===Ie(t._path)?yr(e.infoSyncTree_,t,n):yr(e.serverSyncTree_,t,n),hi(e.eventQueue_,t._path,r)}(e._repo,e,h),()=>ki(e._repo,e,h)}function hs(e,t,n,r){return ls(e,"value",t,n,r)}function ds(e,t,n,r){return ls(e,"child_added",t,n,r)}function fs(e,t,n,r){return ls(e,"child_changed",t,n,r)}function ps(e,t,n,r){return ls(e,"child_moved",t,n,r)}function gs(e,t,n,r){return ls(e,"child_removed",t,n,r)}function ms(e,t,n){let r=null;const o=n?new Hi(n):null;"value"===t?r=new cs(o):t&&(r=new us(t,o)),ki(e._repo,e,r)}class ys{}class vs extends ys{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ei("endAt",this._value,e._path,!0);const t=Rt(e._queryParams,this._value,this._key);if(Qi(t),Gi(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $i(e._repo,e._path,t,e._orderByCalled)}}function _s(e,t){return ii("endAt","key",t,!0),new vs(e,t)}class ws extends ys{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ei("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r,o;return e.index_===$e?("string"==typeof t&&(t=Et(t)),o=Rt(e,t,n)):(r=null==n?L:Et(n),o=Rt(e,t,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(Qi(t),Gi(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $i(e._repo,e._path,t,e._orderByCalled)}}function bs(e,t){return ii("endBefore","key",t,!0),new ws(e,t)}class Ts extends ys{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ei("startAt",this._value,e._path,!0);const t=Dt(e._queryParams,this._value,this._key);if(Qi(t),Gi(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $i(e._repo,e._path,t,e._orderByCalled)}}function Es(e=null,t){return ii("startAt","key",t,!0),new Ts(e,t)}class Is extends ys{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ei("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;if(e.index_===$e)"string"==typeof t&&(t=Tt(t)),r=Dt(e,t,n);else{let o;o=null==n?M:Tt(n),r=Dt(e,t,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Qi(t),Gi(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new $i(e._repo,e._path,t,e._orderByCalled)}}function Cs(e,t){return ii("startAfter","key",t,!0),new Is(e,t)}class Ss extends ys{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new $i(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}function ks(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ss(e)}class Os extends ys{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new $i(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}function Ns(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Os(e)}class As extends ys{constructor(e){super(),this._path=e}_apply(e){Ki(e,"orderByChild");const t=new Te(this._path);if(xe(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new vt(t),r=Pt(e._queryParams,n);return Gi(r),new $i(e._repo,e._path,r,!0)}}function xs(path){if("$key"===path)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===path)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===path)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return si("orderByChild","path",path,!1),new As(path)}class Ds extends ys{_apply(e){Ki(e,"orderByKey");const t=Pt(e._queryParams,$e);return Gi(t),new $i(e._repo,e._path,t,!0)}}function Rs(){return new Ds}class Ps extends ys{_apply(e){Ki(e,"orderByPriority");const t=Pt(e._queryParams,ot);return Gi(t),new $i(e._repo,e._path,t,!0)}}function js(){return new Ps}class Ls extends ys{_apply(e){Ki(e,"orderByValue");const t=Pt(e._queryParams,_t);return Gi(t),new $i(e._repo,e._path,t,!0)}}function Ms(){return new Ls}class Fs extends ys{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ei("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new vs(this._value,this._key)._apply(new Ts(this._value,this._key)._apply(e))}}function qs(e,t){return ii("equalTo","key",t,!0),new Fs(e,t)}function Us(e,...t){let n=Object(c.r)(e);for(const e of t)n=e._apply(n);return n}!function(e){Object(c.e)(!Qn,"__referenceConstructor has already been defined"),Qn=e}(Yi),function(e){Object(c.e)(!Yn,"__referenceConstructor has already been defined"),Yn=e}(Yi);const Vs={};let Bs=!1;function Ws(t,n,r,o,c){let l=o||t.options.databaseURL;void 0===l&&(t.options.projectId||R("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),A("Using default host for project ",t.options.projectId),l=`${t.options.projectId}-default-rtdb.firebaseio.com`);let h,d,f=Ui(l,c),m=f.repoInfo;void 0!==e&&(d=e.env.FIREBASE_DATABASE_EMULATOR_HOST),d?(h=!0,l=`http://${d}?ns=${m.namespace}`,f=Ui(l,c),m=f.repoInfo):h=!f.repoInfo.secure;const y=c&&h?new ee(ee.OWNER):new Z(t.name,t.options,n);ai("Invalid Firebase Database URL",f),xe(f.path)||R("Database URL must point to the root of a Firebase Database (not including a child path).");const v=function(e,t,n,r){let o=Vs[t.name];o||(o={},Vs[t.name]=o);let c=o[e.toURLString()];c&&R("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return c=new mi(e,Bs,n,r),o[e.toURLString()]=c,c}(m,t,y,new X(t.name,r));return new Hs(v,t)}class Hs{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yi(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yi(this._repo,Ee())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Vs[t];n&&n[e.key]===e||R(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Oi(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&R("Cannot call "+e+" on a deleted database.")}}function zs(e,t,n,r={}){(e=Object(c.r)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&R("Cannot call useEmulator() after instance has already been initialized.");const o=e._repoInternal;let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&R('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new ee(ee.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:Object(c.k)(r.mockUserToken,e.app.options.projectId);l=new ee(t)}!function(e,t,n,r){e.repoInfo_=new se(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(o,t,n,l)}function $s(e){(e=Object(c.r)(e))._checkNotDeleted("goOffline"),Oi(e._repo)}function Ks(e){var t;(e=Object(c.r)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(gi)}function Gs(e,t){N(e,t)}const Qs={".sv":"timestamp"};function Ys(){return Qs}function Js(e){return{".sv":{increment:e}}}class Xs{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Zs(e,t,n){var r;if(e=Object(c.r)(e),oi("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,l=new c.a,h=hs(e,(()=>{}));return function(e,path,t,n,r,o){Ni(e,"transaction on "+path);const l={path:path,update:t,onComplete:n,status:null,order:I(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=xi(e,path,void 0);l.currentInputSnapshot=h;const d=l.update(h.val());if(void 0===d)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{ti("transaction failed: Data returned ",d,l.path),l.status=0;const t=Ur(e.transactionQueueTree_,path),n=Vr(t)||[];let r;n.push(l),Br(t,n),"object"==typeof d&&null!==d&&Object(c.j)(d,".priority")?(r=Object(c.L)(d,".priority"),Object(c.e)(Zr(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(vr(e.serverSyncTree_,path)||gt.EMPTY_NODE).getPriority().val();const o=_i(e),f=yt(d,r),m=Mr(f,h,o);l.currentOutputSnapshotRaw=f,l.currentOutputSnapshotResolved=m,l.currentWriteId=Ei(e);const y=dr(e.serverSyncTree_,path,m,l.currentWriteId,l.applyLocally);di(e.eventQueue_,path,y),Di(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let o=null;t?l.reject(t):(o=new Ji(r,new Yi(e._repo,e._path),ot),l.resolve(new Xs(n,o)))}),h,o),l.promise}Ve.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ve.prototype.echo=function(data,e){this.sendRequest("echo",{d:data},e)};var eo;m(r.SDK_VERSION),Object(r._registerComponent)(new o.a("database",((e,{instanceIdentifier:t})=>Ws(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),Object(r.registerVersion)(h,d,eo),Object(r.registerVersion)(h,d,"esm2017")}).call(this,n(109))},32:function(e,t,n){"use strict";var r=n(28);n.d(t,"a",(function(){return r.a}));r.a.registerVersion("firebase","9.6.6","app-compat")},67:function(e,t,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,r=t.slots,o=t.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?e(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return e(!1)})):e(!1))}};e.exports=r},69:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var content=function(e,t){var content=e[1]||"",n=e[3];if(!n)return content;if(t&&"function"==typeof btoa){var r=(c=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(data," */")),o=n.sources.map((function(source){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(source," */")}));return[content].concat(o).concat([r]).join("\n")}var c,l,data;return[content].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(content,"}"):content})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);r&&o[h[0]]||(n&&(h[2]?h[2]="".concat(n," and ").concat(h[2]):h[2]=n),t.push(h))}},t}},7:function(e,t,n){"use strict";n.r(t),n.d(t,"SDK_VERSION",(function(){return A})),n.d(t,"_DEFAULT_ENTRY_NAME",(function(){return m})),n.d(t,"_addComponent",(function(){return w})),n.d(t,"_addOrOverwriteComponent",(function(){return T})),n.d(t,"_apps",(function(){return v})),n.d(t,"_clearComponents",(function(){return S})),n.d(t,"_components",(function(){return _})),n.d(t,"_getProvider",(function(){return I})),n.d(t,"_registerComponent",(function(){return E})),n.d(t,"_removeServiceInstance",(function(){return C})),n.d(t,"deleteApp",(function(){return P})),n.d(t,"getApp",(function(){return D})),n.d(t,"getApps",(function(){return R})),n.d(t,"initializeApp",(function(){return x})),n.d(t,"onLog",(function(){return L})),n.d(t,"registerVersion",(function(){return j})),n.d(t,"setLogLevel",(function(){return M}));var r=n(13),o=n(14),c=n(0);n.d(t,"FirebaseError",(function(){return c.c}));class l{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const component=e.getComponent();return"VERSION"===(null==component?void 0:component.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const h="@firebase/app",d="0.7.16",f=new o.b("@firebase/app"),m="[DEFAULT]",y={[h]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},v=new Map,_=new Map;function w(e,component){try{e.container.addComponent(component)}catch(t){f.debug(`Component ${component.name} failed to register with FirebaseApp ${e.name}`,t)}}function T(e,component){e.container.addOrOverwriteComponent(component)}function E(component){const e=component.name;if(_.has(e))return f.debug(`There were multiple attempts to register component ${e}.`),!1;_.set(e,component);for(const e of v.values())w(e,component);return!0}function I(e,t){return e.container.getProvider(t)}function C(e,t,n=m){I(e,t).clearInstance(n)}function S(){_.clear()}const k={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."},O=new c.b("app","Firebase",k);class N{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.a("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw O.create("app-deleted",{appName:this._name})}}const A="9.6.6";function x(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:m,automaticDataCollectionEnabled:!1},t),o=n.name;if("string"!=typeof o||!o)throw O.create("bad-app-name",{appName:String(o)});const l=v.get(o);if(l){if(Object(c.n)(e,l.options)&&Object(c.n)(n,l.config))return l;throw O.create("duplicate-app",{appName:o})}const h=new r.b(o);for(const component of _.values())h.addComponent(component);const d=new N(e,n,h);return v.set(o,d),d}function D(e=m){const t=v.get(e);if(!t)throw O.create("no-app",{appName:e});return t}function R(){return Array.from(v.values())}async function P(e){const t=e.name;v.has(t)&&(v.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function j(e,t,n){var o;let c=null!==(o=y[e])&&void 0!==o?o:e;n&&(c+=`-${n}`);const l=c.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const e=[`Unable to register library "${c}" with version "${t}":`];return l&&e.push(`library name "${c}" contains illegal characters (whitespace or "/")`),l&&h&&e.push("and"),h&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void f.warn(e.join(" "))}E(new r.a(`${c}-version`,(()=>({library:c,version:t})),"VERSION"))}function L(e,t){if(null!==e&&"function"!=typeof e)throw O.create("invalid-log-argument");Object(o.d)(e,t)}function M(e){Object(o.c)(e)}var F;F="",E(new r.a("platform-logger",(e=>new l(e)),"PRIVATE")),j(h,d,F),j(h,d,"esm2017"),j("fire-js","")},70:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],c=o[0],l={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}n.r(t),n.d(t,"default",(function(){return _}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,h=0,d=!1,f=function(){},m=null,y="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function _(e,t,n,o){d=n,m=o||{};var l=r(e,t);return w(l),function(t){for(var n=[],i=0;i<l.length;i++){var o=l[i];(h=c[o.id]).refs--,n.push(h)}t?w(l=r(e,t)):l=[];for(i=0;i<n.length;i++){var h;if(0===(h=n[i]).refs){for(var d=0;d<h.parts.length;d++)h.parts[d]();delete c[h.id]}}}}function w(e){for(var i=0;i<e.length;i++){var t=e[i],n=c[t.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](t.parts[r]);for(;r<t.parts.length;r++)n.parts.push(E(t.parts[r]));n.parts.length>t.parts.length&&(n.parts.length=t.parts.length)}else{var o=[];for(r=0;r<t.parts.length;r++)o.push(E(t.parts[r]));c[t.id]={id:t.id,refs:1,parts:o}}}}function T(){var e=document.createElement("style");return e.type="text/css",head.appendChild(e),e}function E(e){var t,n,r=document.querySelector("style["+y+'~="'+e.id+'"]');if(r){if(d)return f;r.parentNode.removeChild(r)}if(v){var o=h++;r=l||(l=T()),t=S.bind(null,r,o,!1),n=S.bind(null,r,o,!0)}else r=T(),t=k.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var I,C=(I=[],function(e,t){return I[e]=t,I.filter(Boolean).join("\n")});function S(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=C(t,o);else{var c=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(c,l[t]):e.appendChild(c)}}function k(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),m.ssrId&&e.setAttribute(y,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}}]);